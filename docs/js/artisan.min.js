!function(){"use strict";angular.module("artisan",["ng","ngRoute","ngMessages"])}(),function(){"use strict";angular.module("artisan").directive("modalView",["$parse","$templateRequest","$compile","$controller","Dom",function(i,a,s,u,t){return{restrict:"A",priority:-400,link:function(e,n,t,r){var o=i(t.modalView);(o=o(e)).templateUrl=o.templateUrl||"artisan/components/modals/partial/modal",a(o.templateUrl).then(function(t){!function(t,e,n,r){e.html(n);var o=s(e.contents());if(r.controller){var i=t.$new();angular.extend(i,r);var a=u(r.controller,{$scope:i});r.controllerAs&&(t[r.controllerAs]=a),e.data("$ngControllerController",a),e.children().data("$ngControllerController",a),t=i}o(t)}(e,n,t,o)})}}}])}(),function(){"use strict";angular.module("artisan").provider("$modal",[function(){var u,c=[],l={};this.modals=c,this.routes=l,this.when=function(t,e){return l[t]=e,this},this.$get=["$q","$timeout",function(i,a){function s(n){var r=-1;angular.forEach(c,function(t,e){t===n&&(r=e)}),-1!==r&&(n.active=!1,u&&a.cancel(u),u=a(function(){for(;c.length;)c.splice(c.length-1,1)},0))}return{modals:c,addModal:function(t,e){var n=i.defer(),o={title:"Untitled",controller:null,templateUrl:null,params:e=e||null},r=l[t];return r&&angular.extend(o,r),o.deferred=n,o.back=function(t){var n,r;n=this,r=-1,angular.forEach(c,function(t,e){t===n&&(r=e)}),-1!==r&&(u&&a.cancel(u),u=a(function(){n.active=!1,c.splice(r,1),c.length&&(c[c.length-1].active=!0)},0)),o.deferred.resolve(t,o)},o.resolve=function(t){s(this),o.deferred.resolve(t,o)},o.reject=function(){s(this),o.deferred.reject(o)},angular.forEach(c,function(t,e){t.active=!1}),c.length?(c.push(o),o.active=!0):(c.push(o),u&&a.cancel(u),u=a(function(){o.active=!0},50)),n.promise}}}]}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("nav",["$parse","Nav",function(a,s){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/components/nav/partial/nav"},scope:{items:"=nav"},link:function(o,t,i,e){o.$watch("items",function(t){if(t)if(angular.isArray(t)){var e=a(i.onPath)(o.$parent),n=a(i.onNav)(o.$parent),r=new s({onPath:e,onNav:n});r.setItems(t),o.item=r}else t instanceof s&&(o.item=t)})}}}]),t.directive("navItem",["$timeout","Events",function(c,l){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/components/nav/partial/nav-item"},scope:{item:"=navItem"},link:function(o,t,e,n){var i,r=angular.element(t[0].querySelector(".nav-link"));function a(t,e){var n=t.$nav.state;n.active=!1,c(function(){n.immediate=e,n.opened=n.opening=!1,n.closing=!0,c(function(){n.closing=!1,n.closed=!0})}),t.items&&angular.forEach(t.items,function(t){a(t,!0)})}function s(e){var t,n,r=e.$nav.state;r.active=!e.items||!r.active,r.active?(e.$nav.parent&&angular.forEach(e.$nav.parent.items,function(t){t!==e&&a(t,!0)}),(n=e.$nav.state).active=!0,c(function(){n.immediate=t,n.closed=n.closing=!1,n.opening=!0,c(function(){n.opening=!1,n.opened=!0})})):a(e)}function u(t){if(!1===i)return t.stop(),!1}new l(r).add({down:function(t){var e=o.item;if(e.$nav.state.active)i=!1,r();else if(e.$nav.onNav){var n=e.$nav.onNav(e,e.$nav);n&&"function"==typeof n.then?(n.then(function(t){r()},function(t){}),i=!1):(i=n,r())}function r(){c(function(){s(e)})}},click:function(t){return u(t)}},o)}}}]),t.directive("navTo",["$parse","$timeout","Events",function(r,o,i){return{restrict:"A",link:function(e,t,n){new i(t).add({down:function(t){return console.log("navTo.onDown",n.navTo),o(function(){r(n.navTo)(e)}),t.preventDefault(),!1}},e)}}}])}(),function(){"use strict";angular.module("artisan").factory("Nav",["Silent",function(e){function t(t){angular.extend(this,{items:[]}),t&&angular.extend(this,t),this.setNav(this,null)}var n={silent:function(t){e.silent(t)},path:function(t){e.path(t)}},r={addItem:function(t,e){this.onPath,this.onNav;this.setNav(t,e),e&&(e.items=e.items||[],e.items.push(t))},addItems:function(t,e){var n=this;angular.isArray(t)?angular.forEach(t,function(t){n.addItem(t,e)}):n.addItem(t,e)},getPath:function(t){var e=null;e=this.onPath?this.onPath(t,t.$nav):t.path;return e},setItems:function(t){this.path=e.path(),this.items=t,this.setNavs(t,this)},setNav:function(e,t){var n=this,r={parent:t||null,level:t?t.$nav.level+1:0,state:{},addItems:function(t){n.addItems(t,e)},onNav:n.onNav};if((e.$nav=r).path=n.getPath(e),r.path===n.path)for(r.state.active=!0,r.state.opened=!0;r.parent;)(r=r.parent.$nav).state.active=!0,r.state.opened=!0},setNavs:function(t,e){var n=this;t&&angular.forEach(t,function(t){n.setNav(t,e),n.setNavs(t.items,t)})}};return angular.extend(t,n),angular.extend(t.prototype,r),t}])}(),function(){"use strict";angular.module("artisan").factory("Animate",[function(){function t(t){this.callback=t,this.key=null,this.ticks=0}var e={pause:function(){this.key&&(window.cancelAnimationFrame(this.key),this.key=null)},play:function(){var n=this;n.key||function t(e){n.ticks++;n.callback(e,n.ticks);n.key=window.requestAnimationFrame(t)}()},toggle:function(){this.key?this.pause():this.play()}};return angular.extend(t,{}),angular.extend(t.prototype,e),t}]),function(){for(var i=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),o=window.setTimeout(function(){t(n+r)},r);return i=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()}(),function(){"use strict";var t=angular.module("artisan");t.service("DateTime",[function(){var r=6e4,e=15*r,n=60*r,o=24*n,t=7*o,i=1,a=m(),s={getIndexLeft:D,getIndexRight:b,getDayLeft:function(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.dd/r)*r;return i+=D(e,n,r),f(t=new Date(o.yyyy,o.MM,i,o.HH,o.mm,o.ss,o.sss))},getDayRight:function(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.dd/r)*r;return i+=b(e,n,r),h(t=new Date(o.yyyy,o.MM,i,o.HH,o.mm,o.ss,o.sss))},getMonthLeft:function(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.MM/r)*r;return i+=D(e,n,r),w(t=new Date(o.yyyy,i,o.dd,o.HH,o.mm,o.ss,o.sss))},getMonthRight:function(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.MM/r)*r;return i+=b(e,n,r),M(t=new Date(o.yyyy,i,o.dd,o.HH,o.mm,o.ss,o.sss))},getWeekLeft:function(t,e,n,r){var o=c(t),i=o.dd+7*D(e,n,r);return E(t=new Date(o.yyyy,o.MM,i,o.HH,o.mm,o.ss,o.sss))},getWeekRight:function(t,e,n,r){var o=c(t),i=o.dd+7*b(e,n,r);return x(t=new Date(o.yyyy,o.MM,i,o.HH,o.mm,o.ss,o.sss))},getYearLeft:S,getYearRight:function(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.yyyy/r)*r;return i+=b(e,n,r),T(t=new Date(i,o.MM,o.dd,o.HH,o.mm,o.ss,o.sss))},dateToKey:l,dayDiff:function(t,e){var n=c(e);return new Date(n.yyyy,n.MM,n.dd+t,n.HH,n.mm,n.ss,n.sss)},dayLeft:f,dayRight:h,getDate:d,getFullDate:m,getDay:g,getFullDay:v,getWeek:R,getDayByKey:function(t){return g(p(t),t)},getDayByDate:y,hourToTime:function(t){return t*n},keyToDate:p,monthDiff:function(t,e,n){n=n||1;var r=c(e),o=Math.floor(r.MM/n)*n+t*n;return new Date(r.yyyy,o,1,r.HH,r.mm,r.ss,r.sss)},monthLeft:w,monthRight:M,today:a,weekDiff:function(t,e){var n=c(e);return new Date(n.yyyy,n.MM,n.dd+7*t,n.HH,n.mm,n.ss,n.sss)},weekLeft:E,weekRight:x,yearDiff:function(t,e){var n=c(e);return new Date(n.yyyy,n.MM+12*t,n.dd,n.HH,n.mm,n.ss,n.sss)},yearLeft:k,yearRight:T,timeToHour:function(t){return t/n},timeToQuarterHour:function(t){return Math.floor(t/e)*e/n},SECOND:1e3,MINUTE:r,QUARTER:e,HOUR:n,DAY:o,WEEK:t,FIRSTDAYOFWEEK:i};function u(t){return t=t?new Date(t):new Date}function c(t){return{date:t=u(t),yyyy:t.getFullYear(),MM:t.getMonth(),dd:t.getDate(),ee:t.getDay(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()}}function l(t){var e=(t=f(u(t))).getTimezoneOffset();return Math.floor((t.valueOf()-e*r)/o)}function f(t){var e=c(t);return new Date(e.yyyy,e.MM,e.dd,0,0,0,0)}function h(t){var e=c(t);return new Date(e.yyyy,e.MM,e.dd,23,59,59,999)}function d(t){return y(t=f(t))}function m(t){return v(d(t))}function g(t,e){return{date:t,key:e}}function y(t){return g(t,l(t))}function v(t){var e=c(t.date);return e.key=t.key,e.wKey=l(E(t.date)),e.mKey=l(w(t.date)),e.ww=R(t.date,i),e}function p(t){var e=new Date,n=e.getTimezoneOffset();return new Date(e.setTime(t*o+n*r))}function w(t,e){e=e||1;var n=c(t),r=Math.floor(n.MM/e)*e;return new Date(n.yyyy,r,1,0,0,0,0)}function M(t,e){e=e||1;var n=c(t),r=Math.floor(n.MM/e)*e;return new Date(n.yyyy,r+e,0,23,59,59,999)}function E(t){var e=c(t);return new Date(e.yyyy,e.MM,e.dd-e.ee+i,0,0,0,0)}function x(t){var e=c(t);return new Date(e.yyyy,e.MM,e.dd-e.ee+i+6,23,59,59,999)}function k(t){var e=c(t);return new Date(e.yyyy,0,1,0,0,0,0)}function T(t){var e=c(t);return new Date(e.yyyy,12,0,23,59,59,999)}function D(t,e,n){return e=e||1,(t=t||0)*(n=n||1)}function b(t,e,n){var r=D(t,e=e||1,n=n||1);return r+=e*n-1}function S(t,e,n,r){r=r||1;var o=c(t),i=Math.floor(o.yyyy/r)*r;return i+=D(e,n,r),k(t=new Date(i,o.MM,o.dd,o.HH,o.mm,o.ss,o.sss))}function $(t,e){e=e||0;var n=t.getDay();return(n-=e)<0&&(n+=7),n}function R(t,e){var n=y(t),r=y(S(t)),o=$(r.date,e),i=n.key-r.key,a=Math.floor((i+o)/7);return o<4&&52<++a&&(a=(o=$(S(t,1),e))<4?1:53),a}angular.extend(this,s)}]),t.filter("isoWeek",["DateTime",function(r){return function(t,e){if(t){var n=r.getWeek(t,e);return n<10?"0"+n:n}return"-"}}])}(),function(){"use strict";var t=angular.module("artisan"),c={long:{RANGE:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",YEAR:"Anno {from|date:yyyy}",SEMESTER:"Semestre {from|date:MMM yyyy} - {to|date:MMM yyyy}",TRIMESTER:"Quadrimestre {from|date:MMM yyyy} - {to|date:MMM yyyy}",QUARTER:"Trimestre {from|date:MMM yyyy} - {to|date:MMM yyyy}",MONTH:"{from|date:MMMM yyyy}",WEEK:"Settimana {to|isoWeek:1}",DAY:"{from|date:EEEE dd MMM yyyy}"},short:{RANGE:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",YEAR:"{from|date:yyyy}",SEMESTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",TRIMESTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",QUARTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",MONTH:"{from|date:MMMM}",WEEK:"W{to|isoWeek:1}",DAY:"{from|date:EEEE}"},week:1};t.constant("RangeTypes",{RANGE:10,YEAR:11,SEMESTER:12,TRIMESTER:13,QUARTER:14,MONTH:15,WEEK:16,DAY:17}),t.factory("Range",["$filter","DateTime","RangeTypes",function(s,o,r){function n(t){this.from=o.dayLeft(),this.type=r.QUARTER,t&&angular.extend(this,t),this.setDiff()}var t={setYear:function(t,e,n,r){return this.from=o.getYearLeft(t,e,n,r),this.to=o.getYearRight(t,e,n,r),this},setSemester:function(t,e,n){return this.setMonth(t,e,n,6)},setTrimester:function(t,e,n){return this.setMonth(t,e,n,4)},setQuarter:function(t,e,n){return this.setMonth(t,e,n,3)},setMonth:function(t,e,n,r){return this.from=o.getMonthLeft(t,e,n,r),this.to=o.getMonthRight(t,e,n,r),this},setWeek:function(t,e,n,r){return this.from=o.getWeekLeft(t,e,n,r),this.to=o.getWeekRight(t,e,n,r),this},setDay:function(t,e,n,r){return this.from=o.getDayLeft(t,e,n,r),this.to=o.getDayRight(t,e,n,r),this},setKey:function(t,e,n,r){return this.setDay(o.keyToDate(t),e,n,r)},prev:function(){return this.setDiff(-1)},next:function(){return this.setDiff(1)},getDiff:function(t){return new n({type:this.type}).setDate(this.from).setDiff(t)},getParams:function(){return{dateFrom:new Date(this.from),dateTo:new Date(this.to)}},getDate:function(t){t=t||0;var e=new Date(this.from);switch(this.type){case r.YEAR:e=new Date(e.setFullYear(e.getFullYear()+t));break;case r.SEMESTER:e=new Date(e.setMonth(e.getMonth()+6*t));break;case r.TRIMESTER:e=new Date(e.setMonth(e.getMonth()+4*t));break;case r.QUARTER:e=new Date(e.setMonth(e.getMonth()+3*t));break;case r.MONTH:e=new Date(e.setMonth(e.getMonth()+t));break;case r.WEEK:e=new Date(e.setDate(e.getDate()+7*t));break;case r.DAY:e=new Date(e.setDate(e.getDate()+t))}return e},setDate:function(t,e){var n=this;switch(n.type){case r.YEAR:n.setYear(t,e);break;case r.SEMESTER:n.setSemester(t,e);break;case r.TRIMESTER:n.setTrimester(t,e);break;case r.QUARTER:n.setQuarter(t,e);break;case r.MONTH:n.setMonth(t,e);break;case r.WEEK:n.setWeek(t,e);break;case r.DAY:n.setDay(t,e)}return n},setDiff:function(t){var e=this;switch(e.type){case r.YEAR:e.setYear(e.from,t);break;case r.SEMESTER:e.setSemester(e.from,t);break;case r.TRIMESTER:e.setTrimester(e.from,t);break;case r.QUARTER:e.setQuarter(e.from,t);break;case r.MONTH:e.setMonth(e.from,t);break;case r.WEEK:e.setWeek(e.from,t);break;case r.DAY:e.setDay(e.from,t)}return e},set:function(t,e){t.dateFrom=this.from,t.dateTo=this.to,e&&e.setDates(t.dateFrom,t.dateTo);return this},is:function(t){var e=!1;t.dateFrom&&t.dateTo&&(e=t.dateFrom.getTime()==this.from.getTime()&&t.dateTo.getTime()==this.to.getTime());return e},isInside:function(t){return!this.isOutside(t)},isOutside:function(t){t=t||new Date;return t<this.from||t>this.to},isCurrent:function(t){return t=t||new Date,!this.isOutside(t)},isBefore:function(t){return t=t||new Date,this.to<t},isAfter:function(t){return t=t||new Date,this.from>t},equals:function(t){return t&&o.dateToKey(t.from)===o.dateToKey(this.from)&&o.dateToKey(t.to)===o.dateToKey(this.to)},eachDay:function(t){if("function"!=typeof t)return this;var e=o.dateToKey(this.from),n=o.dateToKey(this.to);for(;e<=n;)t(o.getDayByKey(e,c.week)),e++;return this},totalDays:function(){var t=o.dateToKey(this.from);return o.dateToKey(this.to)-t+1},getName:function(){var t=u(r,this.type);return a(this,c.long[t])},getShortName:function(){var t=u(r,this.type);return a(this,c.short[t])},toString:function(){return"["+s("date")(this.from,"MMM dd yyyy HH:mm:ss.sss")+", "+s("date")(this.to,"MMM dd yyyy HH:mm:ss.sss")+"] '"+this.getName()+"'"}},e={copy:i,expand:function(t,e){return(t=i(t)).from=new Date(t.from.getTime()-e),t.to=new Date(t.to.getTime()+e),t},getMonth:function(t){return t?((t=new Date(t)).setDate(1),t.setHours(0,0,0,0),t.getTime()):null},addYear:function(t,e){return t?(t=new Date(t),new Date(t.setFullYear(t.getFullYear()+e))):null},types:r,Year:function(){return new n({type:r.YEAR})},Semester:function(){return new n({type:r.SEMESTER})},Trimester:function(){return new n({type:r.TRIMESTER})},Quarter:function(){return new n({type:r.QUARTER})},Month:function(){return new n({type:r.MONTH})},Week:function(){return new n({type:r.WEEK})},Day:function(){return new n({type:r.DAY})},getDate:o.getDate,getFullDate:o.getFullDate,dateToKey:o.dateToKey,keyToDate:o.keyToDate,getDay:o.getDay,getFullDay:o.getFullDay,getDayByKey:o.getDayByKey,getDayByDate:o.getDayByDate,today:o.today,DateTime:o};return angular.extend(n.prototype,t),angular.extend(n,e),n;function i(t){var e=new n(t);return e.from=new Date(t.from),e.to=new Date(t.to),e}function a(a,t){var e=t;return e=e.replace(/{(.*?)}/g,function(t,e){var n,r=e.split("|"),o=r.shift(),i=r.join("");return-1!==i.indexOf(":")&&(n=(i=i.split(":")).length?i.pop():null,i=i.join("")),i.length?s(i)(a[o],n):a[o]})}function u(t,e){return Object.keys(t)[Object.values(t).indexOf(e)]}}]),"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(t){var e=[];for(var n in t)has(t,n)&&isEnumerable(t,n)&&e.push(t[n]);return e}})}(),function(){"use strict";var t=angular.module("artisan");t.value("$formats",{just_now:"just now",seconds_ago:"{{num}} seconds ago",a_minute_ago:"a minute ago",minutes_ago:"{{num}} minutes ago",an_hour_ago:"an hour ago",hours_ago:"{{num}} hours ago",a_day_ago:"yesterday",days_ago:"{{num}} days ago",a_week_ago:"a week ago",weeks_ago:"{{num}} weeks ago",a_month_ago:"a month ago",months_ago:"{{num}} months ago",a_year_ago:"a year ago",years_ago:"{{num}} years ago",over_a_year_ago:"over a year ago",seconds_from_now:"{{num}} seconds from now",a_minute_from_now:"a minute from now",minutes_from_now:"{{num}} minutes from now",an_hour_from_now:"an hour from now",hours_from_now:"{{num}} hours from now",a_day_from_now:"tomorrow",days_from_now:"{{num}} days from now",a_week_from_now:"a week from now",weeks_from_now:"{{num}} weeks from now",a_month_from_now:"a month from now",months_from_now:"{{num}} months from now",a_year_from_now:"a year from now",years_from_now:"{{num}} years from now",over_a_year_from_now:"over a year from now"}),t.filter("dateRelative",["$rootScope","$interval","$injector","$formats",function(t,e,n,r){var i=86400,a=7*i,s=30*i,u=n.has("$format")?n.get("$format"):{instant:function(t,e){return r[t].replace("{{num}}",e.num)}};function c(t,e){return Math.round(Math.abs(t-e)/1e3)}return function(t){t instanceof Date||(t=new Date(t));var e=new Date,n=c(e,t);i<n&&n<a&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),n=c(e,t));var r=t<=e?"_ago":"_from_now";function o(t,e){return u.instant(t+(30<n?r:""),{num:e})}return console.log("delta",n,e,t),n<30?o("just_now"):n<60?o("seconds",n):n<120?o("a_minute"):n<3600?o("minutes",Math.floor(n/60)):n<7200?o("an_hour"):n<i?o("hours",Math.floor(n/3600)):n<2*i?o("a_day"):n<a?o("days",Math.floor(n/i)):1!==Math.floor(n/a)?o("a_week"):n<s?o("weeks",Math.floor(n/a)):1!==Math.floor(n/s)?o("a_month"):n<31536e3?o("months",Math.floor(n/s)):1!==Math.floor(n/31536e3)?o("a_year"):o("over_a_year")}}]),t.directive("dateRelative",["$parse","$filter","$interval",function(a,s,t){return{priority:1001,restrict:"A",link:function(n,r,o,t){function e(){var t=a(o.dateRelative)(n),e=s("dateRelative")(t);r[0].innerHTML=e}e();var i=setInterval(e,6e4);n.$on("$destroy",function(){cancelInterval(i)})}}}])}(),function(){"use strict";angular.module("artisan").service("Dom",["Point","Rect",function(a,n){var t,e,r,o,i,s,u,c={getBoundRect:function(t){(t=h(t))===window&&(t=l());return t.getBoundingClientRect()},getClosest:function(t,e){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(null!==(r=t.parentElement)&&r[n](e))return r;t=r}return null},getClosestNode:function(t,e){var n=null;if(t===e)return t;for(;null!==t;){if(null!==(n=t.parentElement)&&n===e)return n;t=n}return null},getDelta:function(t){var e=t.originalEvent?t.originalEvent:t,n=e.type,r=null;if("wheel"===n||"mousewheel"===n||"DOMMouseScroll"===n){var o=e.deltaX||e.wheelDeltaX,i=e.deltaY||e.wheelDeltaY;r=new a(o,i),Math.abs(o)>Math.abs(i)?r.dir=o<0?1:-1:r.dir=i<0?1:-1}return r},getDocumentNode:l,getElement:f,getNode:h,getNodeOffset:function(t){var e=new a;(t=h(t))&&1===t.nodeType&&(e.x=t.offsetLeft,e.y=t.offsetTop);return e},getPageScroll:function(){var t=new a,e=l();return t.x=window.pageXOffset||e.scrollLeft,t.y=window.pageYOffset||e.scrollTop,t},getParents:function(t,e){e=e||l();var n=[];if(t){n.push(t);for(var r=t.parentNode;r&&r!==e;)n.push(r),r=r.parentNode;n.push(e)}return n.each=function(e){this.filter(function(t){e&&e(angular.element(t),t)})},n},getView:function(){var t=new n;if(void 0!==window.innerWidth)t.width=window.innerWidth,t.height=window.innerHeight;else{var e=l();t.width=e.clientWidth,t.height=e.clientHeight}return t},getPointInView:function(t){var e=t.originalEvent?t.originalEvent:t,n=e.type,r=null;if(-1!==m.indexOf(n)){var o=null,i=e.touches.length?e.touches:e.changedTouches;i&&i.length&&(o=i[0]),o&&((r=new a).x=o.pageX,r.y=o.pageY)}else-1!==d.indexOf(n)&&((r=new a).x=e.pageX,r.y=e.pageY);return r},compileController:function(t,e,n,r){(e=f(e)).html(n);var o=$compile(e.contents());if(r.controller){var i=t.$new();angular.extend(i,r);var a=$controller(r.controller,{$scope:i});r.controllerAs&&(t[r.controllerAs]=a),e.data("$ngControllerController",a),e.children().data("$ngControllerController",a),t=i}o(t)},downloadFile:function(t,r,e){e=e||"application/octet-stream";var o=null,n=new Blob([t],{type:e}),i=new window.FileReader;i.readAsDataURL(n),i.onloadend=function(){o=i.result,function(){if(document.createEvent){var t=document.createElement("a");if(t.href=o,void 0!==t.download){var e=r||o.substring(o.lastIndexOf("/")+1,o.length);t.download=e}var n=document.createEvent("MouseEvents");return n.initEvent("click",!0,!0),t.dispatchEvent(n)}window.open(-1<o.indexOf("?")?o:o+"?download","_self")}()}},ua:(t=window.navigator.userAgent.toLowerCase(),e=-1!==t.indexOf("safari")&&-1===t.indexOf("chrome"),r=-1!==t.indexOf("trident")||-1!==t.indexOf("edge")||-1!==t.indexOf("msie"),o=!e&&!r&&-1!==t.indexOf("chrome"),i=-1!==t.indexOf("mobile"),s=-1!==t.indexOf("macintosh"),u={agent:t,safari:e,msie:r,chrome:o,mobile:i,mac:s},angular.forEach(u,function(t,e){t&&angular.element(document.getElementsByTagName("body")).addClass(e)}),u)};function l(){return document.documentElement||document.body.parentNode||document.body}function f(t){return angular.isArray(t)?t:angular.element(t)}function h(t){return angular.isArray(t)?t[0]:t}angular.extend(this,c);var d=["click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],m=["touchstart","touchmove","touchend","touchcancel"]}])}(),function(){"use strict";var e=angular.module("artisan");e.factory("Event",["EventsService","Dom","Point","Rect",function(t,d,m,e){function n(t,e){try{var n=(t=t||window.event).type,r=t.originalEvent?t.originalEvent:t,o=e[0],i=d.getNodeOffset(o),a=d.getBoundRect(o),s=d.getView(),u=d.getPageScroll(),c=d.getPointInView(t);if(c){var l=new m(c.x-u.x,c.y-u.y),f=new m(l.x-a.left,l.y-a.top);this.point=c,this.absolute=l,this.relative=f}var h=d.getDelta(t);h&&(this.delta=h,this.dir=h.dir),this.event=t,this.type=n,this.originalEvent=r,this.element=e,this.node=o,this.offset=i,this.rect=a,this.view=s,this.scroll=u,this.timestamp=(new Date).getTime()}catch(t){console.log("Event.error",t)}}var r={stop:function(){this.event.stopPropagation(),this.event.preventDefault()}};return angular.extend(n,{}),angular.extend(n.prototype,r),n}]),e.factory("Events",["EventsService","Event","Dom",function(e,r,o){function n(t){var n=this;this.element=o.getElement(t),this.listeners={},this.standardEvents={click:{key:"click",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.click.apply(this,[e])}},down:{key:"mousedown",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.down.apply(this,[e]),n.removeTouchEvents()}},move:{key:"mousemove",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.move.apply(this,[e])}},up:{key:"mouseup",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.up.apply(this,[e])}},resize:{key:"resize",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.resize.apply(this,[e])}}},this.touchEvents={down:{key:"touchstart",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.down.apply(this,[e]),n.removeStandardEvents()}},move:{key:"touchmove",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.move.apply(this,[e])}},up:{key:"touchend",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.up.apply(this,[e])}}},this.wheelEvents={wheel:{key:"mousewheel",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.wheel.apply(this,[e]),n.removeScrollEvents()}}},this.scrollEvents={wheel:{key:"DOMMouseScroll",callback:function(t){var e=new r(t,n.element);n.setTimestamp(e),n.listeners.wheel.apply(this,[e]),n.removeWheelEvents()}}},this.timestamp=(new Date).getTime(),this.setTimestamp=function(t){t&&(t.interval=Math.min(250,t.timestamp-n.timestamp));n.timestamp=(new Date).getTime()}}var i={getTouch:function(e,n){var r=new Point;if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var o=null,i=e.originalEvent?e.originalEvent:e,a=i.touches.length?i.touches:i.changedTouches;a&&a.length&&(o=a[0]),o&&(r.x=o.pageX,r.y=o.pageY)}else"click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"contextmenu"!==e.type||(r.x=e.pageX,r.y=e.pageY);n&&(r.s=Point.difference(t,n));return r.type=e.type,r},getRelativeTouch:function(t,e){return t=angular.isArray(t)?t[0]:t,Point.difference(e,{x:t.offsetLeft,y:t.offsetTop})}},a={add:function(t,e){var r=this,o=this.standardEvents,i=this.touchEvents,a=this.wheelEvents,s=this.scrollEvents,u=this.element,c=angular.element(window);angular.forEach(t,function(t,e){if(r.listeners[e]){var n={};n[e]=r.listeners[e],l(n)}r.listeners[e]=t,o[e]&&("resize"===e?c.on(o[e].key,o[e].callback):u.on(o[e].key,o[e].callback)),i[e]&&u.on(i[e].key,i[e].callback),a[e]&&u.on(a[e].key,a[e].callback),s[e]&&u.on(s[e].key,s[e].callback)}),e&&e.$on("$destroy",function(){r.remove(t)});return r},remove:l,removeStandardEvents:function(){var t=this.standardEvents,e=(this.touchEvents,this.element);e.off("mousedown",t.down.callback),e.off("mousemove",t.move.callback),e.off("mouseup",t.up.callback)},removeTouchEvents:function(){this.standardEvents;var t=this.touchEvents,e=this.element;e.off("touchstart",t.down.callback),e.off("touchmove",t.move.callback),e.off("touchend",t.up.callback)},removeWheelEvents:function(){this.element.off("mousewheel",this.mouseEvents.wheel.callback)},removeScrollEvents:function(){this.element.off("DOMMouseScroll",this.scrollEvents.wheel.callback)}};return angular.extend(n,i),angular.extend(n.prototype,a),n;function l(t){var n=this,r=this.standardEvents,o=this.touchEvents,i=this.wheelEvents,a=this.scrollEvents,s=this.element,u=angular.element(window);return angular.forEach(t,function(t,e){r[e]&&("resize"===e?u.off(r[e].key,r[e].callback):s.off(r[e].key,r[e].callback)),o[e]&&s.off(o[e].key,o[e].callback),i[e]&&s.off(i[e].key,i[e].callback),a[e]&&s.off(a[e].key,a[e].callback),n.listeners[e]=null}),n}}]),e.service("EventsService",["Dom",function(e){var t={hasPassiveEvents:n,addEventListener:function(){if(!n())return;var i={passive:!1,capture:!1};var t=function(o){function t(t,e,n){if("object"!=typeof n){var r=!0===n;(n=angular.copy(i)).capture=r}else n=angular.extend(angular.copy(i),n);o.call(this,t,e,n)}return t}(EventTarget.prototype.addEventListener);return EventTarget.prototype.addEventListener=t}()};function n(){var t=!1;if(window.addEventListener)try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){console.log("getAddEventListener.isSupprted",t)}return t}angular.extend(this,t),function(){if(!e.ua.mac)return;(e.ua.chrome||e.ua.safari||e.ua.firefox)&&window.addEventListener("mousewheel",function(t){if(Math.abs(t.deltaY)>Math.abs(t.deltaX))return;(t.deltaX<0&&0===e.getParents(t.target).filter(function(t){return 0<t.scrollLeft}).length||0<t.deltaX&&0===e.getParents(t.target).filter(function(t){return t.scrollWidth-t.scrollLeft>t.clientWidth}).length)&&t.preventDefault()},{passive:!1})}()}])}(),function(){"use strict";var t=angular.module("artisan");t.filter("notIn",["$filter",function(e){return function(t,n,r){if(n)return e("filter")(t,function(t){for(var e=0;e<n.length;e++)if(n[e][r]===t[r])return!1;return!0})}}]),t.filter("autolink",[function(){return function(t){return Autolinker.link(t,{className:"a-link"})}}]),t.filter("shortName",["$filter",function(t){return function(t){if(!t)return"";t.indexOf(" .")===t.length-2&&(t=t.split(" .").join(""));var e=t.split(" "),n=e.shift();if(e.length){var r=e.join(" ");return n.substr(0,1).toUpperCase()+"."+r.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}return n}}]),t.filter("customCurrency",["$filter",function(t){var n=t("currency");return function(t,e){return n(t*e.ratio,e.formatting)}}]),t.filter("customSize",["APP",function(o){return function(t){if(o.unit===o.units.IMPERIAL){var e=Math.floor(t/12);return t%=12,(e?e+"' ":"")+(t=Math.round(10*t)/10)+"''"}var n=Math.floor(t*o.size.ratio),r=t*o.size.ratio*100%100;return(n?n+"m ":"")+(r=Math.round(10*r)/10)+"cm"}}]),t.filter("customWeight",["APP",function(o){return function(t){if(o.unit===o.units.IMPERIAL){if(t<1){var e=16*t;return(e=Math.round(10*e)/10)?e+"oz ":""}return(t=Math.round(100*t)/100)?t+"lb ":""}var n=Math.floor(t*o.weight.ratio/1e3),r=t*o.weight.ratio%1e3;return(n?n+"kg ":"")+(r=Math.round(10*r)/10)+"g"}}]),t.filter("customNumber",["$filter",function(r){return function(t,e,n){return n=n||"",t=void 0!==t?(Math.floor(t)===t&&(e=0),r("number")(t,e)+n):"-"}}]),t.filter("reportNumber",["$filter",function(r){return function(t,e,n){return n=n||"",t=void 0!==t?r("number")(t,e)+n:"-"}}]),t.filter("customHours",[function(){return function(t){if(void 0===t)return"-";var e=Math.floor(t),n=Math.floor(60*(t-e)),r=e?e+" H":"";return r+=n?" "+n+" m":""}}]),t.filter("customTimer",[function(){return function(t){if(void 0===t)return"-";var e=Math.floor(t/36e5),n=Math.floor((t-36e5*e)/6e4),r=Math.floor((t-36e5*e-6e4*n)/1e3),o=e?e+" H":"";return o+=n?" "+n+" m":"",o+=r?" "+r+" s":""}}]),t.filter("customDigitalTimer",[function(){return function(t){if(void 0===t)return"-";var e=Math.floor(t/36e5),n=Math.floor((t-36e5*e)/6e4),r=Math.floor((t-36e5*e-6e4*n)/1e3);return(e<10?"0":"")+e+":"+(n<10?"0":"")+n+":"+(r<10?"0":"")+r}}]),t.filter("customDigitalTime",[function(){return function(t){if(void 0===t)return"-";var e=Math.floor(t/36e5),n=Math.floor((t-36e5*e)/6e4);return(e<10?"0":"")+e+":"+(n<10?"0":"")+n}}]),t.filter("customDate",["$filter",function(t){var r=t("date");return function(t,e,n){return t?r(t,e,n):"-"}}]),t.filter("customTime",["$filter",function(t){return function(t,e){return t?Utils.parseTime(t):e||"-"}}]),t.filter("customDigital",["$filter",function(t){return function(t,e){return t?Utils.parseHour(t):e||"-"}}]),t.filter("customString",["$filter",function(t){return function(t,e){return t||(e||"-")}}]),t.filter("customEnum",function(){return function(t){return(t+=1)<10?"0"+t:t}}),t.filter("groupBy",["$parse","filterWatcher",function(a,s){return function(t,e){return!angular.isObject(t)||angular.isUndefined(e)?t:s.isMemoized("groupBy",arguments)||s.memoize("groupBy",arguments,this,(n=t,r=a(e),i={},angular.forEach(n,function(t){o=r(t),i[o]||(i[o]=[]),i[o].push(t)}),i));var n,r,o,i}}]),t.filter("htmlToPlaintext",function(){function s(t){var e,n,r="";if(t.nodeType==document.TEXT_NODE)r=(r=(r=t.nodeValue)?String(r).replace(/</gm,"&lt;"):"")?String(r).replace(/>/gm,"&gt;"):"";else if(t.nodeType==document.ELEMENT_NODE){for(var o=0,i=t.childNodes.length;o<i;o++)r+=s(t.childNodes[o]);var a=(n="display",(e=t).currentStyle?e.currentStyle[n]:window.getComputedStyle(e,null).getPropertyValue(n));(a.match(/^block/)||a.match(/list/)||a.match(/row/)||"BR"==t.tagName||"HR"==t.tagName)&&(r+="\n<br>")}return r}return function(t){console.log(t);var e=document.createElement("div");return e.innerHTML=t,s(e)}})}(),function(){"use strict";angular.module("artisan").factory("Point",[function(){function n(t,e){this.x=t||0,this.y=e||0}var t={difference:r,multiply:o},e={clone:function(){return new n(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},difference:function(t){return r(this,t)},mult:function(t){return o(this,t)},offset:function(t,e){return this.x+=t,this.y+=e,this},setPos:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},toString:function(){return"{"+this.x+","+this.y+"}"}};return angular.extend(n,t),angular.extend(n.prototype,e),n;function r(t,e){return new n(t.x-e.x,t.y-e.y)}function o(t,e){return t.x*=e,t.y*=e,t}}])}(),function(){"use strict";angular.module("artisan").factory("Rect",[function(){function t(t,e,n,r){this.x=t||0,this.y=e||0,this.w=n||0,this.h=r||0}var e={mult:r},n={bottom:function(){var t=this.x,e=this.y,n=this.w,r=this.h;return{x:t+n/2,y:e+r}},bottomLeft:function(){var t=this.x,e=this.y,n=(this.w,this.h);return{x:t,y:e+n}},bottomRight:function(){var t=this.x,e=this.y,n=this.w,r=this.h;return{x:t+n,y:e+r}},center:function(){var t=this.x,e=this.y,n=this.w,r=this.h;return{x:t+n/2,y:e+r/2}},clone:function(){return new t(this.x,this.y,this.w,this.h)},copy:function(t){return this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this},expand:function(t){return this.expandRect({x:t,y:t,w:2*t,h:2*t})},expandRect:function(t){return this.x-=t.x||0,this.y-=t.y||0,this.w+=t.w||0,this.h+=t.h||0,this},intersect:function(t){var e=this.x,n=this.y,r=this.w,o=this.h;return!(t.x>e+r||t.x+t.w<e||t.y>n+o||t.y+t.h<n)},left:function(){var t=this.x,e=this.y,n=(this.w,this.h);return{x:t,y:e+n/2}},mult:function(t){return r(this,t)},offset:function(t,e){return this.x+=t,this.y+=e,this},reduce:function(t){return this.offset(-t)},reduceRect:function(t){return this.offsetRect(r(t,-1))},right:function(){var t=this.x,e=this.y,n=this.w,r=this.h;return{x:t+n,y:e+r/2}},setH:function(t){return this.h=t,this},setPos:function(t,e){return this.x=t,this.y=e,this},setSize:function(t,e){return this.w=t,this.h=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setW:function(t){return this.w=t,this},top:function(){var t=this.x,e=this.y,n=this.w;this.h;return{x:t+n/2,y:e}},topLeft:function(){var t=this.x,e=this.y;this.w,this.h;return{x:t,y:e}},topRight:function(){var t=this.x,e=this.y,n=this.w;this.h;return{x:t+n,y:e}},toString:function(){return"{"+this.x+","+this.y+","+this.w+","+this.h+"}"}};return angular.extend(t,e),angular.extend(t.prototype,n),t;function r(t,e){return t.x*=e,t.y*=e,t.w*=e,t.h*=e,t}}])}(),function(){"use strict";angular.module("artisan").factory("Vector",function(){function n(t,e){this.x=t||0,this.y=e||0}var t={cross:r,difference:o,distance:i,incidence:a,make:function(t,e){return new n(e.x-t.x,e.y-t.y)},normalize:s,power:function(t,e){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return(n+r)/2},size:u},e={add:function(t){return this.x+=t.x,this.y+=t.y,this},copy:function(t){return new n(this.x,this.y)},cross:function(t){return r(this,t)},difference:function(t){return o(this,t)},distance:function(t){return i(this,t)},friction:function(t){return this.x*=t,this.y*=t,this},incidence:function(t){return a(this,t)},normalize:function(){return s(this)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},size:function(){return u(this)},towards:function(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},toString:function(){return"{"+this.x+","+this.y+"}"}};return angular.extend(n,t),angular.extend(n.prototype,e),n;function r(t,e){return t.x*e.y-t.y*e.x}function o(t,e){return new n(t.x-e.x,t.y-e.y)}function i(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function a(t,e){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function s(t){var e=n.size(t);return t.x/=e,t.y/=e,t}function u(t){return Math.sqrt(t.x*t.x+t.y*t.y)}})}(),function(){"use strict";angular.module("artisan").factory("Hash",[function(){var e={};function t(t,e){t=t||"id",e=e?o(e):{},Object.defineProperties(this,{key:{value:t,enumerable:!1,writable:!1},pool:{value:e,enumerable:!1,writable:!1},length:{value:0,enumerable:!1,writable:!0}})}var n={has:function(t){return void 0!==this.pool[t]},get:function(t){return this.pool[t]},getItem:function(t){var e=this.key;return t?this.get(t[e]):null},set:function(t){var e=this.pool,n=this.key;return e[t[n]]=t,this.push(t),t},add:function(t){var e=this.getItem(t);if(e)for(var n,r=0,o=Object.keys(t);r<o.length;r++)n=o[r],e[n]=t[n];else e=this.set(t);return e},once:function(t,e){var n=this.getItem(t);n||(n=this.set(t));"function"==typeof e&&e(n);return n},remove:function(t){var e=this.pool,n=this.key,r=this.getItem(t);if(r){var o=this.indexOf(r);-1!==o&&this.splice(o,1),delete e[r[n]]}return this},each:function(t){if(t)for(var e=0;e<this.length;)t(this[e],e),e++;return this},addMany:function(t){if(!t)return this;var e=0;for(;e<t.length;)this.add(t[e]),e++;return this},removeMany:function(t){if(!t)return this;var e=0;for(;e<t.length;)this.remove(t[e]),e++;return this},removeAll:function(){var t,e=this,n=e.key,r=e.pool;e.length;for(;e.length;)t=e.shift(),delete r[t[n]],0;return e},forward:function(r,o){var r=r||this.key;return this.sort(function(t,e){var n=o?t:e;return(o?e:t)[r]-n[r]}),this},backward:function(t){return this.forward(t,!0)},differs:function(t){{if(t.key!==this.key||t.length!==this.length)return!0;for(var e=!1,n=0,r=this.length,o=this.key;e&&n<r;)e=this[n][o]!==t[n][o],n++}},updatePool:function(){var e=this.pool,n=this.key;Object.keys(e).forEach(function(t){delete e[t]}),angular.forEach(this,function(t){e[t[n]]=t})}},r={get:o};return t.prototype=new Array,angular.extend(t.prototype,n),angular.extend(t,r),t;function o(t){return e[t]=e[t]||{}}}])}(),function(){"use strict";angular.module("artisan").factory("$promise",["$q",function(n){function t(t){if("function"!=typeof t)throw"promise resolve callback missing";var e=n.defer();return t(e),e.promise}var e={all:function(t){return n.all(t)}};return angular.extend(t,e),angular.extend(t.prototype,{}),t}])}(),function(){"use strict";angular.module("artisan").factory("State",["$timeout","$rootScope",function(n,t){function e(){this.idle()}var r={busy:function(){var t=this;return!t.isBusy&&(t.isBusy=!0,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.errors=[],!0)},classes:function(t){var e=this,n=null;n={ready:e.isReady,busy:e.isBusy,successing:e.isSuccessing,success:e.isSuccess,errorring:e.isErroring,error:e.isError},t&&angular.forEach(t,function(t,e){n[t]=n[e]});return n},enabled:function(){return!this.isBusy&&!this.isErroring&&!this.isSuccessing},error:function(t){console.log("State.error",t);var e=this;e.isBusy=!1,e.isError=!0,e.isErroring=!0,e.isSuccess=!1,e.isSuccessing=!1,e.errors.push(t),n(function(){e.isErroring=!1},2e3)},errorMessage:function(){return this.isError?this.errors[this.errors.length-1]:null},errors:[],idle:function(){var t=this;t.isBusy=!1,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.button=null,t.errors=[]},labels:function(t){var e={ready:"submit",busy:"sending",error:"error",success:"success"};t&&angular.extend(e,t);var n=e.ready;this.isBusy?n=e.busy:this.isSuccess?n=e.success:this.isError&&(n=e.error);return n},ready:function(){this.idle(),this.isReady=!0,t.$broadcast("$stateReady",this)},submitClass:function(){var t=this;return{busy:t.isBusy,ready:t.isReady,successing:t.isSuccessing,success:t.isSuccess,errorring:t.isErroring,error:t.isError}},success:function(){var t=this;t.isBusy=!1,t.isError=!1,t.isErroring=!1,t.isSuccess=!0,t.isSuccessing=!0,t.errors=[],n(function(){t.isSuccessing=!1},2e3)}};return angular.extend(e,{}),angular.extend(e.prototype,r),e}])}(),function(){"use strict";var n=function(){var n="transform",r=document.createElement("DIV");void 0!==r.style[n]?["webkit","moz","o","ms"].every(function(t){var e="-"+t+"-transform";return void 0===r.style[e]||(n=e,!1)}):n=void 0!==r.style.webkitTransform?"-webkit-transform":void 0;return n}();angular.module("artisan").factory("Style",[function(){function t(){this.props={scale:1,hoverScale:1,currentScale:1}}var e={set:function(t){var e=[];for(var n in this)"props"!==n&&e.push(n+":"+this[n]);t.style.cssText=e.join(";")+";"},transform:function(t){this[n]=t},transformOrigin:function(t,e){this[n+"-origin-x"]=Math.round(1e3*t)/1e3+"%",this[n+"-origin-y"]=Math.round(1e3*e)/1e3+"%"}};return angular.extend(t,{}),angular.extend(t.prototype,e),t}])}(),function(){"use strict";angular.module("artisan").service("Utils",["$compile","$controller","Vector",function(s,u,t){var e={compileController:function(t,e,n,r){e.html(n);var o=s(e.contents());if(r.controller){var i=t.$new();angular.extend(i,r);var a=u(r.controller,{$scope:i});r.controllerAs&&(t[r.controllerAs]=a),e.data("$ngControllerController",a),e.children().data("$ngControllerController",a),t=i}o(t)},extract:function(t,e){return Object.keys(t)[Object.values(t).indexOf(e)]},format:function(t,n,r){n=n||"";var e=(t=t||"").split(",");{if(1<e.length){var o=e.shift();return angular.forEach(e,function(t,e){o=r?o.split("{"+e+"}").join("' + "+n+t+" + '"):o.split("{"+e+"}").join(n+t)}),r?"'"+o+"'":o}return n+t}},indexOf:function(t,e,n){n=n||"id";var r=-1;if(t)for(var o=0,i=t.length;o<i;){if(t[o]&&t[o][n]===e[n]){r=o;break}o++}return r},reducer:function(t,e){return t[e]},reducerAdder:function t(e,n,r){return"string"==typeof n?t(e,n.split("."),r):1==n.length&&void 0!==r?e[n[0]]+=r:0===n.length?e:t(e[n[0]],n.slice(1),r)},reducerSetter:function t(e,n,r){return"string"==typeof n?t(e,n.split("."),r):1==n.length&&void 0!==r?e[n[0]]=r:0===n.length?e:t(e[n[0]],n.slice(1),r)},removeValue:function(t,e){var n=-1;if(t)for(var r=0,o=t.length;r<o;){if(t[r]===e){n=r;break}r++}return-1!==n?(t.splice(n,1),e):null},reverseSortOn:function(n){return function(t,e){return t[n]<e[n]?1:t[n]>e[n]?-1:0}},throttle:function(n,r,o){var i,a,s,u=null,c=0;o||(o={});var l=function(){c=!1===o.leading?0:f(),u=null,s=n.apply(i,a),u||(i=a=null)};return function(){var t=f();c||!1!==o.leading||(c=t);var e=r-(t-c);return i=this,a=arguments,e<=0||r<e?(u&&(clearTimeout(u),u=null),c=t,s=n.apply(i,a),u||(i=a=null)):u||!1===o.trailing||(u=setTimeout(l,e)),s}},toMd5:function(t){},where:function(t,e){var o=null;t&&angular.forEach(t,function(n){var r=!0;angular.forEach(e,function(t,e){r=r&&n[e]===t}),r&&(o=n)});return o}};angular.extend(this,e);var f=Date.now||function(){return(new Date).getTime()}}]),"function"!=typeof Array.prototype.reduce&&Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,o=0;if(2==arguments.length)e=arguments[1];else{for(;o<r&&!(o in n);)o++;if(r<=o)throw new TypeError("Reduce of empty array with no initial value");e=n[o++]}for(;o<r;)o in n&&(e=t(e,n[o],o,n)),o++;return e}}),"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(t){var e=[];for(var n in t)has(t,n)&&isEnumerable(t,n)&&e.push(t[n]);return e}})}(),function(){"use strict";angular.module("artisan").provider("environment",["$locationProvider","$httpProvider",function(t,e){var n={add:function(t,e){i[t]=i[t]?angular.merge(i[t],e):e,function(){a=angular.copy(r),i.environment&&angular.merge(a,i.environment);var t=function(){for(var t in i){var e=i[t];if(e.paths&&-1!==window.location.href.indexOf(e.paths.app))return e}}();t&&angular.merge(a,t);angular.merge(a,o),s(),u()}()},use:function(t){i[t]&&(a=angular.copy(r),angular.merge(a,i[t]),angular.merge(a,o),s(),u())}};angular.extend(this,n);var r={plugins:{facebook:{fields:"id,name,first_name,last_name,email,gender,picture,cover,link",scope:"public_profile, email",version:"v2.10"},google:{},googlemaps:{clusterer:!0,styles:"/googlemaps/applemapesque.json",options:{center:{lat:43.9023386,lng:12.8505094},disableDefaultUI:!0,mapTypeId:"roadmap",scrollwheel:!0,zoom:4}},mapbox:{clusterer:!0,options:{bearing:0,center:[12.8505094,43.9023386],curve:1,pitch:0,speed:1.5,zoom:4},version:"v0.42.0"}},http:{interceptors:[],withCredentials:!1},language:{code:"en",culture:"en_US",iso:"ENU",name:"English"},location:{hash:"!",html5:!1},paths:{}},o={};window.environment&&angular.merge(o,window.environment);var i={},a=angular.copy(r);function s(){e.defaults.headers.common["Accept-Language"]=a.language.code,e.defaults.withCredentials=a.http.withCredentials,e.interceptors.push.apply(e.interceptors,a.http.interceptors)}function u(){t.html5Mode(a.location.html5),t.hashPrefix(a.location.hash)}angular.merge(a,o),this.$get=function(){return a}}])}(),function(){"use strict";angular.module("artisan").factory("Doc",["Api","$promise",function(t,e){function n(t){t&&angular.extend(this,t)}return angular.extend(n,{}),angular.extend(n.prototype,{}),n}])}(),function(){"use strict";angular.module("artisan").factory("Route",["$promise","$location","$route","$routeParams","Router",function(t,n,e,r,o){function i(t){var e={controller:t.$$route.controller,params:t.params,path:n.path(),pathParams:t.pathParams,originalPath:t.$$route.originalPath,templateUrl:t.loadedTemplateUrl};angular.extend(this,e)}var a={current:function(){return new i(e.current)}};return angular.extend(i,a),angular.extend(i.prototype,{}),i}])}(),function(){"use strict";angular.module("artisan").factory("View",["Api","$promise","environment","Doc","Route",function(e,t,r,i,n){function a(t,e){var n={doc:t,environment:r,route:e};angular.extend(this,n)}var o={current:function(){return t(function(r){var o=n.current(),t=o.path;console.log("ViewCurrent",t),e.docs.path(t).then(function(t){var e=new i(t),n=new a(e,o);r.resolve(n)},function(t){r.reject(t)})})}};return angular.extend(a,o),angular.extend(a.prototype,{}),a}])}(),function(){"use strict";angular.module("artisan").service("AuthService",["$q","$rootScope","$location","LocalStorage","environment",function(o,i,a,s,t){var e={isAuthorizedOrGoTo:function(t){var e=o.defer(),n=s.get("authorization");n&&n.created_at+n.expires_in<(new Date).getTime()?e.resolve(n):(e.reject({status:"unauthorized"}),a.path(t));return e.promise},isAuthorized:function(){var t=s.get("authorization");return t&&t.created_at+t.expires_in<(new Date).getTime()},request:function(t){var e=s.get("authorization");e&&e.created_at+e.expires_in<(new Date).getTime()&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+e.access_token);return t},response:function(t){return t||o.when(t)},responseError:function(t){switch(console.log("AuthService.responseError",t),t.status){case 400:var e=[];if(t.data)for(var n in e.push(t.data.Message),t.data.ModelState)for(var r=0;r<t.data.ModelState[n].length;r++)e.push(t.data.ModelState[n][r]);else e.push("Server error");t.Message=e.join(" "),i.httpError=t,i.$broadcast("onHttpInterceptorError",t);break;case 404:t.Message="Not found",i.httpError=t,i.$broadcast("onHttpInterceptorError",t);break;case 500:i.httpError=t,i.$broadcast("onHttpInterceptorError",t);break;case 401:s.delete("authorization"),s.delete("user"),a.path("/signin");break;case-1:window.open(t.config.path,"_blank")}return o.reject(t)},signOut:function(){s.delete("authorization"),s.delete("user"),s.delete("CampagnoloToken"),s.delete("GoogleToken"),s.delete("StravaToken"),s.delete("FacebookToken"),s.delete("GarminToken")}};angular.extend(this,e),console.log(t.plugins)}])}(),function(){"use strict";angular.module("artisan").service("Bearer",["$http","$promise","SessionStorage","LocalStorage","environment",function(r,t,o,i,e){var n={delete:function(t,e){o.delete("accessToken"),i.delete("accessToken"),delete r.defaults.headers.common.Authorization},exist:function(t,e){return o.exist("accessToken")||i.exist("accessToken")},get:function(t,e){var t=null;o.exist("accessToken")?a(t=o.get("accessToken")):i.exist("accessToken")&&a(t=i.get("accessToken"));return t},set:a};function a(t,e){var n="Bearer "+t;return delete r.defaults.headers.common.Authorization,r.defaults.headers.common.Authorization=n,o.set("accessToken",t),e&&i.set("accessToken",t),n}angular.extend(this,n)}])}(),function(){"use strict";angular.module("artisan").service("Http",["$http","$promise","$timeout","environment",function(o,r,i,e){var t={get:function(t){return a("get",n(t))},post:function(t,e){return a("post",n(t),e)},put:function(t,e){return a("put",n(t),e)},patch:function(t,e){return a("patch",n(t),e)},delete:function(t){return a("delete",n(t))},static:function(t){return a("get",t)},fake:function(e,n){return n=n||1e3,r(function(t){i(function(){t.resolve({data:e})},n)})}};function n(t){return e.paths.api+t}function a(t,e,n){return r(function(r){o[t](e,n).then(function(t){r.resolve(t.data)},function(t,e){var n=t&&t.data?t.data:{};n.status=t.status,r.reject(n)})})}angular.extend(this,t)}])}(),function(){"use strict";angular.module("artisan").factory("Preload",["$promise",function(s){function u(t){this.path=t,this.loaded=0,this.total=0,this.progress=0}var t={all:function(i,a){return s(function(e){var n=i.map(function(t){return new u(t)}),r={loaded:0,total:0,progress:0,preloads:n},t=setInterval(o,100);function o(){r.loaded=0,r.total=0,angular.forEach(n,function(t){r.loaded+=t.loaded,r.total+=t.total});var t=r.total?r.loaded/r.total:0;t>r.progress&&(r.progress=t,a&&a(r))}s.all(n.map(function(t){return t.start()})).then(function(){clearInterval(t),o(),e.resolve(n.slice())},function(t){e.reject(t)})})}},e={start:function(){var n=this;return s(function(e){var t=new XMLHttpRequest;t.open("GET",n.path,!0),t.responseType="arraybuffer",t.onloadstart=function(t){},t.onprogress=function(t){n.loaded=t.loaded,n.total=t.total,n.progress=t.total?t.loaded/t.total:0},t.onloadend=function(t){n.loaded=n.total,n.progress=1},t.onload=function(){n.buffer=t.response,e.resolve(n)},t.onerror=function(t){console.log("Preload.xhr.onerror",t),n.loaded=n.total,n.progress=1,e.reject(t)},t.send(),n.xhr=t})},image:function(){var t=new Blob([this.buffer]),e=new Image;return e.src=window.URL.createObjectURL(t),e}};return angular.extend(u,t),angular.extend(u.prototype,e),u}])}(),function(){"use strict";angular.module("artisan").service("$once",["$promise",function(t){var e={load:function(t,e){{if(t.indexOf(".js"))return n(t,e);if(t.indexOf(".css"))return r(t)}},script:n,link:r};angular.extend(this,e);var s={},u=0;function n(i,a){return t(function(e){try{var t=s[i]=s[i]||++u;if(t="OnceScript"+t,document.getElementById(t))e.reject();else{var n=document.getElementsByTagName("script"),r=n[n.length-1],o=document.createElement("script");o.id=t,a?(!0===a&&(a=t,i=i.split("{{callback}}").join(a)),window[a]=function(t){e.resolve(t)}):o.addEventListener("load",e.resolve),o.addEventListener("error",e.reject),o.src=i,r.parentNode.insertBefore(o,r.nextSibling)}}catch(t){e.reject(t)}})}function r(i){return t(function(e){try{var t=s[i]=s[i]||++u;if(t="OnceStyle"+t,document.getElementById(t))e.resolve();else{var n=document.getElementsByTagName("link"),r=n[n.length-1],o=document.createElement("link");o.id=t,o.rel="stylesheet",o.href=i,o.addEventListener("load",e.resolve),o.addEventListener("error",e.reject),r.parentNode.insertBefore(o,r.nextSibling)}}catch(t){e.reject(t)}})}}])}(),function(){"use strict";angular.module("artisan").service("Router",["$rootScope","$location","$route","$timeout",function(t,n,e,r){var o,i,a,s,u=this,c={isController:function(t){return s===t},redirect:function(t,e){e?r(function(){f(t)},e):f(t)},path:function(t,e){e?r(function(){h(t)},e):h(t)},apply:function(t,e){e?r(function(){n.path(t)},e):r(function(){n.path(t)})}};function l(){o?o.controller:null,s=i?i.controller:null,a?a.controller:null}function f(t){n.$$lastRequestedPath=n.path(),n.path(t)}function h(t){t=n.$$lastRequestedPath||t,n.$$lastRequestedPath=null,n.path(t)}angular.extend(u,c),t.$on("$routeChangeStart",function(t,e,n){o=null,i=n?n.$$route:null,a=e?e.$$route:null,l(),u.loading=!0}),t.$on("$routeChangeSuccess",function(t,e,n){o=n?n.$$route:null,i=e?e.$$route:null,a=null,l()}),t.$on("$routeChangeError",function(t,e,n,r){o=null,i=n.$$route||null,a=null,l()}),t.$on("$routeUpdate",function(t,e){o=e?e.$$route:null,i=e?e.$$route:null,a=null,l()}),t.$on("$stateReady",function(t,e){r(function(){u.loading=!1},1e3)})}])}(),function(){"use strict";angular.module("artisan").service("Silent",["$rootScope","$location",function(e,r){var o,t={silent:function(t,e){var n=r.url(t);e&&n.replace();o=r.path()},path:function(t){return r.path(t)}};angular.extend(this,t),e.$$listeners.$locationChangeSuccess.unshift(function(t){o===r.path()&&(n=e.$$listeners.$locationChangeSuccess,angular.forEach(n,function(t,e){t!==listener&&(n[e]=function(){n[e]=t})}));var n;o=null})}])}(),function(){"use strict";var t=angular.module("artisan");t.service("Cookie",["$promise",function(t){var e={TIMEOUT:3e5,delete:function(t){i(t,"",-1)},exist:function(t){return-1!==document.cookie.indexOf(";"+t+"=")||0===document.cookie.indexOf(t+"=")},get:s,on:function(a){return t(function(n){var r=1e3,o=0,i=Cookie.TIMEOUT;!function t(){if(i<o)n.reject("timeout");else{var e=s(a);e?n.resolve(e):(o+=r,setTimeout(t,r))}}()})},set:function(e,n,t){try{var r=[],o=JSON.stringify(n,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,i(e,btoa(encodeURIComponent(o)),t)}catch(t){console.log("CookieSet.error serializing",e,n,t)}}};function s(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e)){var i=o.substring(e.length,o.length),a=null;try{a=JSON.parse(decodeURIComponent(atob(i)))}catch(t){console.log("Cookie.get.error parsing",key,t)}return a}}return null}function i(t,e,n){var r;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toGMTString()}else r="";document.cookie=t+"="+e+r+"; path=/"}angular.extend(this,e)}]),t.service("LocalStorage",["$promise","Cookie",function(t,e){var n={TIMEOUT:3e5,delete:function(t){window.localStorage.removeItem(t)},exist:function(t){return void 0!==window.localStorage[t]},get:function(e){var t=null;if(void 0!==window.localStorage[e])try{t=JSON.parse(window.localStorage[e])}catch(t){console.log("LocalStorage.get.error parsing",e,t)}return t},on:function(o){return t(function(n){var r,t=e.TIMEOUT;angular.element(window).on("storage",function(t){r&&clearTimeout(r);if(t.originalEvent.key==o)try{var e=JSON.parse(t.originalEvent.newValue);n.resolve(e)}catch(t){console.log("LocalStorage.on.error parsing",o,t),n.reject("error parsing "+o)}}),r=setTimeout(function(){n.reject("timeout")},t)})},set:function(e,n){try{var r=[],t=JSON.stringify(n,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,window.localStorage.setItem(e,t)}catch(t){console.log("LocalStorage.set.error serializing",e,n,t)}}},r=function(){var e=!1;try{(e="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}();r?angular.extend(this,n):angular.extend(this,e),this.supported=r}]),t.service("SessionStorage",["$promise","Cookie",function(t,e){var n={TIMEOUT:3e5,delete:function(t){window.sessionStorage.removeItem(t)},exist:function(t){return void 0!==window.sessionStorage[t]},get:function(e){var t=null;if(void 0!==window.sessionStorage[e])try{t=JSON.parse(window.sessionStorage[e])}catch(t){console.log("SessionStorage.get.error parsing",e,t)}return t},on:function(o){return t(function(n){var r,t=e.TIMEOUT;angular.element(window).on("storage",function(t){r&&clearTimeout(r);if(t.originalEvent.key===o)try{var e=JSON.parse(t.originalEvent.newValue);n.resolve(e)}catch(t){console.log("SessionStorage.on.error parsing",o,t),n.reject("error parsing "+o)}}),r=setTimeout(function(){n.reject("timeout")},t)})},set:function(e,n){try{var r=[],t=JSON.stringify(n,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,window.sessionStorage.setItem(e,t)}catch(t){console.log("SessionStorage.set.error serializing",e,n,t)}}},r=function(){var e=!1;try{(e="sessionStorage"in window&&void 0!==window.sessionStorage)?(window.sessionStorage.setItem("test","1"),window.sessionStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}();r?angular.extend(this,n):angular.extend(this,e),this.supported=r}])}(),function(){"use strict";angular.module("artisan").service("Trust",["$sce",function(e){var t={html:function(t){return n(t,function(){return e.trustAsHtml(t)})},resource:function(t){return n(t,function(){return e.trustAsResourceUrl(t)})},url:function(t){return n(t,function(){return"url('"+t+"')"})}};angular.extend(this,t);var s=[],u=[];function n(t,e){var n,r,o,i,a=(n=t,-1!==(r=s.indexOf(n))?u[r]:null);return a||(a=e(),o=t,i=a,s.push(o),s.push(i)),a}}])}();
//# sourceMappingURL=artisan.min.js.map
