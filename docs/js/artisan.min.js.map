{"version":3,"sources":["docs/js/artisan.js"],"names":["angular","module","directive","$parse","$templateRequest","$compile","$controller","Dom","restrict","priority","link","scope","element","attributes","model","modal","modalView","templateUrl","then","html","data","contents","controller","$scope","$new","extend","controllerAs","children","compileController","provider","tp","modals","routes","this","when","path","$get","$q","$timeout","closeModal","index","forEach","m","i","active","cancel","length","splice","addModal","params","deferred","defer","title","current","back","resolve","reject","push","promise","app","Nav","template","items","$watch","value","isArray","onPath","$parent","onNav","nav","setItems","item","Events","output","navItem","querySelector","itemClose","immediate","state","$nav","opened","opening","closing","closed","o","itemToggle","parent","preventDefault","e","stop","add","down","trigger","resolved","rejected","click","console","log","navTo","callback","factory","Silent","options","setNav","statics","silent","publics","addItem","addItems","itemOrItems","getPath","setNavs","level","x","prototype","Animate","key","ticks","pause","window","cancelAnimationFrame","play","animate","loop","time","requestAnimationFrame","toggle","lastTime","vendors","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","service","MINUTE","QUARTER","HOUR","DAY","WEEK","FIRSTDAYOFWEEK","today","getFullDate","getIndexLeft","getIndexRight","getDayLeft","date","diff","size","step","c","components","dd","floor","dayLeft","yyyy","MM","HH","mm","ss","sss","getDayRight","dayRight","getMonthLeft","monthLeft","getMonthRight","monthRight","getWeekLeft","weekLeft","getWeekRight","weekRight","getYearLeft","getYearRight","yearRight","dateToKey","dayDiff","getDate","getDay","getFullDay","getWeek","getDayByKey","keyToDate","getDayByDate","hourToTime","hour","monthDiff","weekDiff","yearDiff","yearLeft","timeToHour","timeToQuarterHour","SECOND","datetime","getFullYear","getMonth","ee","getHours","getMinutes","getSeconds","getMilliseconds","offset","getTimezoneOffset","valueOf","day","wKey","mKey","ww","setTime","getWeekDay","offsetDays","now","first","num","week","filter","DateTime","formats","long","RANGE","YEAR","SEMESTER","TRIMESTER","MONTH","short","constant","$filter","RangeTypes","Range","from","type","setDiff","setYear","to","setSemester","setMonth","setTrimester","setQuarter","setWeek","setDay","setKey","prev","next","getDiff","setDate","getParams","dateFrom","dateTo","setFullYear","range","set","filters","source","setDates","is","flag","isInside","isOutside","isCurrent","isBefore","isAfter","equals","r","eachDay","fromKey","toKey","totalDays","getName","RangeExtract","RangeFormat","getShortName","toString","copy","RangeCopy","expand","setHours","addYear","years","types","Year","Semester","Trimester","Quarter","Month","Week","Day","$range","format","name","replace","replaced","token","j","a","split","p","shift","f","join","indexOf","pop","obj","Object","keys","values","defineProperty","vals","has","isEnumerable","just_now","seconds_ago","a_minute_ago","minutes_ago","an_hour_ago","hours_ago","a_day_ago","days_ago","a_week_ago","weeks_ago","a_month_ago","months_ago","a_year_ago","years_ago","over_a_year_ago","seconds_from_now","a_minute_from_now","minutes_from_now","an_hour_from_now","hours_from_now","a_day_from_now","days_from_now","a_week_from_now","weeks_from_now","a_month_from_now","months_from_now","a_year_from_now","years_from_now","over_a_year_from_now","$rootScope","$interval","$injector","$formats","month","$format","get","instant","getDelta","round","abs","delta","suffix","minute","dateRelative","relative","innerHTML","setInterval","$on","cancelInterval","Point","Rect","agent","safari","msie","chrome","mobile","mac","ua","getBoundRect","node","getNode","getDocumentNode","getBoundingClientRect","getClosest","selector","matchesFn","some","fn","document","body","parentElement","getClosestNode","target","event","original","originalEvent","deltaX","wheelDeltaX","deltaY","wheelDeltaY","dir","getElement","getNodeOffset","nodeType","offsetLeft","y","offsetTop","getPageScroll","scroll","documentNode","pageXOffset","scrollLeft","pageYOffset","scrollTop","getParents","topParentNode","parents","parentNode","each","getView","view","undefined","innerWidth","width","height","innerHeight","clientWidth","clientHeight","getPointInView","point","TOUCH_EVENTS","touch","touches","changedTouches","pageX","pageY","MOUSE_EVENTS","downloadFile","content","base64","blob","Blob","reader","FileReader","readAsDataURL","onloadend","result","createEvent","anchor","createElement","href","download","downloadName","substring","lastIndexOf","initEvent","dispatchEvent","open","navigator","userAgent","toLowerCase","getElementsByTagName","addClass","documentElement","EventsService","Event","rect","absolute","left","top","timestamp","error","stopPropagation","events","listeners","standardEvents","setTimestamp","apply","removeTouchEvents","move","up","resize","touchEvents","removeStandardEvents","wheelEvents","wheel","removeScrollEvents","scrollEvents","removeWheelEvents","interval","min","getTouch","previous","s","difference","t","getRelativeTouch","standard","windowElement","listener","remove","on","off","mouseEvents","hasPassiveEvents","addEventListener","defaults","passive","capture","modified","call","getModifiedAddEventListener","EventTarget","getAddEventListener","supported","firefox","scrollWidth","preventHistoryNavigation","array","Autolinker","className","splitted","firstName","lastName","substr","toUpperCase","txt","charAt","legacyFilter","cost","currency","ratio","formatting","APP","inches","unit","units","IMPERIAL","feet","meters","cm","pounds","oz","kg","weight","grams","precision","hours","minutes","label","second","seconds","timezone","placeholder","Utils","parseTime","parseHour","val","filterWatcher","collection","property","isObject","isUndefined","isMemoized","arguments","memoize","getter","dict","toText","n","TEXT_NODE","nodeValue","String","ELEMENT_NODE","childNodes","display","currentStyle","getComputedStyle","getPropertyValue","match","tagName","div","PointDifference","multiply","PointMultiply","clone","b","mult","setPos","setX","setY","w","h","RectMultiply","bottom","bottomLeft","bottomRight","center","expandRect","intersect","reduce","reduceRect","offsetRect","right","setH","setSize","setW","topLeft","topRight","Vector","cross","VectorCross","VectorDifference","distance","VectorDistance","incidence","VectorIncidence","make","normalize","VectorNormalize","power","VectorSize","friction","towards","sqrt","atan2","l","pools","Hash","pool","HashGet","defineProperties","enumerable","writable","getItem","newItem","once","oldItem","addMany","removeMany","removeAll","hash","forward","reverse","sort","d","backward","differs","updatePool","Array","$promise","all","promises","State","idle","busy","isBusy","isError","isErroring","isSuccess","isSuccessing","errors","classes","addons","ready","isReady","successing","success","errorring","enabled","errorMessage","button","labels","$broadcast","submitClass","transformProperty","style","every","prefix","detectTransformProperty","Style","props","scale","hoverScale","currentScale","styles","cssText","transform","transformOrigin","extract","string","prepend","expression","formatted","object","reducer","reducerAdder","slice","reducerSetter","removeValue","reverseSortOn","throttle","func","wait","context","args","timeout","later","leading","getNow","remaining","trailing","toMd5","where","query","found","TypeError","len","k","$locationProvider","$httpProvider","config","merge","environment","paths","location","EnvironmentGet","global","EnvironmentSetHttp","EnvironmentSetLocation","EnvironmentSet","use","plugins","facebook","fields","version","google","googlemaps","clusterer","lat","lng","disableDefaultUI","mapTypeId","scrollwheel","zoom","mapbox","bearing","curve","pitch","speed","http","interceptors","withCredentials","language","code","culture","iso","html5","headers","common","html5Mode","hashPrefix","Api","Doc","$location","$route","$routeParams","Router","Route","route","$$route","pathParams","originalPath","loadedTemplateUrl","View","doc","docs","response","LocalStorage","isAuthorizedOrGoTo","redirect","auth","created_at","expires_in","status","isAuthorized","request","Authorization","access_token","responseError","Message","ModelState","httpError","delete","signOut","$http","SessionStorage","accessToken","remember","exist","BearerSet","header","HttpPromise","HttpPath","post","put","patch","static","fake","msec","api","method","Preload","loaded","total","progress","preloads","map","update","preload","percent","start","clearInterval","xhr","XMLHttpRequest","responseType","onloadstart","onprogress","onload","buffer","onerror","send","image","Image","src","URL","createObjectURL","load","OnceScript","OnceLink","script","uid","getElementById","scripts","insertBefore","nextSibling","links","rel","$previous","$current","$next","$currentController","isController","msecs","RouterRedirectTo","RouterRetryLastRequestedPath","RouterSetControllers","$$lastRequestedPath","loading","rejection","$path","url","$$listeners","$locationChangeSuccess","unshift","TIMEOUT","CookieSetter","cookie","CookieGet","elapsed","Cookie","checkCookie","days","cache","json","JSON","stringify","btoa","encodeURIComponent","cookieName","ca","parse","decodeURIComponent","atob","expires","toGMTString","localStorage","removeItem","newValue","setItem","LocalSupported","sessionStorage","SessionSupported","$sce","TrustGetOrSet","trustAsHtml","resource","trustAsResourceUrl","trustedValues","trustedValue"],"mappings":"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","file":"artisan.min.js","sourcesContent":["/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan', ['ng', 'ngRoute', 'ngMessages']);\r\n\r\n}());\r\n\n/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.directive('modalView', ['$parse', '$templateRequest', '$compile', '$controller', 'Dom', function($parse, $templateRequest, $compile, $controller, Dom) {\r\n\r\n\t\tfunction compileController(scope, element, html, data) {\r\n\t\t\telement.html(html);\r\n\t\t\tvar link = $compile(element.contents());\r\n\t\t\tif (data.controller) {\r\n\t\t\t\tvar $scope = scope.$new();\r\n\t\t\t\tangular.extend($scope, data);\r\n\t\t\t\tvar controller = $controller(data.controller, {\r\n\t\t\t\t\t$scope: $scope\r\n\t\t\t\t});\r\n\t\t\t\tif (data.controllerAs) {\r\n\t\t\t\t\tscope[data.controllerAs] = controller;\r\n\t\t\t\t}\r\n\t\t\t\telement.data('$ngControllerController', controller);\r\n\t\t\t\telement.children().data('$ngControllerController', controller);\r\n\t\t\t\tscope = $scope;\r\n\t\t\t}\r\n\t\t\tlink(scope);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\tpriority: -400,\r\n\t\t\tlink: function(scope, element, attributes, model) {\r\n\t\t\t\tvar modal = $parse(attributes.modalView);\r\n\t\t\t\tmodal = modal(scope);\r\n\t\t\t\tmodal.templateUrl = modal.templateUrl || 'artisan/components/modals/partial/modal';\r\n\t\t\t\t$templateRequest(modal.templateUrl).then(function(html) {\r\n\t\t\t\t\tcompileController(scope, element, html, modal);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n}());\r\n\n/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.provider('$modal', [function $modalProvider() {\r\n\r\n\t\tvar modals = [];\r\n\t\tvar routes = {};\r\n\r\n\t\tthis.modals = modals;\r\n\t\tthis.routes = routes;\r\n\t\tthis.when = when;\r\n\r\n\t\tfunction when(path, modal) {\r\n\t\t\troutes[path] = modal;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar tp;\r\n\r\n\t\tthis.$get = ['$q', '$timeout', function modalFactory($q, $timeout) {\r\n\r\n\t\t\tfunction popModal(modal) {\r\n\t\t\t\t// console.log('modalProvider.popModal', modal);\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\tangular.forEach(modals, function(m, i) {\r\n\t\t\t\t\tif (m === modal) {\r\n\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tif (tp) {\r\n\t\t\t\t\t\t$timeout.cancel(tp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttp = $timeout(function() {\r\n\t\t\t\t\t\tmodal.active = false;\r\n\t\t\t\t\t\tmodals.splice(index, 1);\r\n\t\t\t\t\t\tif (modals.length) {\r\n\t\t\t\t\t\t\tmodals[modals.length - 1].active = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction closeModal(modal) {\r\n\t\t\t\t// console.log('modalProvider.closeModal', modal);\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\tangular.forEach(modals, function(m, i) {\r\n\t\t\t\t\tif (m === modal) {\r\n\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tmodal.active = false;\r\n\t\t\t\t\tif (tp) {\r\n\t\t\t\t\t\t$timeout.cancel(tp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttp = $timeout(function() {\r\n\t\t\t\t\t\twhile (modals.length) {\r\n\t\t\t\t\t\t\tmodals.splice(modals.length - 1, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction addModal(path, params) {\r\n\t\t\t\t// console.log('modalProvider.addModal', path, params);\r\n\t\t\t\tvar deferred = $q.defer();\r\n\t\t\t\tparams = params || null;\r\n\t\t\t\tvar modal = {\r\n\t\t\t\t\ttitle: 'Untitled',\r\n\t\t\t\t\tcontroller: null,\r\n\t\t\t\t\ttemplateUrl: null,\r\n\t\t\t\t\tparams: params,\r\n\t\t\t\t};\r\n\t\t\t\tvar current = routes[path];\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tangular.extend(modal, current);\r\n\t\t\t\t}\r\n\t\t\t\tmodal.deferred = deferred;\r\n\t\t\t\tmodal.back = function(data) {\r\n\t\t\t\t\tpopModal(this);\r\n\t\t\t\t\tmodal.deferred.resolve(data, modal);\r\n\t\t\t\t};\r\n\t\t\t\tmodal.resolve = function(data) {\r\n\t\t\t\t\tcloseModal(this);\r\n\t\t\t\t\tmodal.deferred.resolve(data, modal);\r\n\t\t\t\t};\r\n\t\t\t\tmodal.reject = function() {\r\n\t\t\t\t\tcloseModal(this);\r\n\t\t\t\t\tmodal.deferred.reject(modal);\r\n\t\t\t\t};\r\n\t\t\t\tangular.forEach(modals, function(m, i) {\r\n\t\t\t\t\tm.active = false;\r\n\t\t\t\t});\r\n\t\t\t\tif (modals.length) {\r\n\t\t\t\t\tmodals.push(modal);\r\n\t\t\t\t\tmodal.active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmodals.push(modal);\r\n\t\t\t\t\tif (tp) {\r\n\t\t\t\t\t\t$timeout.cancel(tp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttp = $timeout(function() {\r\n\t\t\t\t\t\tmodal.active = true;\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\t\t\t\treturn deferred.promise;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmodals: modals,\r\n\t\t\t\taddModal: addModal,\r\n\t\t\t};\r\n        }];\r\n\r\n    }]);\r\n\r\n}());\r\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.directive('nav', ['$parse', 'Nav', function($parse, Nav) {\n\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplateUrl: function(element, attributes) {\n\t\t\t\treturn attributes.template || 'artisan/components/nav/partial/nav';\n\t\t\t},\n\t\t\tscope: {\n\t\t\t\titems: '=nav',\n\t\t\t},\n\t\t\tlink: NavLink,\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction NavLink(scope, element, attributes, model) {\n\t\t\tscope.$watch('items', function(value) {\n\t\t\t\t// console.log(value instanceof Nav, value);\n\t\t\t\tif (value) {\n\t\t\t\t\tif (angular.isArray(value)) {\n\t\t\t\t\t\tvar onPath = $parse(attributes.onPath)(scope.$parent);\n\t\t\t\t\t\tvar onNav = $parse(attributes.onNav)(scope.$parent);\n\t\t\t\t\t\tvar nav = new Nav({\n\t\t\t\t\t\t\tonPath: onPath,\n\t\t\t\t\t\t\tonNav: onNav\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnav.setItems(value);\n\t\t\t\t\t\tscope.item = nav;\n\n\t\t\t\t\t} else if (value instanceof Nav) {\n\t\t\t\t\t\tscope.item = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n    }]);\n\n\tapp.directive('navItem', ['$timeout', 'Events', function($timeout, Events) {\n\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplateUrl: function(element, attributes) {\n\t\t\t\treturn attributes.template || 'artisan/components/nav/partial/nav-item';\n\t\t\t},\n\t\t\tscope: {\n\t\t\t\titem: '=navItem',\n\t\t\t},\n\t\t\tlink: NavItemLink,\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction NavItemLink(scope, element, attributes, model) {\n\t\t\tvar navItem = angular.element(element[0].querySelector('.nav-link'));\n\n\t\t\tvar output;\n\n\t\t\tfunction itemOpen(item, immediate) {\n\t\t\t\tvar state = item.$nav.state;\n\t\t\t\tstate.active = true;\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tstate.immediate = immediate;\n\t\t\t\t\tstate.closed = state.closing = false;\n\t\t\t\t\tstate.opening = true;\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\tstate.opening = false;\n\t\t\t\t\t\tstate.opened = true;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction itemClose(item, immediate) {\n\t\t\t\tvar state = item.$nav.state;\n\t\t\t\tstate.active = false;\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tstate.immediate = immediate;\n\t\t\t\t\tstate.opened = state.opening = false;\n\t\t\t\t\tstate.closing = true;\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\tstate.closing = false;\n\t\t\t\t\t\tstate.closed = true;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (item.items) {\n\t\t\t\t\tangular.forEach(item.items, function(o) {\n\t\t\t\t\t\titemClose(o, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction itemToggle(item) {\n\t\t\t\t// console.log('itemToggle', item);\n\t\t\t\tvar state = item.$nav.state;\n\t\t\t\tstate.active = item.items ? !state.active : true;\n\t\t\t\tif (state.active) {\n\t\t\t\t\tif (item.$nav.parent) {\n\t\t\t\t\t\tangular.forEach(item.$nav.parent.items, function(o) {\n\t\t\t\t\t\t\tif (o !== item) {\n\t\t\t\t\t\t\t\titemClose(o, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\titemOpen(item);\n\t\t\t\t} else {\n\t\t\t\t\titemClose(item);\n\t\t\t\t}\n\t\t\t\t// console.log(state);\n\t\t\t}\n\n\t\t\tfunction onDown(e) {\n\t\t\t\tvar item = scope.item;\n\t\t\t\t// console.log('Item.onDown', item);\n\t\t\t\tvar state = item.$nav.state;\n\t\t\t\tif (state.active) {\n\t\t\t\t\toutput = false;\n\t\t\t\t\ttrigger();\n\t\t\t\t} else if (item.$nav.onNav) {\n\t\t\t\t\tvar promise = item.$nav.onNav(item, item.$nav);\n\t\t\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\t\t\tpromise.then(function(resolved) {\n\t\t\t\t\t\t\t// go on\n\t\t\t\t\t\t\ttrigger();\n\t\t\t\t\t\t}, function(rejected) {\n\t\t\t\t\t\t\t// do nothing\n\t\t\t\t\t\t});\n\t\t\t\t\t\toutput = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = promise;\n\t\t\t\t\t\ttrigger();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction trigger() {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\titemToggle(item);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// preventDefault(e);\n\t\t\t}\n\n\t\t\tfunction onClick(e) {\n\t\t\t\t// console.log('Item.onClick', e);\n\t\t\t\treturn preventDefault(e);\n\t\t\t}\n\n\t\t\tfunction preventDefault(e) {\n\t\t\t\tif (output === false) {\n\t\t\t\t\t// console.log('Item.preventDefault', e);\n\t\t\t\t\te.stop();\n\t\t\t\t\t// e.preventDefault();\n\t\t\t\t\t// e.stopPropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar events = new Events(navItem).add({\n\t\t\t\tdown: onDown,\n\t\t\t\tclick: onClick,\n\t\t\t}, scope);\n\t\t}\n\n    }]);\n\n\tapp.directive('navTo', ['$parse', '$timeout', 'Events', function($parse, $timeout, Events) {\n\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\tlink: NavToLink\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction NavToLink(scope, element, attributes) {\n\t\t\tfunction onDown(e) {\n\t\t\t\tconsole.log('navTo.onDown', attributes.navTo);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tvar callback = $parse(attributes.navTo);\n\t\t\t\t\tcallback(scope);\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar events = new Events(element).add({\n\t\t\t\tdown: onDown,\n\t\t\t}, scope);\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Nav', ['Silent', function(Silent) {\n\n\t\tfunction Nav(options) {\n\t\t\tvar nav = this;\n\t\t\tvar defaults = {\n\t\t\t\titems: [],\n\t\t\t}\n\t\t\tangular.extend(nav, defaults);\n\t\t\tif (options) {\n\t\t\t\tangular.extend(nav, options);\n\t\t\t}\n\t\t\tnav.setNav(nav, null);\n\t\t}\n\n\t\tvar statics = {\n\t\t\tsilent: NavSilent,\n\t\t\tpath: NavPath,\n\t\t};\n\n\t\tvar publics = {\n\t\t\taddItem: addItem,\n\t\t\taddItems: addItems,\n\t\t\tgetPath: getPath,\n\t\t\tsetItems: setItems,\n\t\t\tsetNav: setNav,\n\t\t\tsetNavs: setNavs,\n\t\t};\n\n\t\tangular.extend(Nav, statics);\n\t\tangular.extend(Nav.prototype, publics);\n\n\t\treturn Nav;\n\n\t\t// static methods\n\n\t\tfunction NavSilent(path) {\n\t\t\tSilent.silent(path);\n\t\t}\n\n\t\tfunction NavPath(path) {\n\t\t\tSilent.path(path);\n\t\t}\n\n\t\t// prototype methods\n\n\t\tfunction setItems(items) {\n\t\t\tvar nav = this;\n\t\t\tnav.path = Silent.path();\n\t\t\tnav.items = items;\n\t\t\tnav.setNavs(items, nav);\n\t\t}\n\n\t\tfunction setNavs(items, parent) {\n\t\t\tvar nav = this;\n\t\t\tif (items) {\n\t\t\t\tangular.forEach(items, function(item) {\n\t\t\t\t\tnav.setNav(item, parent);\n\t\t\t\t\tnav.setNavs(item.items, item);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction setNav(item, parent) {\n\t\t\tvar nav = this;\n\t\t\tvar $nav = {\n\t\t\t\tparent: parent || null,\n\t\t\t\tlevel: parent ? parent.$nav.level + 1 : 0,\n\t\t\t\tstate: {},\n\t\t\t\taddItems: function(x) {\n\t\t\t\t\tnav.addItems(x, item);\n\t\t\t\t},\n\t\t\t\tonNav: nav.onNav,\n\t\t\t};\n\t\t\titem.$nav = $nav;\n\t\t\t$nav.path = nav.getPath(item);\n\t\t\tif ($nav.path === nav.path) {\n\t\t\t\t$nav.state.active = true;\n\t\t\t\t$nav.state.opened = true;\n\t\t\t\twhile ($nav.parent) {\n\t\t\t\t\t$nav = $nav.parent.$nav;\n\t\t\t\t\t$nav.state.active = true;\n\t\t\t\t\t$nav.state.opened = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction addItems(itemOrItems, parent) {\n\t\t\tvar nav = this;\n\t\t\tif (angular.isArray(itemOrItems)) {\n\t\t\t\tangular.forEach(itemOrItems, function(item) {\n\t\t\t\t\tnav.addItem(item, parent);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnav.addItem(itemOrItems, parent);\n\t\t\t}\n\t\t}\n\n\t\tfunction addItem(item, parent) {\n\t\t\tvar nav = this,\n\t\t\t\tonPath = nav.onPath,\n\t\t\t\tonNav = nav.onNav;\n\t\t\tnav.setNav(item, parent);\n\t\t\tif (parent) {\n\t\t\t\tparent.items = parent.items || [];\n\t\t\t\tparent.items.push(item);\n\t\t\t}\n\t\t}\n\n\t\tfunction getPath(item) {\n\t\t\tvar path = null;\n\t\t\tif (this.onPath) {\n\t\t\t\tpath = this.onPath(item, item.$nav);\n\t\t\t} else {\n\t\t\t\tpath = item.path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Animate', [function() {\n\n\t\tfunction Animate(callback) {\n\t\t\tthis.callback = callback;\n\t\t\tthis.key = null;\n\t\t\tthis.ticks = 0;\n\t\t}\n\n\t\tvar statics = {};\n\n\t\tvar publics = {\n\t\t\tpause: pause,\n\t\t\tplay: play,\n\t\t\ttoggle: toggle,\n\t\t};\n\n\t\tangular.extend(Animate, statics);\n\t\tangular.extend(Animate.prototype, publics);\n\n\t\treturn Animate;\n\n\t\t// static methods\n\n\t\t// prototype methods\n\n\t\tfunction pause() {\n\t\t\tvar animate = this;\n\t\t\tif (animate.key) {\n\t\t\t\twindow.cancelAnimationFrame(animate.key);\n\t\t\t\tanimate.key = null;\n\t\t\t}\n\t\t}\n\n\t\tfunction play() {\n\t\t\tvar animate = this;\n\n\t\t\tfunction loop(time) {\n\t\t\t\tanimate.ticks++;\n\t\t\t\tanimate.callback(time, animate.ticks);\n\t\t\t\tanimate.key = window.requestAnimationFrame(loop);\n\t\t\t}\n\t\t\tif (!animate.key) {\n\t\t\t\tloop();\n\t\t\t}\n\t\t}\n\n\t\tfunction toggle() {\n\t\t\tvar animate = this;\n\t\t\tif (animate.key) {\n\t\t\t\tanimate.pause();\n\t\t\t} else {\n\t\t\t\tanimate.play();\n\t\t\t}\n\t\t}\n\n    }]);\n\n\t(function() {\n\t\tvar lastTime = 0;\n\t\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\t\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n\t\t\t\twindow[vendors[x] + 'CancelRequestAnimationFrame'];\n\t\t}\n\t\tif (!window.requestAnimationFrame) {\n\t\t\twindow.requestAnimationFrame = function(callback, element) {\n\t\t\t\tvar currTime = new Date().getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t\t}, timeToCall);\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\t\t}\n\t\tif (!window.cancelAnimationFrame) {\n\t\t\twindow.cancelAnimationFrame = function(id) {\n\t\t\t\tclearTimeout(id);\n\t\t\t};\n\t\t}\n\t}());\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('DateTime', [function() {\n\n\t\tvar service = this;\n\n\t\tvar SECOND = 1000;\n\t\tvar MINUTE = 60 * SECOND;\n\t\tvar QUARTER = 15 * MINUTE;\n\t\tvar HOUR = 60 * MINUTE;\n\t\tvar DAY = 24 * HOUR;\n\t\tvar WEEK = 7 * DAY;\n\t\tvar FIRSTDAYOFWEEK = 1;\n\n\t\tvar today = getFullDate();\n\n\t\tvar statics = {\n\t\t\tgetIndexLeft: getIndexLeft,\n\t\t\tgetIndexRight: getIndexRight,\n\t\t\t//\n\t\t\tgetDayLeft: getDayLeft,\n\t\t\tgetDayRight: getDayRight,\n\t\t\t//\n\t\t\tgetMonthLeft: getMonthLeft,\n\t\t\tgetMonthRight: getMonthRight,\n\t\t\t//\n\t\t\tgetWeekLeft: getWeekLeft,\n\t\t\tgetWeekRight: getWeekRight,\n\t\t\t//\n\t\t\tgetYearLeft: getYearLeft,\n\t\t\tgetYearRight: getYearRight,\n\t\t\t//\n\t\t\tdateToKey: dateToKey,\n\t\t\t//\n\t\t\tdayDiff: dayDiff,\n\t\t\tdayLeft: dayLeft,\n\t\t\tdayRight: dayRight,\n\t\t\t//\n\t\t\tgetDate: getDate,\n\t\t\tgetFullDate: getFullDate,\n\t\t\tgetDay: getDay,\n\t\t\tgetFullDay: getFullDay,\n\t\t\tgetWeek: getWeek,\n\t\t\tgetDayByKey: getDayByKey,\n\t\t\tgetDayByDate: getDayByDate,\n\t\t\thourToTime: hourToTime,\n\t\t\tkeyToDate: keyToDate,\n\t\t\t//\n\t\t\tmonthDiff: monthDiff,\n\t\t\tmonthLeft: monthLeft,\n\t\t\tmonthRight: monthRight,\n\t\t\t//\n\t\t\ttoday: today,\n\t\t\t//\n\t\t\tweekDiff: weekDiff,\n\t\t\tweekLeft: weekLeft,\n\t\t\tweekRight: weekRight,\n\t\t\t//\n\t\t\tyearDiff: yearDiff,\n\t\t\tyearLeft: yearLeft,\n\t\t\tyearRight: yearRight,\n\t\t\t// conversion\n\t\t\ttimeToHour: timeToHour,\n\t\t\ttimeToQuarterHour: timeToQuarterHour,\n\t\t\t// units\n\t\t\tSECOND: SECOND,\n\t\t\tMINUTE: MINUTE,\n\t\t\tQUARTER: QUARTER,\n\t\t\tHOUR: HOUR,\n\t\t\tDAY: DAY,\n\t\t\tWEEK: WEEK,\n\t\t\tFIRSTDAYOFWEEK: FIRSTDAYOFWEEK,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\tfunction datetime(date) {\n\t\t\tdate = date ? new Date(date) : new Date();\n\t\t\treturn date;\n\t\t}\n\n\t\tfunction components(date) {\n\t\t\tdate = datetime(date);\n\t\t\t// console.log($locale.DATETIME_FORMATS.FIRSTDAYOFWEEK);\n\t\t\treturn {\n\t\t\t\tdate: date,\n\t\t\t\tyyyy: date.getFullYear(),\n\t\t\t\tMM: date.getMonth(),\n\t\t\t\tdd: date.getDate(),\n\t\t\t\t// ee: (date.getDay() + $locale.DATETIME_FORMATS.FIRSTDAYOFWEEK) % 7,\n\t\t\t\tee: date.getDay(),\n\t\t\t\tHH: date.getHours(),\n\t\t\t\tmm: date.getMinutes(),\n\t\t\t\tss: date.getSeconds(),\n\t\t\t\tsss: date.getMilliseconds(),\n\t\t\t};\n\t\t}\n\n\t\tfunction dateToKey(date) {\n\t\t\tdate = dayLeft(datetime(date));\n\t\t\tvar offset = date.getTimezoneOffset();\n\t\t\treturn Math.floor((date.valueOf() - offset * MINUTE) / DAY);\n\t\t}\n\n\t\tfunction dayDiff(diff, date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd + diff, c.HH, c.mm, c.ss, c.sss);\n\t\t}\n\n\t\tfunction dayLeft(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd, 0, 0, 0, 0);\n\t\t}\n\n\t\tfunction dayRight(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd, 23, 59, 59, 999);\n\t\t}\n\n\t\tfunction getDate(date) {\n\t\t\tdate = dayLeft(date);\n\t\t\treturn getDayByDate(date);\n\t\t}\n\n\t\tfunction getFullDate(date) {\n\t\t\treturn getFullDay(getDate(date));\n\t\t}\n\n\t\tfunction getDay(date, key) {\n\t\t\treturn {\n\t\t\t\tdate: date,\n\t\t\t\tkey: key,\n\t\t\t};\n\t\t}\n\n\t\tfunction getDayByKey(key) {\n\t\t\treturn getDay(keyToDate(key), key);\n\t\t}\n\n\t\tfunction getDayByDate(date) {\n\t\t\treturn getDay(date, dateToKey(date));\n\t\t}\n\n\t\tfunction getFullDay(day) {\n\t\t\tvar c = components(day.date);\n\t\t\tc.key = day.key;\n\t\t\tc.wKey = dateToKey(weekLeft(day.date));\n\t\t\tc.mKey = dateToKey(monthLeft(day.date));\n\t\t\tc.ww = getWeek(day.date, FIRSTDAYOFWEEK);\n\t\t\treturn c;\n\t\t}\n\n\t\tfunction hourToTime(hour) {\n\t\t\treturn hour * HOUR;\n\t\t}\n\n\t\tfunction keyToDate(key) {\n\t\t\tvar date = new Date();\n\t\t\tvar offset = date.getTimezoneOffset();\n\t\t\treturn new Date(date.setTime(key * DAY + offset * MINUTE));\n\t\t}\n\n\t\tfunction monthDiff(diff, date, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar MM = Math.floor(c.MM / step) * step + diff * step;\n\t\t\treturn new Date(c.yyyy, MM, 1, c.HH, c.mm, c.ss, c.sss);\n\t\t}\n\n\t\tfunction monthLeft(date, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar MM = Math.floor(c.MM / step) * step;\n\t\t\treturn new Date(c.yyyy, MM, 1, 0, 0, 0, 0);\n\t\t}\n\n\t\tfunction monthRight(date, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar MM = Math.floor(c.MM / step) * step;\n\t\t\treturn new Date(c.yyyy, MM + step, 0, 23, 59, 59, 999);\n\t\t}\n\n\t\tfunction timeToHour(time) {\n\t\t\treturn time / HOUR;\n\t\t}\n\n\t\tfunction timeToQuarterHour(time) {\n\t\t\treturn Math.floor(time / QUARTER) * QUARTER / HOUR;\n\t\t}\n\n\t\tfunction weekDiff(diff, date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd + diff * 7, c.HH, c.mm, c.ss, c.sss);\n\t\t}\n\n\t\tfunction weekLeft(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd - c.ee + FIRSTDAYOFWEEK, 0, 0, 0, 0);\n\t\t}\n\n\t\tfunction weekRight(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM, c.dd - c.ee + FIRSTDAYOFWEEK + 6, 23, 59, 59, 999);\n\t\t}\n\n\t\tfunction yearDiff(diff, date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, c.MM + diff * 12, c.dd, c.HH, c.mm, c.ss, c.sss);\n\t\t}\n\n\t\tfunction yearLeft(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, 0, 1, 0, 0, 0, 0);\n\t\t}\n\n\t\tfunction yearRight(date) {\n\t\t\tvar c = components(date);\n\t\t\treturn new Date(c.yyyy, 12, 0, 23, 59, 59, 999);\n\t\t}\n\n\t\tfunction getIndexLeft(diff, size, step) {\n\t\t\tdiff = diff || 0;\n\t\t\tsize = size || 1;\n\t\t\tstep = step || 1;\n\t\t\tvar index = diff * step;\n\t\t\treturn index;\n\t\t}\n\n\t\tfunction getIndexRight(diff, size, step) {\n\t\t\tsize = size || 1;\n\t\t\tstep = step || 1;\n\t\t\tvar index = getIndexLeft(diff, size, step);\n\t\t\tindex += (size * step) - 1;\n\t\t\treturn index;\n\t\t}\n\n\t\tfunction getYearLeft(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar yyyy = Math.floor(c.yyyy / step) * step;\n\t\t\tyyyy += getIndexLeft(diff, size, step);\n\t\t\tdate = new Date(yyyy, c.MM, c.dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn yearLeft(date);\n\t\t}\n\n\t\tfunction getYearRight(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar yyyy = Math.floor(c.yyyy / step) * step;\n\t\t\tyyyy += getIndexRight(diff, size, step);\n\t\t\tdate = new Date(yyyy, c.MM, c.dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn yearRight(date);\n\t\t}\n\n\t\tfunction getMonthLeft(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar MM = Math.floor(c.MM / step) * step;\n\t\t\tMM += getIndexLeft(diff, size, step);\n\t\t\tdate = new Date(c.yyyy, MM, c.dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn monthLeft(date);\n\t\t}\n\n\t\tfunction getMonthRight(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar MM = Math.floor(c.MM / step) * step;\n\t\t\tMM += getIndexRight(diff, size, step);\n\t\t\tdate = new Date(c.yyyy, MM, c.dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn monthRight(date);\n\t\t}\n\n\t\tfunction getWeekLeft(date, diff, size, step) {\n\t\t\tvar c = components(date);\n\t\t\tvar dd = c.dd + getIndexLeft(diff, size, step) * 7;\n\t\t\tdate = new Date(c.yyyy, c.MM, dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn weekLeft(date);\n\t\t}\n\n\t\tfunction getWeekRight(date, diff, size, step) {\n\t\t\tvar c = components(date);\n\t\t\tvar dd = c.dd + getIndexRight(diff, size, step) * 7;\n\t\t\tdate = new Date(c.yyyy, c.MM, dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn weekRight(date);\n\t\t}\n\n\t\tfunction getDayLeft(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar dd = Math.floor(c.dd / step) * step;\n\t\t\tdd += getIndexLeft(diff, size, step);\n\t\t\tdate = new Date(c.yyyy, c.MM, dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn dayLeft(date);\n\t\t}\n\n\t\tfunction getDayRight(date, diff, size, step) {\n\t\t\tstep = step || 1;\n\t\t\tvar c = components(date);\n\t\t\tvar dd = Math.floor(c.dd / step) * step;\n\t\t\tdd += getIndexRight(diff, size, step);\n\t\t\tdate = new Date(c.yyyy, c.MM, dd, c.HH, c.mm, c.ss, c.sss);\n\t\t\treturn dayRight(date);\n\t\t}\n\n\t\tfunction getWeekDay(date, offsetDays) {\n\t\t\toffsetDays = offsetDays || 0; // default offsetDays to zero\n\t\t\tvar ee = date.getDay();\n\t\t\tee -= offsetDays;\n\t\t\tif (ee < 0) {\n\t\t\t\tee += 7;\n\t\t\t}\n\t\t\treturn ee;\n\t\t}\n\n\t\tfunction getWeek(date, offsetDays) {\n\t\t\tvar startingDayOfWeek = 4; // first week of year with thursday;\n\t\t\tvar now = getDayByDate(date);\n\t\t\tvar first = getDayByDate(getYearLeft(date)); // diff, size, step\n\t\t\tvar ee = getWeekDay(first.date, offsetDays);\n\t\t\tvar num = now.key - first.key;\n\t\t\tvar week = Math.floor((num + ee) / 7);\n\t\t\tif (ee < startingDayOfWeek) {\n\t\t\t\tweek++;\n\t\t\t\tif (week > 52) {\n\t\t\t\t\t// next year\n\t\t\t\t\tee = getWeekDay(getYearLeft(date, 1), offsetDays);\n\t\t\t\t\t// if the next year starts before the middle of the week, it is week #1 of that year\n\t\t\t\t\tweek = ee < startingDayOfWeek ? 1 : 53;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn week;\n\t\t}\n\n    }]);\n\n\tapp.filter('isoWeek', ['DateTime', function(DateTime) {\n\t\treturn function(value, offsetDays) {\n\t\t\tif (value) {\n\t\t\t\tvar week = DateTime.getWeek(value, offsetDays);\n\t\t\t\treturn week < 10 ? '0' + week : week; // padded\n\t\t\t} else {\n\t\t\t\treturn '-';\n\t\t\t}\n\t\t};\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tvar it_IT = {\n\t\tlong: {\n\t\t\tRANGE: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tYEAR: 'Anno {from|date:yyyy}',\n\t\t\tSEMESTER: 'Semestre {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tTRIMESTER: 'Quadrimestre {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tQUARTER: 'Trimestre {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tMONTH: '{from|date:MMMM yyyy}',\n\t\t\tWEEK: 'Settimana {to|isoWeek:1}',\n\t\t\tDAY: '{from|date:EEEE dd MMM yyyy}',\n\t\t},\n\t\tshort: {\n\t\t\tRANGE: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tYEAR: '{from|date:yyyy}',\n\t\t\tSEMESTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tTRIMESTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tQUARTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tMONTH: '{from|date:MMMM}',\n\t\t\tWEEK: 'W{to|isoWeek:1}',\n\t\t\tDAY: '{from|date:EEEE}',\n\t\t},\n\t\tweek: 1,\n\t};\n\n\tvar en_US = {\n\t\tlong: {\n\t\t\tRANGE: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tYEAR: 'Year {from|date:yyyy}',\n\t\t\tSEMESTER: 'Semester {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tTRIMESTER: 'Trimester {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tQUARTER: 'Quarter {from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tMONTH: '{from|date:MMMM yyyy}',\n\t\t\tWEEK: 'Week {from|isoWeek:0}',\n\t\t\tDAY: '{from|date:EEEE MM/dd/yyyy}',\n\t\t},\n\t\tshort: {\n\t\t\tRANGE: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tYEAR: '{from|date:yyyy}',\n\t\t\tSEMESTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tTRIMESTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tQUARTER: '{from|date:MMM yyyy} - {to|date:MMM yyyy}',\n\t\t\tMONTH: '{from|date:MMMM}',\n\t\t\tWEEK: 'W{from|isoWeek:0}',\n\t\t\tDAY: '{from|date:EEEE}',\n\t\t},\n\t\tweek: 0,\n\t};\n\n\tvar formats = it_IT;\n\n\tapp.constant('RangeTypes', {\n\t\tRANGE: 10,\n\t\tYEAR: 11,\n\t\tSEMESTER: 12,\n\t\tTRIMESTER: 13,\n\t\tQUARTER: 14,\n\t\tMONTH: 15,\n\t\tWEEK: 16,\n\t\tDAY: 17,\n\t});\n\n\tapp.factory('Range', ['$filter', 'DateTime', 'RangeTypes', function($filter, DateTime, RangeTypes) {\n\n\t\tfunction Range(options) {\n\t\t\tvar range = this;\n\t\t\trange.from = DateTime.dayLeft();\n\t\t\trange.type = RangeTypes.QUARTER;\n\t\t\tif (options) {\n\t\t\t\tangular.extend(range, options);\n\t\t\t}\n\t\t\trange.setDiff();\n\t\t}\n\n\t\tvar publics = {\n\t\t\tsetYear: setYear,\n\t\t\tsetSemester: setSemester,\n\t\t\tsetTrimester: setTrimester,\n\t\t\tsetQuarter: setQuarter,\n\t\t\tsetMonth: setMonth,\n\t\t\tsetWeek: setWeek,\n\t\t\tsetDay: setDay,\n\t\t\tsetKey: setKey,\n\n\t\t\tprev: prev,\n\t\t\tnext: next,\n\n\t\t\tgetDiff: getDiff,\n\t\t\tgetParams: getParams,\n\t\t\tgetDate: getDate,\n\t\t\tsetDate: setDate,\n\t\t\tsetDiff: setDiff,\n\n\t\t\tset: set,\n\t\t\tis: is,\n\t\t\tisInside: isInside,\n\t\t\tisOutside: isOutside,\n\t\t\tisCurrent: isCurrent,\n\t\t\tisBefore: isBefore,\n\t\t\tisAfter: isAfter,\n\t\t\tequals: equals,\n\n\t\t\teachDay: eachDay,\n\t\t\ttotalDays: totalDays,\n\n\t\t\tgetName: getName,\n\t\t\tgetShortName: getShortName,\n\t\t\ttoString: toString,\n\t\t};\n\n\t\tvar statics = {\n\t\t\t//\n\t\t\tcopy: RangeCopy,\n\t\t\texpand: RangeExpand,\n\t\t\tgetMonth: RangeGetMonth,\n\t\t\taddYear: RangeAddYear,\n\t\t\ttypes: RangeTypes,\n\t\t\t//\n\t\t\tYear: RangeYear,\n\t\t\tSemester: RangeSemester,\n\t\t\tTrimester: RangeTrimester,\n\t\t\tQuarter: RangeQuarter,\n\t\t\tMonth: RangeMonth,\n\t\t\tWeek: RangeWeek,\n\t\t\tDay: RangeDay,\n\t\t\t//\n\t\t\tgetDate: DateTime.getDate,\n\t\t\tgetFullDate: DateTime.getFullDate,\n\t\t\tdateToKey: DateTime.dateToKey,\n\t\t\tkeyToDate: DateTime.keyToDate,\n\t\t\tgetDay: DateTime.getDay,\n\t\t\tgetFullDay: DateTime.getFullDay,\n\t\t\tgetDayByKey: DateTime.getDayByKey,\n\t\t\tgetDayByDate: DateTime.getDayByDate,\n\t\t\ttoday: DateTime.today,\n\t\t\tDateTime: DateTime,\n\t\t};\n\n\t\tangular.extend(Range.prototype, publics);\n\t\tangular.extend(Range, statics);\n\n\t\treturn Range;\n\n\t\t// public methods\n\t\tfunction isInside(date) {\n\t\t\tvar range = this;\n\t\t\treturn !range.isOutside(date);\n\t\t}\n\n\t\tfunction isOutside(date) {\n\t\t\tdate = date || new Date();\n\t\t\tvar range = this;\n\t\t\tvar outside = date < range.from || date > range.to;\n\t\t\t// console.log('isOutside', date, range.from, range.to);\n\t\t\treturn outside;\n\t\t}\n\n\t\tfunction isCurrent(date) {\n\t\t\tdate = date || new Date();\n\t\t\tvar range = this;\n\t\t\treturn !range.isOutside(date);\n\t\t}\n\n\t\tfunction isBefore(date) {\n\t\t\tdate = date || new Date();\n\t\t\tvar range = this;\n\t\t\tvar before = range.to < date;\n\t\t\t// console.log('isBefore', before, range.to, date);\n\t\t\treturn before;\n\t\t}\n\n\t\tfunction isAfter(date) {\n\t\t\tdate = date || new Date();\n\t\t\tvar range = this;\n\t\t\tvar after = range.from > date;\n\t\t\t// console.log('isAfter', after);\n\t\t\treturn after;\n\t\t}\n\n\t\tfunction setDate(date, diff) {\n\t\t\tvar range = this;\n\t\t\tswitch (range.type) {\n\t\t\t\tcase RangeTypes.YEAR:\n\t\t\t\t\trange.setYear(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.SEMESTER:\n\t\t\t\t\trange.setSemester(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.TRIMESTER:\n\t\t\t\t\trange.setTrimester(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.QUARTER:\n\t\t\t\t\trange.setQuarter(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.MONTH:\n\t\t\t\t\trange.setMonth(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.WEEK:\n\t\t\t\t\trange.setWeek(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.DAY:\n\t\t\t\t\trange.setDay(date, diff);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction getDate(diff) {\n\t\t\tdiff = diff || 0;\n\t\t\tvar range = this;\n\t\t\tvar date = new Date(range.from);\n\t\t\tswitch (range.type) {\n\t\t\t\tcase RangeTypes.YEAR:\n\t\t\t\t\tdate = new Date(date.setFullYear(date.getFullYear() + diff));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.SEMESTER:\n\t\t\t\t\tdate = new Date(date.setMonth(date.getMonth() + diff * 6));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.TRIMESTER:\n\t\t\t\t\tdate = new Date(date.setMonth(date.getMonth() + diff * 4));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.QUARTER:\n\t\t\t\t\tdate = new Date(date.setMonth(date.getMonth() + diff * 3));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.MONTH:\n\t\t\t\t\tdate = new Date(date.setMonth(date.getMonth() + diff));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.WEEK:\n\t\t\t\t\tdate = new Date(date.setDate(date.getDate() + diff * 7));\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.DAY:\n\t\t\t\t\tdate = new Date(date.setDate(date.getDate() + diff));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn date;\n\t\t}\n\n\t\tfunction getDiff(diff) {\n\t\t\tvar range = this;\n\t\t\treturn new Range({\n\t\t\t\ttype: range.type,\n\t\t\t}).setDate(range.from).setDiff(diff);\n\t\t}\n\n\t\tfunction getParams() {\n\t\t\treturn {\n\t\t\t\tdateFrom: new Date(this.from),\n\t\t\t\tdateTo: new Date(this.to),\n\t\t\t};\n\t\t}\n\n\t\tfunction setYear(date, diff, size, step) {\n\t\t\tvar range = this;\n\t\t\trange.from = DateTime.getYearLeft(date, diff, size, step);\n\t\t\trange.to = DateTime.getYearRight(date, diff, size, step);\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction setSemester(date, diff, size) {\n\t\t\treturn this.setMonth(date, diff, size, 6);\n\t\t}\n\n\t\tfunction setTrimester(date, diff, size) {\n\t\t\treturn this.setMonth(date, diff, size, 4);\n\t\t}\n\n\t\tfunction setQuarter(date, diff, size) {\n\t\t\treturn this.setMonth(date, diff, size, 3);\n\t\t}\n\n\t\tfunction setMonth(date, diff, size, step) {\n\t\t\tvar range = this;\n\t\t\trange.from = DateTime.getMonthLeft(date, diff, size, step);\n\t\t\trange.to = DateTime.getMonthRight(date, diff, size, step);\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction setWeek(date, diff, size, step) {\n\t\t\tvar range = this;\n\t\t\trange.from = DateTime.getWeekLeft(date, diff, size, step);\n\t\t\trange.to = DateTime.getWeekRight(date, diff, size, step);\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction setDay(date, diff, size, step) {\n\t\t\tvar range = this;\n\t\t\trange.from = DateTime.getDayLeft(date, diff, size, step);\n\t\t\trange.to = DateTime.getDayRight(date, diff, size, step);\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction setKey(key, diff, size, step) {\n\t\t\treturn this.setDay(DateTime.keyToDate(key), diff, size, step);\n\t\t}\n\n\t\tfunction prev() {\n\t\t\treturn this.setDiff(-1);\n\t\t}\n\n\t\tfunction next() {\n\t\t\treturn this.setDiff(1);\n\t\t}\n\n\t\tfunction setDiff(diff) {\n\t\t\tvar range = this;\n\t\t\tswitch (range.type) {\n\t\t\t\tcase RangeTypes.YEAR:\n\t\t\t\t\trange.setYear(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.SEMESTER:\n\t\t\t\t\trange.setSemester(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.TRIMESTER:\n\t\t\t\t\trange.setTrimester(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.QUARTER:\n\t\t\t\t\trange.setQuarter(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.MONTH:\n\t\t\t\t\trange.setMonth(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.WEEK:\n\t\t\t\t\trange.setWeek(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t\tcase RangeTypes.DAY:\n\t\t\t\t\trange.setDay(range.from, diff);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction set(filters, source) {\n\t\t\tvar range = this;\n\t\t\tfilters.dateFrom = range.from;\n\t\t\tfilters.dateTo = range.to;\n\t\t\tif (source) {\n\t\t\t\tsource.setDates(filters.dateFrom, filters.dateTo);\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction is(filters) {\n\t\t\tvar range = this,\n\t\t\t\tflag = false;\n\t\t\tif (filters.dateFrom && filters.dateTo) {\n\t\t\t\tflag = filters.dateFrom.getTime() == range.from.getTime() && filters.dateTo.getTime() == range.to.getTime();\n\t\t\t}\n\t\t\treturn flag;\n\t\t}\n\n\t\tfunction equals(r) {\n\t\t\tvar range = this;\n\t\t\treturn r && DateTime.dateToKey(r.from) === DateTime.dateToKey(range.from) && DateTime.dateToKey(r.to) === DateTime.dateToKey(range.to);\n\t\t}\n\n\t\tfunction eachDay(callback) {\n\t\t\tvar range = this;\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\treturn range;\n\t\t\t}\n\t\t\tvar fromKey = DateTime.dateToKey(range.from);\n\t\t\tvar toKey = DateTime.dateToKey(range.to);\n\t\t\twhile (fromKey <= toKey) {\n\t\t\t\tcallback(DateTime.getDayByKey(fromKey, formats.week));\n\t\t\t\tfromKey++;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction totalDays() {\n\t\t\tvar range = this;\n\t\t\tvar fromKey = DateTime.dateToKey(range.from);\n\t\t\tvar toKey = DateTime.dateToKey(range.to);\n\t\t\treturn toKey - fromKey + 1;\n\t\t}\n\n\t\tfunction getName() {\n\t\t\tvar range = this;\n\t\t\tvar key = RangeExtract(RangeTypes, range.type);\n\t\t\treturn RangeFormat(range, formats.long[key]);\n\t\t}\n\n\t\tfunction getShortName() {\n\t\t\tvar range = this;\n\t\t\tvar key = RangeExtract(RangeTypes, range.type);\n\t\t\treturn RangeFormat(range, formats.short[key]);\n\t\t}\n\n\t\tfunction toString() {\n\t\t\tvar range = this;\n\t\t\treturn '[' +\n\t\t\t\t$filter('date')(range.from, 'MMM dd yyyy HH:mm:ss.sss') + ', ' +\n\t\t\t\t$filter('date')(range.to, 'MMM dd yyyy HH:mm:ss.sss') +\n\t\t\t\t'] \\'' + range.getName() + '\\'';\n\t\t}\n\n\t\t// static methods\n\t\tfunction RangeCopy($range) {\n\t\t\tvar range = new Range($range);\n\t\t\trange.from = new Date($range.from);\n\t\t\trange.to = new Date($range.to);\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction RangeExpand(range, time) {\n\t\t\trange = RangeCopy(range);\n\t\t\trange.from = new Date(range.from.getTime() - time);\n\t\t\trange.to = new Date(range.to.getTime() + time);\n\t\t\t// console.log('RangeExpand', range.toString());\n\t\t\treturn range;\n\t\t}\n\n\t\tfunction RangeGetMonth(date) {\n\t\t\tif (!date) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tdate = new Date(date);\n\t\t\tdate.setDate(1);\n\t\t\tdate.setHours(0, 0, 0, 0);\n\t\t\treturn date.getTime();\n\t\t}\n\n\t\tfunction RangeAddYear(date, years) {\n\t\t\tif (!date) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tdate = new Date(date);\n\t\t\treturn new Date(date.setFullYear(date.getFullYear() + years));\n\t\t}\n\n\t\tfunction RangeYear() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.YEAR\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeSemester() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.SEMESTER\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeTrimester() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.TRIMESTER\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeQuarter() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.QUARTER\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeMonth() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.MONTH\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeWeek() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.WEEK\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeDay() {\n\t\t\treturn new Range({\n\t\t\t\ttype: RangeTypes.DAY\n\t\t\t});\n\t\t}\n\n\t\tfunction RangeFormat(range, format) {\n\t\t\tvar name = format;\n\t\t\tname = name.replace(/{(.*?)}/g, function(replaced, token) {\n\t\t\t\tvar a = token.split('|');\n\t\t\t\tvar p = a.shift();\n\t\t\t\tvar f = a.join(''),\n\t\t\t\t\tj;\n\t\t\t\tif (f.indexOf(':') !== -1) {\n\t\t\t\t\tf = f.split(':');\n\t\t\t\t\tj = f.length ? f.pop() : null;\n\t\t\t\t\tf = f.join('');\n\t\t\t\t}\n\t\t\t\t// console.log(token, f, p, j);\n\t\t\t\treturn f.length ? $filter(f)(range[p], j) : range[p];\n\t\t\t});\n\t\t\t// console.log(name);\n\t\t\treturn name;\n\t\t}\n\n\t\tfunction RangeExtract(obj, value) {\n\t\t\treturn Object.keys(obj)[Object.values(obj).indexOf(value)];\n\t\t}\n\n    }]);\n\n\t(function() {\n\t\t// POLYFILL Object.values\n\t\tif (typeof Object.values !== 'function') {\n\t\t\tObject.defineProperty(Object, 'values', {\n\t\t\t\tvalue: function(obj) {\n\t\t\t\t\tvar vals = [];\n\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\tif (has(obj, key) && isEnumerable(obj, key)) {\n\t\t\t\t\t\t\tvals.push(obj[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn vals;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}());\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\t/*\n\tapp.value('now', null);\n\t*/\n\n\tapp.value('$formats', {\n\t\tjust_now: 'just now',\n\t\tseconds_ago: '{{num}} seconds ago',\n\t\ta_minute_ago: 'a minute ago',\n\t\tminutes_ago: '{{num}} minutes ago',\n\t\tan_hour_ago: 'an hour ago',\n\t\thours_ago: '{{num}} hours ago',\n\t\ta_day_ago: 'yesterday',\n\t\tdays_ago: '{{num}} days ago',\n\t\ta_week_ago: 'a week ago',\n\t\tweeks_ago: '{{num}} weeks ago',\n\t\ta_month_ago: 'a month ago',\n\t\tmonths_ago: '{{num}} months ago',\n\t\ta_year_ago: 'a year ago',\n\t\tyears_ago: '{{num}} years ago',\n\t\tover_a_year_ago: 'over a year ago',\n\t\tseconds_from_now: '{{num}} seconds from now',\n\t\ta_minute_from_now: 'a minute from now',\n\t\tminutes_from_now: '{{num}} minutes from now',\n\t\tan_hour_from_now: 'an hour from now',\n\t\thours_from_now: '{{num}} hours from now',\n\t\ta_day_from_now: 'tomorrow',\n\t\tdays_from_now: '{{num}} days from now',\n\t\ta_week_from_now: 'a week from now',\n\t\tweeks_from_now: '{{num}} weeks from now',\n\t\ta_month_from_now: 'a month from now',\n\t\tmonths_from_now: '{{num}} months from now',\n\t\ta_year_from_now: 'a year from now',\n\t\tyears_from_now: '{{num}} years from now',\n\t\tover_a_year_from_now: 'over a year from now'\n\t});\n\n\tapp.filter('dateRelative', ['$rootScope', '$interval', '$injector', '$formats', function($rootScope, $interval, $injector, $formats) {\n\n\t\tvar minute = 60;\n\t\tvar hour = minute * 60;\n\t\tvar day = hour * 24;\n\t\tvar week = day * 7;\n\t\tvar month = day * 30;\n\t\tvar year = day * 365;\n\n\t\tvar $format = getFormat();\n\n\t\tfunction getFormat() {\n\t\t\tif ($injector.has('$format')) {\n\t\t\t\treturn $injector.get('$format');\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tinstant: function(id, params) {\n\t\t\t\t\t\treturn $formats[id].replace('{{num}}', params.num);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tfunction getDelta(now, date) {\n\t\t\treturn Math.round(Math.abs(now - date) / 1000);\n\t\t}\n\t\t/*\n        $interval(function () {\n            $rootScope.$now = new Date();\n            console.log($rootScope.$now);\n        }, 3 * 1000);\n\t\t*/\n\t\treturn function(date) {\n\t\t\tif (!(date instanceof Date)) {\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\t// now = now || new Date();\n\t\t\tvar now = new Date();\n\n\t\t\tvar delta = getDelta(now, date);\n\n\t\t\tif (delta > day && delta < week) {\n\t\t\t\tdate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0, 0);\n\t\t\t\tdelta = getDelta(now, date);\n\t\t\t}\n\n\t\t\tvar suffix = now >= date ? '_ago' : '_from_now';\n\n\t\t\tfunction format(key, num) {\n\t\t\t\treturn $format.instant(key + (delta > 30 ? suffix : ''), {\n\t\t\t\t\tnum: num\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconsole.log('delta', delta, now, date);\n\n\t\t\tif (delta < 30) {\n\t\t\t\treturn format('just_now');\n\n\t\t\t} else if (delta < minute) {\n\t\t\t\treturn format('seconds', delta);\n\n\t\t\t} else if (delta < 2 * minute) {\n\t\t\t\treturn format('a_minute');\n\n\t\t\t} else if (delta < hour) {\n\t\t\t\treturn format('minutes', Math.floor(delta / minute));\n\n\t\t\t} else if (delta < hour * 2) {\n\t\t\t\treturn format('an_hour');\n\n\t\t\t} else if (delta < day) {\n\t\t\t\treturn format('hours', Math.floor(delta / hour));\n\n\t\t\t} else if (delta < day * 2) {\n\t\t\t\treturn format('a_day');\n\n\t\t\t} else if (delta < week) {\n\t\t\t\treturn format('days', Math.floor(delta / day));\n\n\t\t\t} else if (Math.floor(delta / week) !== 1) {\n\t\t\t\treturn format('a_week');\n\n\t\t\t} else if (delta < month) {\n\t\t\t\treturn format('weeks', Math.floor(delta / week));\n\n\t\t\t} else if (Math.floor(delta / month) !== 1) {\n\t\t\t\treturn format('a_month');\n\n\t\t\t} else if (delta < year) {\n\t\t\t\treturn format('months', Math.floor(delta / month));\n\n\t\t\t} else if (Math.floor(delta / year) !== 1) {\n\t\t\t\treturn format('a_year');\n\n\t\t\t} else {\n\t\t\t\treturn format('over_a_year');\n\n\t\t\t}\n\n\t\t};\n    }]);\n\n\tapp.directive('dateRelative', ['$parse', '$filter', '$interval', function($parse, $filter, $interval) {\n\t\treturn {\n\t\t\tpriority: 1001,\n\t\t\trestrict: 'A',\n\t\t\tlink: function(scope, element, attributes, model) {\n\n\t\t\t\tfunction setDate() {\n\t\t\t\t\tvar date = $parse(attributes.dateRelative)(scope);\n\t\t\t\t\tvar relative = $filter('dateRelative')(date);\n\t\t\t\t\telement[0].innerHTML = relative;\n\t\t\t\t\t// console.log('dateRelative.setDate', relative);\n\t\t\t\t}\n\n\t\t\t\tsetDate();\n\n\t\t\t\tvar i = setInterval(setDate, 60 * 1000);\n\n\t\t\t\tscope.$on('$destroy', function() {\n\t\t\t\t\tcancelInterval(i);\n\t\t\t\t});\n\n\t\t\t}\n\t\t};\n\t}]);\n\n\t// directive dateRelative -> apply filter every timeout\n\n\t/*\n\tmyApp.config(function ($translateProvider) {\n\t    $translateProvider.translations('en', {\n\t        just_now: 'just now',\n\t        seconds_ago: '{{time}} seconds ago',\n\t    });\n\n\t    $translateProvider.translations('de', {\n\t        just_now: 'soeben',\n\t        seconds_ago: 'vor {{time}} stunden',\n\t    });\n\n\t    $translateProvider.preferredLanguage('en');\n\t});\n\t*/\n\n}());\n\n/*\n// handle transition on resizing\nvar resizingTimeout;\n$(window).on('resize', function () {\n    clearTimeout(resizingTimeout);\n    $('body').addClass('resizing');\n    resizingTimeout = setTimeout(function () {\n        $('body').removeClass('resizing');\n    }, 100);\n})\n*/\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Dom', ['Point', 'Rect', function(Point, Rect) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tgetBoundRect: getBoundRect,\n\t\t\tgetClosest: getClosest,\n\t\t\tgetClosestNode: getClosestNode,\n\t\t\tgetDelta: getDelta,\n\t\t\tgetDocumentNode: getDocumentNode,\n\t\t\tgetElement: getElement,\n\t\t\tgetNode: getNode,\n\t\t\tgetNodeOffset: getNodeOffset,\n\t\t\tgetPageScroll: getPageScroll,\n\t\t\tgetParents: getParents,\n\t\t\tgetView: getView,\n\t\t\tgetPointInView: getPointInView,\n\t\t\tcompileController: compileController,\n\t\t\tdownloadFile: downloadFile,\n\t\t\tua: getUA(),\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t// return node element BoundingClientRect\n\t\tfunction getBoundRect(node) {\n\t\t\tnode = getNode(node);\n\t\t\tif (node === window) {\n\t\t\t\tnode = getDocumentNode();\n\t\t\t}\n\t\t\tvar rect = node.getBoundingClientRect();\n\t\t\treturn rect;\n\t\t}\n\n\t\t// return closest parent node that match a selector\n\t\tfunction getClosest(node, selector) {\n\t\t\tvar matchesFn, parent;\n            ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function(fn) {\n\t\t\t\tif (typeof document.body[fn] == 'function') {\n\t\t\t\t\tmatchesFn = fn;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (node[matchesFn](selector)) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\twhile (node !== null) {\n\t\t\t\tparent = node.parentElement;\n\t\t\t\tif (parent !== null && parent[matchesFn](selector)) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tnode = parent;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t// return closest parent node that math a target node\n\t\tfunction getClosestNode(node, target) {\n\t\t\tvar parent = null;\n\t\t\tif (node === target) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\twhile (node !== null) {\n\t\t\t\tparent = node.parentElement;\n\t\t\t\tif (parent !== null && parent === target) {\n\t\t\t\t\treturn parent;\n\t\t\t\t}\n\t\t\t\tnode = parent;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t// return wheel delta\n\t\tfunction getDelta(event) {\n\t\t\tvar original = event.originalEvent ? event.originalEvent : event;\n\t\t\tvar type = original.type;\n\t\t\tvar delta = null;\n\t\t\tif (type === 'wheel' || type === 'mousewheel' || type === 'DOMMouseScroll') {\n\t\t\t\tvar deltaX = original.deltaX || original.wheelDeltaX;\n\t\t\t\tvar deltaY = original.deltaY || original.wheelDeltaY;\n\t\t\t\tdelta = new Point(deltaX, deltaY);\n\t\t\t\tif (Math.abs(deltaX) > Math.abs(deltaY)) {\n\t\t\t\t\tdelta.dir = deltaX < 0 ? 1 : -1;\n\t\t\t\t} else {\n\t\t\t\t\tdelta.dir = deltaY < 0 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn delta;\n\t\t}\n\n\t\t// return document element node\n\t\tfunction getDocumentNode() {\n\t\t\tvar documentNode = (document.documentElement || document.body.parentNode || document.body);\n\t\t\treturn documentNode;\n\t\t}\n\n\t\t// return an angular element\n\t\tfunction getElement(element) {\n\t\t\treturn angular.isArray(element) ? element : angular.element(element);\n\t\t}\n\n\t\t// return a native html node\n\t\tfunction getNode(element) {\n\t\t\treturn angular.isArray(element) ? element[0] : element;\n\t\t}\n\n\t\t// return a node offset point\n\t\tfunction getNodeOffset(node) {\n\t\t\tvar offset = new Point();\n\t\t\tnode = getNode(node);\n\t\t\tif (node && node.nodeType === 1) {\n\t\t\t\toffset.x = node.offsetLeft;\n\t\t\t\toffset.y = node.offsetTop;\n\t\t\t}\n\t\t\treturn offset;\n\t\t}\n\n\t\t// return the current page scroll\n\t\tfunction getPageScroll() {\n\t\t\tvar scroll = new Point();\n\t\t\tvar documentNode = getDocumentNode();\n\t\t\tscroll.x = window.pageXOffset || documentNode.scrollLeft;\n\t\t\tscroll.y = window.pageYOffset || documentNode.scrollTop;\n\t\t\treturn scroll;\n\t\t}\n\n\t\t// return an array of node parants\n\t\tfunction getParents(node, topParentNode) {\n\t\t\t// if no topParentNode defined will bubble up all the way to *document*\n\t\t\ttopParentNode = topParentNode || getDocumentNode();\n\t\t\tvar parents = [];\n\t\t\tif (node) {\n\t\t\t\tparents.push(node);\n\t\t\t\tvar parentNode = node.parentNode;\n\t\t\t\twhile (parentNode && parentNode !== topParentNode) {\n\t\t\t\t\tparents.push(parentNode);\n\t\t\t\t\tparentNode = parentNode.parentNode;\n\t\t\t\t}\n\t\t\t\tparents.push(topParentNode); // push that topParentNode you wanted to stop at\n\t\t\t}\n\t\t\tparents.each = function(callback) {\n\t\t\t\tthis.filter(function(node) {\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(angular.element(node), node);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn parents;\n\t\t}\n\n\t\t// return the view rect\n\t\tfunction getView() {\n\t\t\tvar view = new Rect();\n\t\t\tif (window.innerWidth !== undefined) {\n\t\t\t\tview.width = window.innerWidth;\n\t\t\t\tview.height = window.innerHeight;\n\t\t\t} else {\n\t\t\t\tvar documentNode = getDocumentNode();\n\t\t\t\tview.width = documentNode.clientWidth;\n\t\t\t\tview.height = documentNode.clientHeight;\n\t\t\t}\n\t\t\treturn view;\n\t\t}\n\n\t\t// add to constant\n\t\tvar MOUSE_EVENTS = ['click', 'mousedown', 'mouseup', 'mousemove', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave', 'contextmenu'];\n\t\tvar TOUCH_EVENTS = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n\n\t\tfunction getPointInView(event) {\n\t\t\tvar original = event.originalEvent ? event.originalEvent : event;\n\t\t\tvar type = original.type;\n\t\t\tvar point = null;\n\t\t\tif (TOUCH_EVENTS.indexOf(type) !== -1) {\n\t\t\t\tvar touch = null;\n\t\t\t\tvar touches = original.touches.length ? original.touches : original.changedTouches;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\ttouch = touches[0];\n\t\t\t\t}\n\t\t\t\tif (touch) {\n\t\t\t\t\tpoint = new Point();\n\t\t\t\t\tpoint.x = touch.pageX;\n\t\t\t\t\tpoint.y = touch.pageY;\n\t\t\t\t}\n\t\t\t} else if (MOUSE_EVENTS.indexOf(type) !== -1) {\n\t\t\t\tpoint = new Point();\n\t\t\t\tpoint.x = original.pageX;\n\t\t\t\tpoint.y = original.pageY;\n\t\t\t}\n\t\t\treturn point;\n\t\t}\n\n\t\tfunction getUA() {\n\t\t\tvar agent = window.navigator.userAgent.toLowerCase();\n\t\t\tvar safari = agent.indexOf('safari') !== -1 && agent.indexOf('chrome') === -1;\n\t\t\tvar msie = agent.indexOf('trident') !== -1 || agent.indexOf('edge') !== -1 || agent.indexOf('msie') !== -1;\n\t\t\tvar chrome = !safari && !msie && agent.indexOf('chrome') !== -1;\n\t\t\tvar mobile = agent.indexOf('mobile') !== -1;\n\t\t\tvar mac = agent.indexOf('macintosh') !== -1;\n\t\t\tvar ua = {\n\t\t\t\tagent: agent,\n\t\t\t\tsafari: safari,\n\t\t\t\tmsie: msie,\n\t\t\t\tchrome: chrome,\n\t\t\t\tmobile: mobile,\n\t\t\t\tmac: mac,\n\t\t\t};\n\t\t\tangular.forEach(ua, function(value, key) {\n\t\t\t\tif (value) {\n\t\t\t\t\tangular.element(document.getElementsByTagName('body')).addClass(key);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ua;\n\t\t}\n\n\t\t/*\n    function mobilecheck() {\n        var check = false;\n        (function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\n        return check;\n    }\n\n    // For those wishing to include tablets in this test (though arguably, you shouldn't), you can use the following function:\n    function mobileAndTabletcheck() {\n        var check = false;\n        (function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\n        return check;\n    }\n\n    var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    var isMobile = mobilecheck();\n    var isMobileAndTabled = mobileAndTabletcheck();\n\t\t*/\n\n\t\tfunction compileController(scope, element, html, data) {\n\t\t\t// console.log('Dom.compileController', element);\n\t\t\telement = getElement(element);\n\t\t\telement.html(html);\n\t\t\tvar link = $compile(element.contents());\n\t\t\tif (data.controller) {\n\t\t\t\tvar $scope = scope.$new();\n\t\t\t\tangular.extend($scope, data);\n\t\t\t\tvar controller = $controller(data.controller, {\n\t\t\t\t\t$scope: $scope\n\t\t\t\t});\n\t\t\t\tif (data.controllerAs) {\n\t\t\t\t\tscope[data.controllerAs] = controller;\n\t\t\t\t}\n\t\t\t\telement.data('$ngControllerController', controller);\n\t\t\t\telement.children().data('$ngControllerController', controller);\n\t\t\t\tscope = $scope;\n\t\t\t}\n\t\t\tlink(scope);\n\t\t}\n\n\t\tfunction downloadFile(content, name, type) {\n\t\t\ttype = type || 'application/octet-stream';\n\t\t\tvar base64 = null;\n\t\t\tvar blob = new Blob([content], {\n\t\t\t\ttype: type\n\t\t\t});\n\t\t\tvar reader = new window.FileReader();\n\t\t\treader.readAsDataURL(blob);\n\t\t\treader.onloadend = function() {\n\t\t\t\tbase64 = reader.result;\n\t\t\t\tdownload();\n\t\t\t};\n\n\t\t\tfunction download() {\n\t\t\t\tif (document.createEvent) {\n\t\t\t\t\tvar anchor = document.createElement('a');\n\t\t\t\t\tanchor.href = base64;\n\t\t\t\t\tif (anchor.download !== undefined) {\n\t\t\t\t\t\tvar downloadName = name || base64.substring(base64.lastIndexOf('/') + 1, base64.length);\n\t\t\t\t\t\tanchor.download = downloadName;\n\t\t\t\t\t}\n\t\t\t\t\tvar event = document.createEvent('MouseEvents');\n\t\t\t\t\tevent.initEvent('click', true, true);\n\t\t\t\t\tanchor.dispatchEvent(event);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar query = '?download';\n\t\t\t\twindow.open(base64.indexOf('?') > -1 ? base64 : base64 + query, '_self');\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Event', ['EventsService', 'Dom', 'Point', 'Rect', function(EventsService, Dom, Point, Rect) {\n\n\t\tfunction Event(event, element) {\n\t\t\ttry {\n\t\t\t\tevent = event || window.event;\n\t\t\t\tvar type = event.type;\n\t\t\t\tvar originalEvent = event.originalEvent ? event.originalEvent : event;\n\t\t\t\tvar node = element[0]; // Dom.getNode(element);\n\t\t\t\tvar offset = Dom.getNodeOffset(node);\n\t\t\t\tvar rect = Dom.getBoundRect(node);\n\t\t\t\tvar view = Dom.getView();\n\t\t\t\tvar scroll = Dom.getPageScroll();\n\t\t\t\tvar point = Dom.getPointInView(event);\n\t\t\t\tif (point) {\n\t\t\t\t\tvar absolute = new Point(point.x - scroll.x, point.y - scroll.y);\n\t\t\t\t\tvar relative = new Point(absolute.x - rect.left, absolute.y - rect.top);\n\t\t\t\t\tthis.point = point;\n\t\t\t\t\tthis.absolute = absolute;\n\t\t\t\t\tthis.relative = relative;\n\t\t\t\t}\n\t\t\t\tvar delta = Dom.getDelta(event);\n\t\t\t\tif (delta) {\n\t\t\t\t\tthis.delta = delta;\n\t\t\t\t\tthis.dir = delta.dir;\n\t\t\t\t}\n\t\t\t\tthis.event = event;\n\t\t\t\tthis.type = type;\n\t\t\t\tthis.originalEvent = originalEvent;\n\t\t\t\tthis.element = element;\n\t\t\t\tthis.node = node;\n\t\t\t\tthis.offset = offset;\n\t\t\t\tthis.rect = rect;\n\t\t\t\tthis.view = view;\n\t\t\t\tthis.scroll = scroll;\n\t\t\t\tthis.timestamp = new Date().getTime();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('Event.error', error);\n\t\t\t}\n\t\t}\n\n\t\tvar statics = {};\n\n\t\tvar publics = {\n\t\t\tstop: stop,\n\t\t};\n\n\t\tangular.extend(Event, statics);\n\t\tangular.extend(Event.prototype, publics);\n\t\treturn Event;\n\n\t\t// prototype methods\n\n\t\tfunction stop() {\n\t\t\tthis.event.stopPropagation();\n\t\t\tthis.event.preventDefault();\n\t\t}\n\n\t}]);\n\n\tapp.factory('Events', ['EventsService', 'Event', 'Dom', function(EventsService, Event, Dom) {\n\n\t\tfunction Events(element) {\n\t\t\tvar events = this;\n\n\t\t\tthis.element = Dom.getElement(element);\n\t\t\tthis.listeners = {};\n\t\t\tthis.standardEvents = {\n\t\t\t\tclick: {\n\t\t\t\t\tkey: 'click',\n\t\t\t\t\tcallback: onClick\n\t\t\t\t},\n\t\t\t\tdown: {\n\t\t\t\t\tkey: 'mousedown',\n\t\t\t\t\tcallback: onMouseDown\n\t\t\t\t},\n\t\t\t\tmove: {\n\t\t\t\t\tkey: 'mousemove',\n\t\t\t\t\tcallback: onMouseMove\n\t\t\t\t},\n\t\t\t\tup: {\n\t\t\t\t\tkey: 'mouseup',\n\t\t\t\t\tcallback: onMouseUp\n\t\t\t\t},\n\t\t\t\tresize: {\n\t\t\t\t\tkey: 'resize',\n\t\t\t\t\tcallback: onResize\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis.touchEvents = {\n\t\t\t\tdown: {\n\t\t\t\t\tkey: 'touchstart',\n\t\t\t\t\tcallback: onTouchStart\n\t\t\t\t},\n\t\t\t\tmove: {\n\t\t\t\t\tkey: 'touchmove',\n\t\t\t\t\tcallback: onTouchMove\n\t\t\t\t},\n\t\t\t\tup: {\n\t\t\t\t\tkey: 'touchend',\n\t\t\t\t\tcallback: onTouchEnd\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis.wheelEvents = {\n\t\t\t\twheel: {\n\t\t\t\t\tkey: 'mousewheel',\n\t\t\t\t\tcallback: onMouseWheel\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis.scrollEvents = {\n\t\t\t\twheel: {\n\t\t\t\t\tkey: 'DOMMouseScroll',\n\t\t\t\t\tcallback: onMouseScroll\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis.timestamp = new Date().getTime();\n\t\t\tthis.setTimestamp = setTimestamp;\n\n\t\t\tfunction setTimestamp(event) {\n\t\t\t\tif (event) {\n\t\t\t\t\tevent.interval = Math.min(250, event.timestamp - events.timestamp);\n\t\t\t\t\t// console.log(event.interval, event.timestamp, events.timestamp);\n\t\t\t\t}\n\t\t\t\tevents.timestamp = new Date().getTime();\n\t\t\t}\n\n\t\t\tfunction onClick(e) {\n\t\t\t\t// console.log('onClick', e, events);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.click.apply(this, [event]);\n\t\t\t}\n\n\t\t\tfunction onMouseDown(e) {\n\t\t\t\t// console.log('onMouseDown', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.down.apply(this, [event]);\n\t\t\t\tevents.removeTouchEvents();\n\t\t\t}\n\n\t\t\tfunction onMouseMove(e) {\n\t\t\t\t// console.log('onMouseMove', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.move.apply(this, [event]);\n\t\t\t}\n\n\t\t\tfunction onMouseUp(e) {\n\t\t\t\t// console.log('onMouseUp', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.up.apply(this, [event]);\n\t\t\t}\n\n\t\t\tfunction onMouseWheel(e) {\n\t\t\t\t// console.log('onMouseWheel', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.wheel.apply(this, [event]);\n\t\t\t\tevents.removeScrollEvents();\n\t\t\t}\n\n\t\t\tfunction onMouseScroll(e) {\n\t\t\t\t// console.log('onMouseScroll', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.wheel.apply(this, [event]);\n\t\t\t\tevents.removeWheelEvents();\n\t\t\t}\n\n\t\t\tfunction onResize(e) {\n\t\t\t\t// console.log('onResize', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.resize.apply(this, [event]);\n\t\t\t}\n\n\t\t\tfunction onTouchStart(e) {\n\t\t\t\t// console.log('onTouchStart', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.down.apply(this, [event]);\n\t\t\t\tevents.removeStandardEvents();\n\t\t\t}\n\n\t\t\tfunction onTouchMove(e) {\n\t\t\t\t// console.log('onTouchMove', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.move.apply(this, [event]);\n\t\t\t}\n\n\t\t\tfunction onTouchEnd(e) {\n\t\t\t\t// console.log('onTouchEnd', e);\n\t\t\t\tvar event = new Event(e, events.element);\n\t\t\t\tevents.setTimestamp(event);\n\t\t\t\tevents.listeners.up.apply(this, [event]);\n\t\t\t}\n\t\t}\n\n\t\tvar statics = {\n\t\t\tgetTouch: getTouch,\n\t\t\tgetRelativeTouch: getRelativeTouch,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tadd: add,\n\t\t\tremove: remove,\n\t\t\tremoveStandardEvents: removeStandardEvents,\n\t\t\tremoveTouchEvents: removeTouchEvents,\n\t\t\tremoveWheelEvents: removeWheelEvents,\n\t\t\tremoveScrollEvents: removeScrollEvents,\n\t\t};\n\n\t\tangular.extend(Events, statics);\n\t\tangular.extend(Events.prototype, publics);\n\t\treturn Events;\n\n\t\t// prototype methods\n\n\t\tfunction add(listeners, scope) {\n\t\t\tvar events = this,\n\t\t\t\tstandard = this.standardEvents,\n\t\t\t\ttouch = this.touchEvents,\n\t\t\t\twheel = this.wheelEvents,\n\t\t\t\tscroll = this.scrollEvents;\n\t\t\tvar element = this.element,\n\t\t\t\twindowElement = angular.element(window);\n\n\t\t\tangular.forEach(listeners, function(callback, key) {\n\t\t\t\tif (events.listeners[key]) {\n\t\t\t\t\tvar listener = {};\n\t\t\t\t\tlistener[key] = events.listeners[key];\n\t\t\t\t\tremove(listener);\n\t\t\t\t}\n\t\t\t\tevents.listeners[key] = callback;\n\t\t\t\tif (standard[key]) {\n\t\t\t\t\tif (key === 'resize') {\n\t\t\t\t\t\twindowElement.on(standard[key].key, standard[key].callback);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.on(standard[key].key, standard[key].callback);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (touch[key]) {\n\t\t\t\t\telement.on(touch[key].key, touch[key].callback);\n\t\t\t\t}\n\t\t\t\tif (wheel[key]) {\n\t\t\t\t\telement.on(wheel[key].key, wheel[key].callback);\n\t\t\t\t}\n\t\t\t\tif (scroll[key]) {\n\t\t\t\t\telement.on(scroll[key].key, scroll[key].callback);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (scope) {\n\t\t\t\tscope.$on('$destroy', function() {\n\t\t\t\t\tevents.remove(listeners);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn events;\n\t\t}\n\n\t\tfunction remove(listeners) {\n\t\t\tvar events = this,\n\t\t\t\tstandard = this.standardEvents,\n\t\t\t\ttouch = this.touchEvents,\n\t\t\t\twheel = this.wheelEvents,\n\t\t\t\tscroll = this.scrollEvents;\n\t\t\tvar element = this.element,\n\t\t\t\twindowElement = angular.element(window);\n\t\t\tangular.forEach(listeners, function(callback, key) {\n\t\t\t\tif (standard[key]) {\n\t\t\t\t\tif (key === 'resize') {\n\t\t\t\t\t\twindowElement.off(standard[key].key, standard[key].callback);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.off(standard[key].key, standard[key].callback);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (touch[key]) {\n\t\t\t\t\telement.off(touch[key].key, touch[key].callback);\n\t\t\t\t}\n\t\t\t\tif (wheel[key]) {\n\t\t\t\t\telement.off(wheel[key].key, wheel[key].callback);\n\t\t\t\t}\n\t\t\t\tif (scroll[key]) {\n\t\t\t\t\telement.off(scroll[key].key, scroll[key].callback);\n\t\t\t\t}\n\t\t\t\tevents.listeners[key] = null;\n\t\t\t});\n\t\t\treturn events;\n\t\t}\n\n\t\tfunction removeStandardEvents() {\n\t\t\tvar events = this,\n\t\t\t\tstandard = events.standardEvents,\n\t\t\t\ttouch = events.touchEvents;\n\t\t\tvar element = events.element;\n\t\t\telement.off('mousedown', standard.down.callback);\n\t\t\telement.off('mousemove', standard.move.callback);\n\t\t\telement.off('mouseup', standard.up.callback);\n\t\t}\n\n\t\tfunction removeTouchEvents() {\n\t\t\tvar events = this,\n\t\t\t\tstandard = events.standardEvents,\n\t\t\t\ttouch = events.touchEvents;\n\t\t\tvar element = events.element;\n\t\t\telement.off('touchstart', touch.down.callback);\n\t\t\telement.off('touchmove', touch.move.callback);\n\t\t\telement.off('touchend', touch.up.callback);\n\t\t}\n\n\t\tfunction removeWheelEvents() {\n\t\t\tvar events = this;\n\t\t\tvar element = events.element;\n\t\t\telement.off('mousewheel', events.mouseEvents.wheel.callback);\n\t\t}\n\n\t\tfunction removeScrollEvents() {\n\t\t\tvar events = this;\n\t\t\tvar element = events.element;\n\t\t\telement.off('DOMMouseScroll', events.scrollEvents.wheel.callback);\n\t\t}\n\n\t\t// statics methods\n\n\t\tfunction getTouch(e, previous) {\n\t\t\tvar point = new Point();\n\t\t\tif (e.type === 'touchstart' || e.type === 'touchmove' || e.type === 'touchend' || e.type === 'touchcancel') {\n\t\t\t\tvar touch = null;\n\t\t\t\tvar event = e.originalEvent ? e.originalEvent : e;\n\t\t\t\tvar touches = event.touches.length ? event.touches : event.changedTouches;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\ttouch = touches[0];\n\t\t\t\t}\n\t\t\t\tif (touch) {\n\t\t\t\t\tpoint.x = touch.pageX;\n\t\t\t\t\tpoint.y = touch.pageY;\n\t\t\t\t}\n\t\t\t} else if (e.type === 'click' || e.type === 'mousedown' || e.type === 'mouseup' || e.type === 'mousemove' || e.type === 'mouseover' || e.type === 'mouseout' || e.type === 'mouseenter' || e.type === 'mouseleave' || e.type === 'contextmenu') {\n\t\t\t\tpoint.x = e.pageX;\n\t\t\t\tpoint.y = e.pageY;\n\t\t\t}\n\t\t\tif (previous) {\n\t\t\t\tpoint.s = Point.difference(t, previous);\n\t\t\t}\n\t\t\tpoint.type = e.type;\n\t\t\treturn point;\n\t\t}\n\n\t\tfunction getRelativeTouch(node, point) {\n\t\t\tnode = angular.isArray(node) ? node[0] : node;\n\t\t\treturn Point.difference(point, {\n\t\t\t\tx: node.offsetLeft,\n\t\t\t\ty: node.offsetTop\n\t\t\t});\n\t\t}\n\n    }]);\n\n\tapp.service('EventsService', ['Dom', function(Dom) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\thasPassiveEvents: hasPassiveEvents,\n\t\t\taddEventListener: getAddEventListener(),\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t// prevent history back on mac os\n\n\t\tpreventHistoryNavigation();\n\n\t\t// static methods\n\n\t\tfunction hasPassiveEvents() {\n\t\t\tvar supported = false;\n\t\t\tif (window.addEventListener) {\n\t\t\t\ttry {\n\t\t\t\t\tvar options = Object.defineProperty({}, 'passive', {\n\t\t\t\t\t\tget: function() {\n\t\t\t\t\t\t\tsupported = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\twindow.addEventListener('test', null, options);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('getAddEventListener.isSupprted', e);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn supported;\n\t\t}\n\n\t\tfunction getAddEventListener() {\n\t\t\tvar supported = hasPassiveEvents();\n\t\t\tif (!supported) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar defaults = {\n\t\t\t\tpassive: false,\n\t\t\t\tcapture: false,\n\t\t\t};\n\n\t\t\tfunction getModifiedAddEventListener(original) {\n\t\t\t\tfunction addEventListener(type, listener, options) {\n\t\t\t\t\tif (typeof options !== 'object') {\n\t\t\t\t\t\tvar capture = options === true;\n\t\t\t\t\t\toptions = angular.copy(defaults);\n\t\t\t\t\t\toptions.capture = capture;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions = angular.extend(angular.copy(defaults), options);\n\t\t\t\t\t}\n\t\t\t\t\toriginal.call(this, type, listener, options);\n\t\t\t\t}\n\t\t\t\treturn addEventListener;\n\t\t\t}\n\n\t\t\tvar original = EventTarget.prototype.addEventListener;\n\t\t\tvar modified = getModifiedAddEventListener(original);\n\t\t\tEventTarget.prototype.addEventListener = modified;\n\t\t\treturn modified;\n\t\t}\n\n\t\tfunction preventHistoryNavigation() {\n\t\t\tif (!Dom.ua.mac) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (Dom.ua.chrome || Dom.ua.safari || Dom.ua.firefox) {\n\t\t\t\twindow.addEventListener('mousewheel', onScroll, {\n\t\t\t\t\tpassive: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction onScroll(e) {\n\t\t\t\tif (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(e.deltaX < 0 && (Dom.getParents(e.target).filter(function(node) {\n\t\t\t\t\t\treturn node.scrollLeft > 0;\n\t\t\t\t\t}).length === 0)) ||\n\t\t\t\t\t(e.deltaX > 0 && (Dom.getParents(e.target).filter(function(node) {\n\t\t\t\t\t\treturn node.scrollWidth - node.scrollLeft > node.clientWidth;\n\t\t\t\t\t}).length === 0))\n\t\t\t\t) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular, app, Autolinker */\r\n(function() {\r\n\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.filter('notIn', ['$filter', function($filter) {\r\n\t\treturn function(array, filters, element) {\r\n\t\t\tif (filters) {\r\n\t\t\t\treturn $filter(\"filter\")(array, function(item) {\r\n\t\t\t\t\tfor (var i = 0; i < filters.length; i++) {\r\n\t\t\t\t\t\tif (filters[i][element] === item[element]) return false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('autolink', [function() {\r\n\t\treturn function(value) {\r\n\t\t\treturn Autolinker.link(value, {\r\n\t\t\t\tclassName: \"a-link\"\r\n\t\t\t});\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('shortName', ['$filter', function($filter) {\r\n\t\tfunction toTitleCase(str) {\r\n\t\t\treturn str.replace(/\\w\\S*/g, function(txt) {\r\n\t\t\t\treturn txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn function(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tif (value.indexOf(' .') === value.length - 2) {\r\n\t\t\t\tvalue = value.split(' .').join('');\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tvar splitted;\r\n\t\t\tif (value.indexOf('.') !== -1) {\r\n\t\t\t    splitted = value.split('.');\r\n\t\t\t} else {\r\n\t\t\t    splitted = value.split(' ');\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tvar splitted = value.split(' ');\r\n\t\t\tvar firstName = splitted.shift();\r\n\t\t\tif (splitted.length) {\r\n\t\t\t\tvar lastName = splitted.join(' ');\r\n\t\t\t\treturn firstName.substr(0, 1).toUpperCase() + '.' + toTitleCase(lastName);\r\n\t\t\t} else {\r\n\t\t\t\treturn firstName;\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customCurrency', ['$filter', function($filter) {\r\n\t\tvar legacyFilter = $filter('currency');\r\n\t\treturn function(cost, currency) {\r\n\t\t\treturn legacyFilter(cost * currency.ratio, currency.formatting);\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customSize', ['APP', function(APP) {\r\n\t\treturn function(inches) {\r\n\t\t\tif (APP.unit === APP.units.IMPERIAL) {\r\n\t\t\t\tvar feet = Math.floor(inches / 12);\r\n\t\t\t\tinches = inches % 12;\r\n\t\t\t\tinches = Math.round(inches * 10) / 10;\r\n\t\t\t\treturn (feet ? feet + '\\' ' : '') + (inches + '\\'\\'');\r\n\t\t\t} else {\r\n\t\t\t\tvar meters = Math.floor(inches * APP.size.ratio);\r\n\t\t\t\tvar cm = (inches * APP.size.ratio * 100) % 100;\r\n\t\t\t\tcm = Math.round(cm * 10) / 10;\r\n\t\t\t\treturn (meters ? meters + 'm ' : '') + (cm + 'cm');\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customWeight', ['APP', function(APP) {\r\n\t\treturn function(pounds) {\r\n\t\t\tif (APP.unit === APP.units.IMPERIAL) {\r\n\t\t\t\tif (pounds < 1) {\r\n\t\t\t\t\tvar oz = pounds * 16;\r\n\t\t\t\t\toz = Math.round(oz * 10) / 10;\r\n\t\t\t\t\treturn (oz ? oz + 'oz ' : '');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpounds = Math.round(pounds * 100) / 100;\r\n\t\t\t\t\treturn (pounds ? pounds + 'lb ' : '');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar kg = Math.floor(pounds * APP.weight.ratio / 1000);\r\n\t\t\t\tvar grams = (pounds * APP.weight.ratio) % 1000;\r\n\t\t\t\tgrams = Math.round(grams * 10) / 10;\r\n\t\t\t\treturn (kg ? kg + 'kg ' : '') + (grams + 'g');\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customNumber', ['$filter', function($filter) {\r\n\t\treturn function(value, precision, unit) {\r\n\t\t\tunit = unit || '';\r\n\t\t\t// return ((value || value === 0) ? $filter('number')(value, precision) + unit : '-');\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tif (Math.floor(value) === value) {\r\n\t\t\t\t\tprecision = 0;\r\n\t\t\t\t}\r\n\t\t\t\tvalue = $filter('number')(value, precision) + unit;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = '-';\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('reportNumber', ['$filter', function($filter) {\r\n\t\treturn function(value, precision, unit) {\r\n\t\t\tunit = unit || '';\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tvalue = $filter('number')(value, precision) + unit;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = '-';\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customHours', [function() {\r\n\t\treturn function(value) {\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tvar hours = Math.floor(value);\r\n\t\t\t\tvar minutes = Math.floor((value - hours) * 60);\r\n\t\t\t\tvar label = hours ? hours + ' H' : '';\r\n\t\t\t\tlabel += minutes ? ' ' + minutes + ' m' : '';\r\n\t\t\t\treturn label;\r\n\t\t\t} else {\r\n\t\t\t\treturn '-';\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customTimer', [function() {\r\n\t\tvar second = 1000;\r\n\t\tvar minute = second * 60;\r\n\t\tvar hour = minute * 60;\r\n\t\treturn function(value) {\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tvar hours = Math.floor(value / hour);\r\n\t\t\t\tvar minutes = Math.floor((value - hours * hour) / minute);\r\n\t\t\t\tvar seconds = Math.floor((value - hours * hour - minutes * minute) / second);\r\n\t\t\t\tvar label = hours ? hours + ' H' : '';\r\n\t\t\t\tlabel += minutes ? ' ' + minutes + ' m' : '';\r\n\t\t\t\tlabel += seconds ? ' ' + seconds + ' s' : '';\r\n\t\t\t\treturn label;\r\n\t\t\t} else {\r\n\t\t\t\treturn '-';\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customDigitalTimer', [function() {\r\n\t\tvar second = 1000;\r\n\t\tvar minute = second * 60;\r\n\t\tvar hour = minute * 60;\r\n\t\treturn function(value) {\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tvar hours = Math.floor(value / hour);\r\n\t\t\t\tvar minutes = Math.floor((value - hours * hour) / minute);\r\n\t\t\t\tvar seconds = Math.floor((value - hours * hour - minutes * minute) / second);\r\n\t\t\t\t// hours = hours % 24;\r\n\t\t\t\treturn (hours < 10 ? '0' : '') + hours + ':' + (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;\r\n\t\t\t} else {\r\n\t\t\t\treturn '-';\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customDigitalTime', [function() {\r\n\t\tvar second = 1000;\r\n\t\tvar minute = second * 60;\r\n\t\tvar hour = minute * 60;\r\n\t\treturn function(value) {\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tvar hours = Math.floor(value / hour);\r\n\t\t\t\tvar minutes = Math.floor((value - hours * hour) / minute);\r\n\t\t\t\t// hours = hours % 24;\r\n\t\t\t\treturn (hours < 10 ? '0' : '') + hours + ':' + (minutes < 10 ? '0' : '') + minutes;\r\n\t\t\t} else {\r\n\t\t\t\treturn '-';\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customDate', ['$filter', function($filter) {\r\n\t\tvar filter = $filter('date');\r\n\t\treturn function(value, format, timezone) {\r\n\t\t\treturn value ? filter(value, format, timezone) : '-';\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customTime', ['$filter', function($filter) {\r\n\t\treturn function(value, placeholder) {\r\n\t\t\tif (value) {\r\n\t\t\t\treturn Utils.parseTime(value);\r\n\t\t\t} else {\r\n\t\t\t\treturn (placeholder ? placeholder : '-');\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customDigital', ['$filter', function($filter) {\r\n\t\treturn function(value, placeholder) {\r\n\t\t\tif (value) {\r\n\t\t\t\treturn Utils.parseHour(value);\r\n\t\t\t} else {\r\n\t\t\t\treturn (placeholder ? placeholder : '-');\r\n\t\t\t}\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customString', ['$filter', function($filter) {\r\n\t\treturn function(value, placeholder) {\r\n\t\t\treturn value ? value : (placeholder ? placeholder : '-');\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('customEnum', function() {\r\n\t\treturn function(val) {\r\n\t\t\tval = val + 1;\r\n\t\t\treturn val < 10 ? '0' + val : val;\r\n\t\t};\r\n\t});\r\n\r\n\tapp.filter('groupBy', ['$parse', 'filterWatcher', function($parse, filterWatcher) {\r\n\t\tfunction _groupBy(collection, getter) {\r\n\t\t\tvar dict = {};\r\n\t\t\tvar key;\r\n\t\t\tangular.forEach(collection, function(item) {\r\n\t\t\t\tkey = getter(item);\r\n\t\t\t\tif (!dict[key]) {\r\n\t\t\t\t\tdict[key] = [];\r\n\t\t\t\t}\r\n\t\t\t\tdict[key].push(item);\r\n\t\t\t});\r\n\t\t\treturn dict;\r\n\t\t}\r\n\t\treturn function(collection, property) {\r\n\t\t\tif (!angular.isObject(collection) || angular.isUndefined(property)) {\r\n\t\t\t\treturn collection;\r\n\t\t\t}\r\n\t\t\treturn filterWatcher.isMemoized('groupBy', arguments) || filterWatcher.memoize('groupBy', arguments, this, _groupBy(collection, $parse(property)));\r\n\t\t};\r\n    }]);\r\n\r\n\tapp.filter('htmlToPlaintext', function() {\r\n\t\tfunction getStyle(n, p) {\r\n\t\t\treturn n.currentStyle ? n.currentStyle[p] : window.getComputedStyle(n, null).getPropertyValue(p);\r\n\t\t}\r\n\r\n\t\tfunction toText(node) {\r\n\t\t\tvar result = '';\r\n\t\t\tif (node.nodeType == document.TEXT_NODE) {\r\n\t\t\t\tvar nodeValue = node.nodeValue;\r\n\t\t\t\tresult = nodeValue;\r\n\t\t\t\tresult = result ? String(result).replace(/</gm, '&lt;') : '';\r\n\t\t\t\tresult = result ? String(result).replace(/>/gm, '&gt;') : '';\r\n\t\t\t} else if (node.nodeType == document.ELEMENT_NODE) {\r\n\t\t\t\tfor (var i = 0, j = node.childNodes.length; i < j; i++) {\r\n\t\t\t\t\tresult += toText(node.childNodes[i]);\r\n\t\t\t\t}\r\n\t\t\t\tvar display = getStyle(node, 'display');\r\n\t\t\t\tif (display.match(/^block/) || display.match(/list/) || display.match(/row/) || node.tagName == 'BR' || node.tagName == 'HR') {\r\n\t\t\t\t\tresult += '\\n<br>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn function(html) {\r\n\t\t\tconsole.log(html);\r\n\t\t\tvar div = document.createElement('div');\r\n\t\t\tdiv.innerHTML = html;\r\n\t\t\treturn toText(div);\r\n\t\t\t// return html ? String(html).replace(/<[^>]+>/gm, '') : '';\r\n\t\t};\r\n\t});\r\n\r\n}());\r\n\n/* global angular, firebase */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Point', [function() {\n\n\t\tfunction Point(x, y) {\n\t\t\tthis.x = x || 0;\n\t\t\tthis.y = y || 0;\n\t\t}\n\n\t\tvar statics = {\n\t\t\tdifference: PointDifference,\n\t\t\tmultiply: PointMultiply,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tclone: clone,\n\t\t\tcopy: copy,\n\t\t\tdifference: difference,\n\t\t\tmult: mult,\n\t\t\toffset: offset,\n\t\t\tsetPos: setPos,\n\t\t\tsetX: setX,\n\t\t\tsetY: setY,\n\t\t\ttoString: toString,\n\t\t};\n\n\t\tangular.extend(Point, statics);\n\t\tangular.extend(Point.prototype, publics);\n\n\t\treturn Point;\n\n\t\t// static methods\n\n\t\tfunction PointDifference(a, b) {\n\t\t\treturn new Point(a.x - b.x, a.y - b.y);\n\t\t}\n\n\t\tfunction PointMultiply(point, value) {\n\t\t\tpoint.x *= value;\n\t\t\tpoint.y *= value;\n\t\t\treturn point;\n\t\t}\n\n\t\t// prototype methods\n\n\t\tfunction clone() {\n\t\t\treturn new Point(this.x, this.y);\n\t\t}\n\n\t\tfunction copy(point) {\n\t\t\tthis.x = point.x;\n\t\t\tthis.y = point.y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction difference(b) {\n\t\t\treturn PointDifference(this, b);\n\t\t}\n\n\t\tfunction mult(value) {\n\t\t\treturn PointMultiply(this, value);\n\t\t}\n\n\t\tfunction offset(x, y) {\n\t\t\tthis.x += x;\n\t\t\tthis.y += y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setPos(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setX(x) {\n\t\t\tthis.x = x;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setY(y) {\n\t\t\tthis.y = y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction toString() {\n\t\t\treturn '{' + this.x + ',' + this.y + '}';\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular, firebase */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Rect', [function() {\n\n\t\tfunction Rect(x, y, w, h) {\n\t\t\tthis.x = x || 0;\n\t\t\tthis.y = y || 0;\n\t\t\tthis.w = w || 0;\n\t\t\tthis.h = h || 0;\n\t\t}\n\n\t\tvar statics = {\n\t\t\tmult: RectMultiply,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tbottom: bottom,\n\t\t\tbottomLeft: bottomLeft,\n\t\t\tbottomRight: bottomRight,\n\t\t\tcenter: center,\n\t\t\tclone: clone,\n\t\t\tcopy: copy,\n\t\t\texpand: expand,\n\t\t\texpandRect: expandRect,\n\t\t\tintersect: intersect,\n\t\t\tleft: left,\n\t\t\tmult: mult,\n\t\t\toffset: offset,\n\t\t\treduce: reduce,\n\t\t\treduceRect: reduceRect,\n\t\t\tright: right,\n\t\t\tsetH: setH,\n\t\t\tsetPos: setPos,\n\t\t\tsetSize: setSize,\n\t\t\tsetX: setX,\n\t\t\tsetY: setY,\n\t\t\tsetW: setW,\n\t\t\ttop: top,\n\t\t\ttopLeft: topLeft,\n\t\t\ttopRight: topRight,\n\t\t\ttoString: toString,\n\t\t};\n\n\t\tangular.extend(Rect, statics);\n\t\tangular.extend(Rect.prototype, publics);\n\n\t\treturn Rect;\n\n\t\t// static methods\n\n\t\tfunction RectMultiply(rect, value) {\n\t\t\trect.x *= value;\n\t\t\trect.y *= value;\n\t\t\trect.w *= value;\n\t\t\trect.h *= value;\n\t\t\treturn rect;\n\t\t}\n\n\t\t// prototype methods\n\n\t\tfunction bottom() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w / 2,\n\t\t\t\ty: y + h\n\t\t\t};\n\t\t}\n\n\t\tfunction bottomLeft() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y + h\n\t\t\t};\n\t\t}\n\n\t\tfunction bottomRight() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w,\n\t\t\t\ty: y + h\n\t\t\t};\n\t\t}\n\n\t\tfunction center() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w / 2,\n\t\t\t\ty: y + h / 2\n\t\t\t};\n\t\t}\n\n\t\tfunction clone() {\n\t\t\treturn new Rect(this.x, this.y, this.w, this.h);\n\t\t}\n\n\t\tfunction copy(rect) {\n\t\t\tthis.x = rect.x;\n\t\t\tthis.y = rect.y;\n\t\t\tthis.w = rect.w;\n\t\t\tthis.h = rect.h;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction expand(size) {\n\t\t\treturn this.expandRect({\n\t\t\t\tx: size,\n\t\t\t\ty: size,\n\t\t\t\tw: size * 2,\n\t\t\t\th: size * 2\n\t\t\t});\n\t\t}\n\n\t\tfunction expandRect(rect) {\n\t\t\tthis.x -= rect.x || 0;\n\t\t\tthis.y -= rect.y || 0;\n\t\t\tthis.w += rect.w || 0;\n\t\t\tthis.h += rect.h || 0;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction intersect(rect) {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn !(rect.x > x + w || rect.x + rect.w < x || rect.y > y + h || rect.y + rect.h < y);\n\t\t}\n\n\t\tfunction left() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y + h / 2\n\t\t\t};\n\t\t}\n\n\t\tfunction mult(value) {\n\t\t\treturn RectMultiply(this, value);\n\t\t}\n\n\t\tfunction offset(x, y) {\n\t\t\tthis.x += x;\n\t\t\tthis.y += y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction reduce(size) {\n\t\t\treturn this.offset(-size);\n\t\t}\n\n\t\tfunction reduceRect(rect) {\n\t\t\treturn this.offsetRect(RectMultiply(rect, -1));\n\t\t}\n\n\t\tfunction right() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w,\n\t\t\t\ty: y + h / 2\n\t\t\t};\n\t\t}\n\n\t\tfunction setH(h) {\n\t\t\tthis.h = h;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setPos(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setSize(w, h) {\n\t\t\tthis.w = w;\n\t\t\tthis.h = h;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setX(x) {\n\t\t\tthis.x = x;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setY(y) {\n\t\t\tthis.y = y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction setW(w) {\n\t\t\tthis.w = w;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction top() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w / 2,\n\t\t\t\ty: y\n\t\t\t};\n\t\t}\n\n\t\tfunction topLeft() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y\n\t\t\t};\n\t\t}\n\n\t\tfunction topRight() {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y,\n\t\t\t\tw = this.w,\n\t\t\t\th = this.h;\n\t\t\treturn {\n\t\t\t\tx: x + w,\n\t\t\t\ty: y\n\t\t\t};\n\t\t}\n\n\t\tfunction toString() {\n\t\t\treturn '{' + this.x + ',' + this.y + ',' + this.w + ',' + this.h + '}';\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular, firebase */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Vector', function() {\n\t\tfunction Vector(x, y) {\n\t\t\tthis.x = x || 0;\n\t\t\tthis.y = y || 0;\n\t\t}\n\n\t\tvar statics = {\n\t\t\tcross: VectorCross,\n\t\t\tdifference: VectorDifference,\n\t\t\tdistance: VectorDistance,\n\t\t\tincidence: VectorIncidence,\n\t\t\tmake: VectorMake,\n\t\t\tnormalize: VectorNormalize,\n\t\t\tpower: VectorPower,\n\t\t\tsize: VectorSize,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tadd: add,\n\t\t\tcopy: copy,\n\t\t\tcross: cross,\n\t\t\tdifference: difference,\n\t\t\tdistance: distance,\n\t\t\tfriction: friction,\n\t\t\tincidence: incidence,\n\t\t\tnormalize: normalize,\n\t\t\tpower: power,\n\t\t\tsize: size,\n\t\t\ttowards: towards,\n\t\t\ttoString: toString,\n\t\t};\n\n\t\tangular.extend(Vector, statics);\n\t\tangular.extend(Vector.prototype, publics);\n\n\t\treturn Vector;\n\n\t\t// statics methods\n\n\t\tfunction VectorCross(a, b) {\n\t\t\treturn (a.x * b.y) - (a.y * b.x);\n\t\t}\n\n\t\tfunction VectorDifference(a, b) {\n\t\t\treturn new Vector(a.x - b.x, a.y - b.y);\n\t\t}\n\n\t\tfunction VectorDistance(a, b) {\n\t\t\treturn Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\n\t\t}\n\n\t\tfunction VectorIncidence(a, b) {\n\t\t\tvar angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\n\t\t\treturn angle;\n\t\t}\n\n\t\tfunction VectorMake(a, b) {\n\t\t\treturn new Vector(b.x - a.x, b.y - a.y);\n\t\t}\n\n\t\tfunction VectorNormalize(a) {\n\t\t\tvar l = Vector.size(a);\n\t\t\ta.x /= l;\n\t\t\ta.y /= l;\n\t\t\treturn a;\n\t\t}\n\n\t\tfunction VectorPower(a, b) {\n\t\t\tvar x = Math.abs(b.x - a.x);\n\t\t\tvar y = Math.abs(b.y - a.y);\n\t\t\treturn (x + y) / 2;\n\t\t}\n\n\t\tfunction VectorSize(a) {\n\t\t\treturn Math.sqrt(a.x * a.x + a.y * a.y);\n\t\t}\n\n\t\t// prototype methods\n\n\t\tfunction add(b) {\n\t\t\tthis.x += b.x;\n\t\t\tthis.y += b.y;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction copy(b) {\n\t\t\treturn new Vector(this.x, this.y);\n\t\t}\n\n\t\tfunction cross(b) {\n\t\t\treturn VectorCross(this, b);\n\t\t}\n\n\t\tfunction difference(b) {\n\t\t\treturn VectorDifference(this, b);\n\t\t}\n\n\t\tfunction distance(b) {\n\t\t\treturn VectorDistance(this, b);\n\t\t}\n\n\t\tfunction friction(b) {\n\t\t\tthis.x *= b;\n\t\t\tthis.y *= b;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction incidence(b) {\n\t\t\treturn VectorIncidence(this, b);\n\t\t}\n\n\t\tfunction normalize() {\n\t\t\treturn VectorNormalize(this);\n\t\t}\n\n\t\tfunction power() {\n\t\t\treturn (Math.abs(this.x) + Math.abs(this.y)) / 2;\n\t\t}\n\n\t\tfunction size() {\n\t\t\treturn VectorSize(this);\n\t\t}\n\n\t\tfunction towards(b, friction) {\n\t\t\tfriction = friction || 0.125;\n\t\t\tthis.x += (b.x - this.x) * friction;\n\t\t\tthis.y += (b.y - this.y) * friction;\n\t\t\treturn this;\n\t\t}\n\n\t\tfunction toString() {\n\t\t\treturn '{' + this.x + ',' + this.y + '}';\n\t\t}\n\n\t});\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Hash', [function() {\n\t\tvar pools = {};\n\n\t\tfunction Hash(key, pool) {\n\t\t\tkey = key || 'id';\n\t\t\tpool = pool ? HashGet(pool) : {};\n\t\t\tObject.defineProperties(this, {\n\t\t\t\tkey: {\n\t\t\t\t\tvalue: key,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twritable: false\n\t\t\t\t},\n\t\t\t\tpool: {\n\t\t\t\t\tvalue: pool,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twritable: false\n\t\t\t\t},\n\t\t\t\tlength: {\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twritable: true\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar publics = {\n\t\t\thas: has,\n\t\t\tget: get,\n\t\t\tgetItem: getItem,\n\t\t\tset: set,\n\t\t\tadd: add,\n\t\t\tonce: once,\n\t\t\tremove: remove,\n\t\t\teach: each,\n\t\t\taddMany: addMany,\n\t\t\tremoveMany: removeMany,\n\t\t\tremoveAll: removeAll,\n\t\t\tforward: forward,\n\t\t\tbackward: backward,\n\t\t\tdiffers: differs,\n\t\t\tupdatePool: updatePool,\n\t\t};\n\n\t\tvar statics = {\n\t\t\tget: HashGet,\n\t\t};\n\n\t\tHash.prototype = new Array;\n\t\tangular.extend(Hash.prototype, publics);\n\t\tangular.extend(Hash, statics);\n\n\t\treturn Hash;\n\n\t\t// publics\n\t\tfunction has(id) {\n\t\t\treturn this.pool[id] !== undefined;\n\t\t}\n\n\t\tfunction get(id) {\n\t\t\treturn this.pool[id];\n\t\t}\n\n\t\tfunction getItem(item) {\n\t\t\tvar hash = this,\n\t\t\t\tkey = this.key;\n\t\t\treturn item ? hash.get(item[key]) : null;\n\t\t}\n\n\t\tfunction set(item) {\n\t\t\tvar hash = this,\n\t\t\t\tpool = this.pool,\n\t\t\t\tkey = this.key;\n\t\t\tpool[item[key]] = item;\n\t\t\thash.push(item);\n\t\t\treturn item;\n\t\t}\n\n\t\tfunction add(newItem) {\n\t\t\tvar hash = this;\n\t\t\tvar item = hash.getItem(newItem);\n\t\t\tif (item) {\n\t\t\t\tfor (var i = 0, keys = Object.keys(newItem), p; i < keys.length; i++) {\n\t\t\t\t\tp = keys[i];\n\t\t\t\t\titem[p] = newItem[p];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = hash.set(newItem);\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\n\t\tfunction once(newItem, callback) {\n\t\t\tvar hash = this;\n\t\t\tvar item = hash.getItem(newItem);\n\t\t\tif (!item) {\n\t\t\t\titem = hash.set(newItem);\n\t\t\t}\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\tcallback(item);\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\n\t\tfunction remove(oldItem) {\n\t\t\tvar hash = this,\n\t\t\t\tpool = this.pool,\n\t\t\t\tkey = this.key;\n\t\t\tvar item = hash.getItem(oldItem);\n\t\t\tif (item) {\n\t\t\t\tvar index = hash.indexOf(item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\thash.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tdelete pool[item[key]];\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction addMany(items) {\n\t\t\tvar hash = this;\n\t\t\tif (!items) {\n\t\t\t\treturn hash;\n\t\t\t}\n\t\t\tvar i = 0;\n\t\t\twhile (i < items.length) {\n\t\t\t\thash.add(items[i]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction removeMany(items) {\n\t\t\tvar hash = this;\n\t\t\tif (!items) {\n\t\t\t\treturn hash;\n\t\t\t}\n\t\t\tvar i = 0;\n\t\t\twhile (i < items.length) {\n\t\t\t\thash.remove(items[i]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction removeAll() {\n\t\t\tvar hash = this,\n\t\t\t\tkey = hash.key,\n\t\t\t\tpool = hash.pool;\n\t\t\tvar i = 0,\n\t\t\t\tt = hash.length,\n\t\t\t\titem;\n\t\t\twhile (hash.length) {\n\t\t\t\titem = hash.shift();\n\t\t\t\tdelete pool[item[key]];\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction each(callback) {\n\t\t\tvar hash = this;\n\t\t\tif (callback) {\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (i < hash.length) {\n\t\t\t\t\tcallback(hash[i], i);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction forward(key, reverse) {\n\t\t\tvar hash = this,\n\t\t\t\tkey = (key || this.key);\n\t\t\thash.sort(function(c, d) {\n\t\t\t\tvar a = reverse ? d : c;\n\t\t\t\tvar b = reverse ? c : d;\n\t\t\t\treturn a[key] - b[key];\n\t\t\t});\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction backward(key) {\n\t\t\treturn this.forward(key, true);\n\t\t}\n\n\t\tfunction differs(hash) {\n\t\t\tif (hash.key !== this.key || hash.length !== this.length) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tvar differs = false,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tt = this.length,\n\t\t\t\t\tkey = this.key;\n\t\t\t\twhile (differs && i < t) {\n\t\t\t\t\tdiffers = this[i][key] !== hash[i][key];\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction updatePool() {\n\t\t\tvar hash = this,\n\t\t\t\tpool = this.pool,\n\t\t\t\tkey = this.key;\n\t\t\tObject.keys(pool).forEach(function(key) {\n\t\t\t\tdelete pool[key];\n\t\t\t});\n\t\t\tangular.forEach(hash, function(item) {\n\t\t\t\tpool[item[key]] = item;\n\t\t\t});\n\t\t}\n\n\t\t// statics\n\t\tfunction HashGet(pool) {\n\t\t\treturn pools[pool] = (pools[pool] || {});\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('$promise', ['$q', function($q) {\n\n\t\tfunction $promise(callback) {\n\t\t\tif (typeof callback !== 'function') {\n\t\t\t\tthrow ('promise resolve callback missing');\n\t\t\t}\n\t\t\tvar deferred = $q.defer();\n\t\t\tcallback(deferred);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tvar statics = {\n\t\t\tall: $promiseAll,\n\t\t};\n\n\t\tvar publics = {};\n\n\t\tangular.extend($promise, statics);\n\t\tangular.extend($promise.prototype, publics);\n\n\t\treturn $promise;\n\n\t\tfunction $promiseAll(promises) {\n\t\t\treturn $q.all(promises);\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('State', ['$timeout', '$rootScope', function($timeout, $rootScope) {\n\n\t\tfunction State() {\n\t\t\tthis.idle();\n\t\t}\n\n\t\tvar DELAY = 2000;\n\n\t\tvar statics = {};\n\n\t\tvar publics = {\n\t\t\tbusy: busy,\n\t\t\tclasses: classes,\n\t\t\tenabled: enabled,\n\t\t\terror: error,\n\t\t\terrorMessage: errorMessage,\n\t\t\terrors: [],\n\t\t\tidle: idle,\n\t\t\tlabels: labels,\n\t\t\tready: ready,\n\t\t\tsubmitClass: submitClass,\n\t\t\tsuccess: success,\n\t\t};\n\n\t\tangular.extend(State, statics);\n\t\tangular.extend(State.prototype, publics);\n\n\t\treturn State;\n\n\t\t// static methods\n\n\t\t// publics methods\n\n\t\tfunction busy() {\n\t\t\tvar state = this;\n\t\t\tif (!state.isBusy) {\n\t\t\t\tstate.isBusy = true;\n\t\t\t\tstate.isError = false;\n\t\t\t\tstate.isErroring = false;\n\t\t\t\tstate.isSuccess = false;\n\t\t\t\tstate.isSuccessing = false;\n\t\t\t\tstate.errors = [];\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfunction classes(addons) {\n\t\t\tvar state = this,\n\t\t\t\tclasses = null;\n\t\t\tclasses = {\n\t\t\t\tready: state.isReady,\n\t\t\t\tbusy: state.isBusy,\n\t\t\t\tsuccessing: state.isSuccessing,\n\t\t\t\tsuccess: state.isSuccess,\n\t\t\t\terrorring: state.isErroring,\n\t\t\t\terror: state.isError,\n\t\t\t};\n\t\t\tif (addons) {\n\t\t\t\tangular.forEach(addons, function(value, key) {\n\t\t\t\t\tclasses[value] = classes[key];\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\tfunction enabled() {\n\t\t\tvar state = this;\n\t\t\treturn !state.isBusy && !state.isErroring && !state.isSuccessing;\n\t\t}\n\n\t\tfunction error(error) {\n\t\t\tconsole.log('State.error', error);\n\t\t\tvar state = this;\n\t\t\tstate.isBusy = false;\n\t\t\tstate.isError = true;\n\t\t\tstate.isErroring = true;\n\t\t\tstate.isSuccess = false;\n\t\t\tstate.isSuccessing = false;\n\t\t\tstate.errors.push(error);\n\t\t\t$timeout(function() {\n\t\t\t\tstate.isErroring = false;\n\t\t\t}, DELAY);\n\t\t}\n\n\t\tfunction errorMessage() {\n\t\t\tvar state = this;\n\t\t\treturn state.isError ? state.errors[state.errors.length - 1] : null;\n\t\t}\n\n\t\tfunction idle() {\n\t\t\tvar state = this;\n\t\t\tstate.isBusy = false;\n\t\t\tstate.isError = false;\n\t\t\tstate.isErroring = false;\n\t\t\tstate.isSuccess = false;\n\t\t\tstate.isSuccessing = false;\n\t\t\tstate.button = null;\n\t\t\tstate.errors = [];\n\t\t}\n\n\t\tfunction labels(addons) {\n\t\t\tvar state = this;\n\t\t\tvar defaults = {\n\t\t\t\tready: 'submit',\n\t\t\t\tbusy: 'sending',\n\t\t\t\terror: 'error',\n\t\t\t\tsuccess: 'success',\n\t\t\t};\n\t\t\tif (addons) {\n\t\t\t\tangular.extend(defaults, addons);\n\t\t\t}\n\t\t\tvar label = defaults.ready;\n\t\t\tif (state.isBusy) {\n\t\t\t\tlabel = defaults.busy;\n\t\t\t} else if (state.isSuccess) {\n\t\t\t\tlabel = defaults.success;\n\t\t\t} else if (state.isError) {\n\t\t\t\tlabel = defaults.error;\n\t\t\t}\n\t\t\treturn label;\n\t\t}\n\n\t\tfunction ready() {\n\t\t\tvar state = this;\n\t\t\tstate.idle();\n\t\t\tstate.isReady = true;\n\t\t\t$rootScope.$broadcast('$stateReady', state);\n\t\t}\n\n\t\tfunction submitClass() {\n\t\t\tvar state = this;\n\t\t\treturn {\n\t\t\t\tbusy: state.isBusy,\n\t\t\t\tready: state.isReady,\n\t\t\t\tsuccessing: state.isSuccessing,\n\t\t\t\tsuccess: state.isSuccess,\n\t\t\t\terrorring: state.isErroring,\n\t\t\t\terror: state.isError,\n\t\t\t};\n\t\t}\n\n\t\tfunction success() {\n\t\t\tvar state = this;\n\t\t\tstate.isBusy = false;\n\t\t\tstate.isError = false;\n\t\t\tstate.isErroring = false;\n\t\t\tstate.isSuccess = true;\n\t\t\tstate.isSuccessing = true;\n\t\t\tstate.errors = [];\n\t\t\t$timeout(function() {\n\t\t\t\tstate.isSuccessing = false;\n\t\t\t}, DELAY);\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar transformProperty = detectTransformProperty();\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Style', [function() {\n\n\t\tfunction Style() {\n\t\t\tthis.props = {\n\t\t\t\tscale: 1,\n\t\t\t\thoverScale: 1,\n\t\t\t\tcurrentScale: 1,\n\t\t\t};\n\t\t}\n\n\t\tvar statics = {};\n\n\t\tvar publics = {\n\t\t\tset: set,\n\t\t\ttransform: transform,\n\t\t\ttransformOrigin: transformOrigin,\n\t\t};\n\n\t\tangular.extend(Style, statics);\n\t\tangular.extend(Style.prototype, publics);\n\n\t\treturn Style;\n\n\t\t// static methods\n\n\t\t// prototype methods\n\n\t\tfunction set(element) {\n\t\t\tvar styles = [];\n\t\t\tfor (var key in this) {\n\t\t\t\tif (key !== 'props') {\n\t\t\t\t\tstyles.push(key + ':' + this[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telement.style.cssText = styles.join(';') + ';';\n\t\t}\n\n\t\tfunction transform(transform) {\n\t\t\tthis[transformProperty] = transform;\n\t\t}\n\n\t\tfunction transformOrigin(x, y) {\n\t\t\tthis[transformProperty + '-origin-x'] = (Math.round(x * 1000) / 1000) + '%';\n\t\t\tthis[transformProperty + '-origin-y'] = (Math.round(y * 1000) / 1000) + '%';\n\t\t}\n\n    }]);\n\n\tfunction detectTransformProperty() {\n\t\tvar transformProperty = 'transform',\n\t\t\tsafariPropertyHack = 'webkitTransform';\n\t\tvar div = document.createElement(\"DIV\");\n\t\tif (typeof div.style[transformProperty] !== 'undefined') {\n            ['webkit', 'moz', 'o', 'ms'].every(function(prefix) {\n\t\t\t\tvar e = '-' + prefix + '-transform';\n\t\t\t\tif (typeof div.style[e] !== 'undefined') {\n\t\t\t\t\ttransformProperty = e;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t} else if (typeof div.style[safariPropertyHack] !== 'undefined') {\n\t\t\ttransformProperty = '-webkit-transform';\n\t\t} else {\n\t\t\ttransformProperty = undefined;\n\t\t}\n\t\treturn transformProperty;\n\t}\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Utils', ['$compile', '$controller', 'Vector', function($compile, $controller, Vector) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tcompileController: compileController,\n\t\t\textract: extract,\n\t\t\tformat: format,\n\t\t\tindexOf: indexOf,\n\t\t\treducer: reducer,\n\t\t\treducerAdder: reducerAdder,\n\t\t\treducerSetter: reducerSetter,\n\t\t\tremoveValue: removeValue,\n\t\t\treverseSortOn: reverseSortOn,\n\t\t\tthrottle: throttle,\n\t\t\ttoMd5: toMd5,\n\t\t\twhere: where,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\tvar getNow = Date.now || function() {\n\t\t\treturn new Date().getTime();\n\t\t};\n\n\t\tfunction compileController(scope, element, html, data) {\n\t\t\t// console.log('Utils.compileController', element);\n\t\t\telement.html(html);\n\t\t\tvar link = $compile(element.contents());\n\t\t\tif (data.controller) {\n\t\t\t\tvar $scope = scope.$new();\n\t\t\t\tangular.extend($scope, data);\n\t\t\t\tvar controller = $controller(data.controller, {\n\t\t\t\t\t$scope: $scope\n\t\t\t\t});\n\t\t\t\tif (data.controllerAs) {\n\t\t\t\t\tscope[data.controllerAs] = controller;\n\t\t\t\t}\n\t\t\t\telement.data('$ngControllerController', controller);\n\t\t\t\telement.children().data('$ngControllerController', controller);\n\t\t\t\tscope = $scope;\n\t\t\t}\n\t\t\tlink(scope);\n\t\t}\n\n\t\tfunction extract(obj, value) {\n\t\t\treturn Object.keys(obj)[Object.values(obj).indexOf(value)];\n\t\t}\n\n\t\tfunction format(string, prepend, expression) {\n\t\t\tstring = string || '';\n\t\t\tprepend = prepend || '';\n\t\t\tvar splitted = string.split(',');\n\t\t\tif (splitted.length > 1) {\n\t\t\t\tvar formatted = splitted.shift();\n\t\t\t\tangular.forEach(splitted, function(value, index) {\n\t\t\t\t\tif (expression) {\n\t\t\t\t\t\tformatted = formatted.split('{' + index + '}').join('\\' + ' + prepend + value + ' + \\'');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tformatted = formatted.split('{' + index + '}').join(prepend + value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (expression) {\n\t\t\t\t\treturn '\\'' + formatted + '\\'';\n\t\t\t\t} else {\n\t\t\t\t\treturn formatted;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn prepend + string;\n\t\t\t}\n\t\t}\n\n\t\tfunction indexOf(array, object, key) {\n\t\t\tkey = key || 'id';\n\t\t\tvar index = -1;\n\t\t\tif (array) {\n\t\t\t\tvar i = 0,\n\t\t\t\t\tt = array.length;\n\t\t\t\twhile (i < t) {\n\t\t\t\t\tif (array[i] && array[i][key] === object[key]) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn index;\n\t\t}\n\n\t\tfunction reducer(o, key) {\n\t\t\treturn o[key];\n\t\t}\n\n\t\tfunction reducerAdder(o, key, value) {\n\t\t\tif (typeof key == 'string') {\n\t\t\t\treturn reducerAdder(o, key.split('.'), value);\n\t\t\t} else if (key.length == 1 && value !== undefined) {\n\t\t\t\treturn (o[key[0]] += value);\n\t\t\t} else if (key.length === 0) {\n\t\t\t\treturn o;\n\t\t\t} else {\n\t\t\t\treturn reducerAdder(o[key[0]], key.slice(1), value);\n\t\t\t}\n\t\t}\n\n\t\tfunction reducerSetter(o, key, value) {\n\t\t\tif (typeof key == 'string') {\n\t\t\t\treturn reducerSetter(o, key.split('.'), value);\n\t\t\t} else if (key.length == 1 && value !== undefined) {\n\t\t\t\treturn (o[key[0]] = value);\n\t\t\t} else if (key.length === 0) {\n\t\t\t\treturn o;\n\t\t\t} else {\n\t\t\t\treturn reducerSetter(o[key[0]], key.slice(1), value);\n\t\t\t}\n\t\t}\n\n\t\tfunction removeValue(array, value) {\n\t\t\tvar index = -1;\n\t\t\tif (array) {\n\t\t\t\tvar i = 0,\n\t\t\t\t\tt = array.length;\n\t\t\t\twhile (i < t) {\n\t\t\t\t\tif (array[i] === value) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (index !== -1) {\n\t\t\t\tarray.splice(index, 1);\n\t\t\t\treturn value;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tfunction reverseSortOn(key) {\n\t\t\treturn function(a, b) {\n\t\t\t\tif (a[key] < b[key]) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (a[key] > b[key]) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\t// a must be equal to b\n\t\t\t\treturn 0;\n\t\t\t};\n\t\t}\n\n\t\tfunction throttle(func, wait, options) {\n\t\t\t// Returns a function, that, when invoked, will only be triggered at most once\n\t\t\t// during a given window of time. Normally, the throttled function will run\n\t\t\t// as much as it can, without ever going more than once per `wait` duration;\n\t\t\t// but if you'd like to disable the execution on the leading edge, pass\n\t\t\t// `{leading: false}`. To disable execution on the trailing edge, ditto.\n\t\t\tvar context, args, result;\n\t\t\tvar timeout = null;\n\t\t\tvar previous = 0;\n\t\t\tif (!options) options = {};\n\t\t\tvar later = function() {\n\t\t\t\tprevious = options.leading === false ? 0 : getNow();\n\t\t\t\ttimeout = null;\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tif (!timeout) context = args = null;\n\t\t\t};\n\t\t\treturn function() {\n\t\t\t\tvar now = getNow();\n\t\t\t\tif (!previous && options.leading === false) previous = now;\n\t\t\t\tvar remaining = wait - (now - previous);\n\t\t\t\tcontext = this;\n\t\t\t\targs = arguments;\n\t\t\t\tif (remaining <= 0 || remaining > wait) {\n\t\t\t\t\tif (timeout) {\n\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t}\n\t\t\t\t\tprevious = now;\n\t\t\t\t\tresult = func.apply(context, args);\n\t\t\t\t\tif (!timeout) context = args = null;\n\t\t\t\t} else if (!timeout && options.trailing !== false) {\n\t\t\t\t\ttimeout = setTimeout(later, remaining);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\n\t\tfunction toMd5(string) {\n\t\t\t// return Md5.encode(string);\n\t\t}\n\n\t\tfunction where(array, query) {\n\t\t\tvar found = null;\n\t\t\tif (array) {\n\t\t\t\tangular.forEach(array, function(item) {\n\t\t\t\t\tvar has = true;\n\t\t\t\t\tangular.forEach(query, function(value, key) {\n\t\t\t\t\t\thas = has && item[key] === value;\n\t\t\t\t\t});\n\t\t\t\t\tif (has) {\n\t\t\t\t\t\tfound = item;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn found;\n\t\t}\n\n    }]);\n\n\t(function() {\n\t\t// POLYFILL Array.prototype.reduce\n\t\t// Production steps of ECMA-262, Edition 5, 15.4.4.21\n\t\t// Reference: http://es5.github.io/#x15.4.4.21\n\t\t// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n\t\tif (typeof Array.prototype.reduce !== 'function') {\n\t\t\tObject.defineProperty(Array.prototype, 'reduce', {\n\t\t\t\tvalue: function(callback) { // , initialvalue\n\t\t\t\t\tif (this === null) {\n\t\t\t\t\t\tthrow new TypeError('Array.prototype.reduce called on null or undefined');\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof callback !== 'function') {\n\t\t\t\t\t\tthrow new TypeError(callback + ' is not a function');\n\t\t\t\t\t}\n\t\t\t\t\tvar o = Object(this);\n\t\t\t\t\tvar len = o.length >>> 0;\n\t\t\t\t\tvar k = 0;\n\t\t\t\t\tvar value;\n\t\t\t\t\tif (arguments.length == 2) {\n\t\t\t\t\t\tvalue = arguments[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\twhile (k < len && !(k in o)) {\n\t\t\t\t\t\t\tk++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (k >= len) {\n\t\t\t\t\t\t\tthrow new TypeError('Reduce of empty array with no initial value');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue = o[k++];\n\t\t\t\t\t}\n\t\t\t\t\twhile (k < len) {\n\t\t\t\t\t\tif (k in o) {\n\t\t\t\t\t\t\tvalue = callback(value, o[k], k, o);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tk++;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}());\n\n\t(function() {\n\t\t// POLYFILL Object.values\n\t\tif (typeof Object.values !== 'function') {\n\t\t\tObject.defineProperty(Object, 'values', {\n\t\t\t\tvalue: function(obj) {\n\t\t\t\t\tvar vals = [];\n\t\t\t\t\tfor (var key in obj) {\n\t\t\t\t\t\tif (has(obj, key) && isEnumerable(obj, key)) {\n\t\t\t\t\t\t\tvals.push(obj[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn vals;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}());\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.provider('environment', ['$locationProvider', '$httpProvider', function($locationProvider, $httpProvider) {\n\n\t\tvar provider = this;\n\n\t\tvar statics = {\n\t\t\tadd: EnvironmentAdd,\n\t\t\tuse: EnvironmentUse,\n\t\t};\n\n\t\tangular.extend(provider, statics);\n\n\t\tvar defaults = {\n\t\t\tplugins: {\n\t\t\t\tfacebook: {\n\t\t\t\t\tfields: 'id,name,first_name,last_name,email,gender,picture,cover,link',\n\t\t\t\t\tscope: 'public_profile, email', // publish_stream\n\t\t\t\t\tversion: 'v2.10',\n\t\t\t\t},\n\t\t\t\tgoogle: {},\n\t\t\t\tgooglemaps: {\n\t\t\t\t\tclusterer: true,\n\t\t\t\t\tstyles: '/googlemaps/applemapesque.json',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcenter: {\n\t\t\t\t\t\t\tlat: 43.9023386,\n\t\t\t\t\t\t\tlng: 12.8505094\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdisableDefaultUI: true,\n\t\t\t\t\t\tmapTypeId: 'roadmap', // \"hybrid\", \"roadmap\", \"satellite\", \"terrain\"\n\t\t\t\t\t\tscrollwheel: true,\n\t\t\t\t\t\t// tilt: 0, // 45\n\t\t\t\t\t\tzoom: 4.0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmapbox: {\n\t\t\t\t\tclusterer: true,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tbearing: 0.0,\n\t\t\t\t\t\tcenter: [\n                            12.8505094,\n                            43.9023386\n                        ],\n\t\t\t\t\t\tcurve: 1,\n\t\t\t\t\t\tpitch: 0.0,\n\t\t\t\t\t\tspeed: 1.5,\n\t\t\t\t\t\tzoom: 4.0,\n\t\t\t\t\t},\n\t\t\t\t\tversion: 'v0.42.0',\n\t\t\t\t}\n\t\t\t},\n\t\t\thttp: {\n\t\t\t\tinterceptors: [], // ['AuthService'],\n\t\t\t\twithCredentials: false,\n\t\t\t},\n\t\t\tlanguage: {\n\t\t\t\tcode: 'en',\n\t\t\t\tculture: 'en_US',\n\t\t\t\tiso: 'ENU',\n\t\t\t\tname: 'English',\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thash: '!',\n\t\t\t\thtml5: false,\n\t\t\t},\n\t\t\tpaths: {},\n\t\t};\n\n\t\tvar global = {};\n\n\t\tif (window.environment) {\n\t\t\tangular.merge(global, window.environment);\n\t\t}\n\n\t\tvar config = {};\n\n\t\tvar environment = angular.copy(defaults);\n\t\tangular.merge(environment, global);\n\n\t\tfunction EnvironmentSetHttp() {\n\t\t\t$httpProvider.defaults.headers.common[\"Accept-Language\"] = environment.language.code;\n\t\t\t$httpProvider.defaults.withCredentials = environment.http.withCredentials;\n\t\t\t$httpProvider.interceptors.push.apply($httpProvider.interceptors, environment.http.interceptors);\n\t\t}\n\n\t\tfunction EnvironmentSetLocation() {\n\t\t\t$locationProvider.html5Mode(environment.location.html5);\n\t\t\t$locationProvider.hashPrefix(environment.location.hash);\n\t\t}\n\n\t\tfunction EnvironmentAdd(key, data) {\n\t\t\tconfig[key] = config[key] ? angular.merge(config[key], data) : data;\n\t\t\tEnvironmentSet();\n\t\t}\n\n\t\tfunction EnvironmentSet() {\n\t\t\tenvironment = angular.copy(defaults);\n\t\t\tif (config.environment) {\n\t\t\t\tangular.merge(environment, config.environment);\n\t\t\t}\n\t\t\tvar value = EnvironmentGet();\n\t\t\tif (value) {\n\t\t\t\tangular.merge(environment, value);\n\t\t\t}\n\t\t\tangular.merge(environment, global);\n\t\t\tEnvironmentSetHttp();\n\t\t\tEnvironmentSetLocation();\n\t\t}\n\n\t\tfunction EnvironmentUse(key) {\n\t\t\tif (config[key]) {\n\t\t\t\tenvironment = angular.copy(defaults);\n\t\t\t\tangular.merge(environment, config[key]);\n\t\t\t\tangular.merge(environment, global);\n\t\t\t\tEnvironmentSetHttp();\n\t\t\t\tEnvironmentSetLocation();\n\t\t\t}\n\t\t}\n\n\t\tfunction EnvironmentGet() {\n\t\t\tfor (var key in config) {\n\t\t\t\tvar value = config[key];\n\t\t\t\tif (value.paths && window.location.href.indexOf(value.paths.app) !== -1) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprovider.$get = function() {\n\t\t\treturn environment;\n\t\t};\n\n    }]);\n\n}());\n\n/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.factory('Doc', ['Api', '$promise', function(Api, $promise) {\r\n\r\n\t\tfunction Doc(item) {\r\n\t\t\tif (item) {\r\n\t\t\t\tangular.extend(this, item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar statics = {};\r\n\r\n\t\tvar publics = {};\r\n\r\n\t\tangular.extend(Doc, statics);\r\n\t\tangular.extend(Doc.prototype, publics);\r\n\r\n\t\treturn Doc;\r\n\r\n\t\t// static methods\r\n\r\n\t\t// prototype methods\r\n\r\n    }]);\r\n\r\n}());\r\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Route', ['$promise', '$location', '$route', '$routeParams', 'Router', function($promise, $location, $route, $routeParams, Router) {\n\n\t\tfunction Route(current) {\n\n\t\t\tvar route = {\n\t\t\t\tcontroller: current.$$route.controller,\n\t\t\t\tparams: current.params,\n\t\t\t\tpath: $location.path(),\n\t\t\t\tpathParams: current.pathParams,\n\t\t\t\toriginalPath: current.$$route.originalPath,\n\t\t\t\ttemplateUrl: current.loadedTemplateUrl,\n\t\t\t};\n\t\t\tangular.extend(this, route);\n\t\t}\n\n\t\tvar statics = {\n\t\t\tcurrent: RouteCurrent,\n\t\t};\n\n\t\tvar publics = {};\n\n\t\tangular.extend(Route, statics);\n\t\tangular.extend(Route.prototype, publics);\n\n\t\treturn Route;\n\n\t\t// static methods\n\n\t\tfunction RouteCurrent() {\n\t\t\treturn new Route($route.current);\n\t\t}\n\n\t\t// prototype methods\n\n    }]);\n\n}());\n\n/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.factory('View', ['Api', '$promise', 'environment', 'Doc', 'Route', function(Api, $promise, environment, Doc, Route) {\r\n\r\n\t\tfunction View(doc, route) {\r\n\t\t\tvar view = {\r\n\t\t\t\tdoc: doc,\r\n\t\t\t\tenvironment: environment,\r\n\t\t\t\troute: route,\r\n\t\t\t};\r\n\t\t\tangular.extend(this, view);\r\n\t\t}\r\n\r\n\t\tvar statics = {\r\n\t\t\tcurrent: ViewCurrent, // ViewCurrentSimple\r\n\t\t};\r\n\r\n\t\tvar publics = {};\r\n\r\n\t\tangular.extend(View, statics);\r\n\t\tangular.extend(View.prototype, publics);\r\n\r\n\t\treturn View;\r\n\r\n\t\t// static methods\r\n\r\n\t\tfunction ViewCurrent() {\r\n\t\t\treturn $promise(function(promise) {\r\n\t\t\t\tvar route = Route.current();\r\n\t\t\t\tvar path = route.path;\r\n\t\t\t\tconsole.log('ViewCurrent', path);\r\n\t\t\t\tApi.docs.path(path).then(function(response) {\r\n\t\t\t\t\tvar doc = new Doc(response);\r\n\t\t\t\t\tvar view = new View(doc, route);\r\n\t\t\t\t\tpromise.resolve(view);\r\n\r\n\t\t\t\t}, function(error) {\r\n\t\t\t\t\tpromise.reject(error);\r\n\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction ViewCurrentSimple() {\r\n\t\t\treturn $promise(function(promise) {\r\n\t\t\t\tconsole.log('ViewCurrentSimple');\r\n\t\t\t\tvar route = Route.current();\r\n\t\t\t\tvar path = route.path;\r\n\t\t\t\tApi.navs.main().then(function(items) {\r\n\t\t\t\t\tvar doc = null,\r\n\t\t\t\t\t\tview = null,\r\n\t\t\t\t\t\tpath = path,\r\n\t\t\t\t\t\tpool = ViewPool(items);\r\n\t\t\t\t\tvar item = pool[path];\r\n\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\tdoc = new Doc(item);\r\n\t\t\t\t\t\tview = new View(doc, route);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpromise.resolve(view);\r\n\r\n\t\t\t\t}, function(error) {\r\n\t\t\t\t\tpromise.reject(error);\r\n\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction ViewPool(items) {\r\n\t\t\tvar pool = {};\r\n\r\n\t\t\tfunction _getPool(items) {\r\n\t\t\t\tif (items) {\r\n\t\t\t\t\tangular.forEach(items, function(item) {\r\n\t\t\t\t\t\tpool[item.path] = item;\r\n\t\t\t\t\t\t_getPool(item.items);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_getPool(items);\r\n\t\t\treturn pool;\r\n\t\t}\r\n\r\n\t\t// prototype methods\r\n\r\n    }]);\r\n\r\n}());\r\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\t// todo\n\n\tapp.service('AuthService', ['$q', '$rootScope', '$location', 'LocalStorage', 'environment', function($q, $rootScope, $location, LocalStorage, environment) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tisAuthorizedOrGoTo: isAuthorizedOrGoTo,\n\t\t\tisAuthorized: isAuthorized,\n\t\t\trequest: request,\n\t\t\tresponse: response,\n\t\t\tresponseError: responseError,\n\t\t\tsignOut: signOut,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t/* * * * * * * * * * * * * * * * *\n\t\t *  detect current auth storage  *\n\t\t * * * * * * * * * * * * * * * * */\n\n\t\tconsole.log(environment.plugins);\n\n\t\t// statics methods\n\n\t\tfunction isAuthorizedOrGoTo(redirect) {\n\t\t\tvar deferred = $q.defer();\n\t\t\tvar auth = LocalStorage.get('authorization');\n\t\t\tif (auth && auth.created_at + auth.expires_in < new Date().getTime()) {\n\t\t\t\tdeferred.resolve(auth);\n\t\t\t} else {\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tstatus: 'unauthorized'\n\t\t\t\t});\n\t\t\t\t$location.path(redirect);\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tfunction isAuthorized() {\n\t\t\tvar auth = LocalStorage.get('authorization');\n\t\t\treturn (auth && auth.created_at + auth.expires_in < new Date().getTime());\n\t\t}\n\n\t\tfunction request(config) {\n\t\t\tvar auth = LocalStorage.get('authorization');\n\t\t\tif (auth && auth.created_at + auth.expires_in < new Date().getTime()) {\n\t\t\t\tconfig.headers = config.headers || {};\n\t\t\t\tconfig.headers.Authorization = 'Bearer ' + auth.access_token; // add your token from your service or whatever\n\t\t\t}\n\t\t\treturn config;\n\t\t}\n\n\t\tfunction response(response) {\n\t\t\treturn response || $q.when(response);\n\t\t}\n\n\t\tfunction responseError(error) {\n\t\t\tconsole.log('AuthService.responseError', error);\n\t\t\t// your error handler\n\t\t\tswitch (error.status) {\n\t\t\t\tcase 400:\n\t\t\t\t\tvar errors = [];\n\t\t\t\t\tif (error.data) {\n\t\t\t\t\t\terrors.push(error.data.Message);\n\t\t\t\t\t\tfor (var key in error.data.ModelState) {\n\t\t\t\t\t\t\tfor (var i = 0; i < error.data.ModelState[key].length; i++) {\n\t\t\t\t\t\t\t\terrors.push(error.data.ModelState[key][i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors.push('Server error');\n\t\t\t\t\t}\n\t\t\t\t\terror.Message = errors.join(' ');\n\t\t\t\t\t// warning !!\n\t\t\t\t\t$rootScope.httpError = error;\n\t\t\t\t\t$rootScope.$broadcast('onHttpInterceptorError', error);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 404:\n\t\t\t\t\terror.Message = \"Not found\";\n\t\t\t\t\t$rootScope.httpError = error;\n\t\t\t\t\t$rootScope.$broadcast('onHttpInterceptorError', error);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 500:\n\t\t\t\t\t// console.log('500',error);\n\t\t\t\t\t$rootScope.httpError = error;\n\t\t\t\t\t$rootScope.$broadcast('onHttpInterceptorError', error);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 401:\n\t\t\t\t\tLocalStorage.delete('authorization');\n\t\t\t\t\tLocalStorage.delete('user');\n\t\t\t\t\t$location.path('/signin');\n\t\t\t\t\tbreak;\n\t\t\t\tcase -1:\n\t\t\t\t\twindow.open(error.config.path, '_blank');\n\t\t\t\t\t// status == 0 you lost connection\n\t\t\t}\n\t\t\treturn $q.reject(error);\n\t\t}\n\n\t\tfunction signOut() {\n\t\t\tLocalStorage.delete('authorization');\n\t\t\tLocalStorage.delete('user');\n\t\t\tLocalStorage.delete('CampagnoloToken');\n\t\t\tLocalStorage.delete('GoogleToken');\n\t\t\tLocalStorage.delete('StravaToken');\n\t\t\tLocalStorage.delete('FacebookToken');\n\t\t\tLocalStorage.delete('GarminToken');\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Bearer', ['$http', '$promise', 'SessionStorage', 'LocalStorage', 'environment', function($http, $promise, SessionStorage, LocalStorage, environment) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\t'delete': BearerDelete,\n\t\t\texist: BearerExists,\n\t\t\tget: BearerGet,\n\t\t\tset: BearerSet,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t// statics methods\n\n\t\tfunction BearerDelete(accessToken, remember) {\n\t\t\tSessionStorage.delete('accessToken');\n\t\t\tLocalStorage.delete('accessToken');\n\t\t\tdelete $http.defaults.headers.common['Authorization'];\n\t\t}\n\n\t\tfunction BearerExists(accessToken, remember) {\n\t\t\treturn SessionStorage.exist('accessToken') || LocalStorage.exist('accessToken');\n\t\t}\n\n\t\tfunction BearerGet(accessToken, remember) {\n\t\t\tvar accessToken = null;\n\t\t\tif (SessionStorage.exist('accessToken')) {\n\t\t\t\taccessToken = SessionStorage.get('accessToken');\n\t\t\t\tBearerSet(accessToken);\n\t\t\t} else if (LocalStorage.exist('accessToken')) {\n\t\t\t\taccessToken = LocalStorage.get('accessToken');\n\t\t\t\tBearerSet(accessToken);\n\t\t\t}\n\t\t\treturn accessToken;\n\t\t}\n\n\t\tfunction BearerSet(accessToken, remember) {\n\t\t\tvar header = 'Bearer ' + accessToken;\n\t\t\tdelete $http.defaults.headers.common['Authorization'];\n\t\t\t$http.defaults.headers.common['Authorization'] = header;\n\t\t\tSessionStorage.set('accessToken', accessToken);\n\t\t\tif (remember) {\n\t\t\t\tLocalStorage.set('accessToken', accessToken);\n\t\t\t}\n\t\t\treturn header;\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('artisan');\r\n\r\n\tapp.service('Http', ['$http', '$promise', '$timeout', 'environment', function($http, $promise, $timeout, environment) {\r\n\r\n\t\tvar service = this;\r\n\r\n\t\tvar statics = {\r\n\t\t\tget: HttpGet,\r\n\t\t\tpost: HttpPost,\r\n\t\t\tput: HttpPut,\r\n\t\t\tpatch: HttpPatch,\r\n\t\t\t'delete': HttpDelete,\r\n\t\t\t'static': HttpStatic,\r\n\t\t\tfake: HttpFake,\r\n\t\t};\r\n\r\n\t\tangular.extend(service, statics);\r\n\r\n\t\t// statics methods\r\n\r\n\t\tfunction HttpPath(path) {\r\n\t\t\treturn environment.paths.api + path;\r\n\t\t}\r\n\r\n\t\tfunction HttpPromise(method, path, data) {\r\n\t\t\treturn $promise(function(promise) {\r\n\t\t\t\t$http[method](path, data).then(function(response) {\r\n\t\t\t\t\tpromise.resolve(response.data);\r\n\r\n\t\t\t\t}, function(e, status) {\r\n\t\t\t\t\tvar error = (e && e.data) ? e.data : {};\r\n\t\t\t\t\terror.status = e.status;\r\n\t\t\t\t\tpromise.reject(error);\r\n\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction HttpGet(path) {\r\n\t\t\treturn HttpPromise('get', HttpPath(path));\r\n\t\t}\r\n\r\n\t\tfunction HttpPost(path, data) {\r\n\t\t\treturn HttpPromise('post', HttpPath(path), data);\r\n\t\t}\r\n\r\n\t\tfunction HttpPut(path, data) {\r\n\t\t\treturn HttpPromise('put', HttpPath(path), data);\r\n\t\t}\r\n\r\n\t\tfunction HttpPatch(path, data) {\r\n\t\t\treturn HttpPromise('patch', HttpPath(path), data);\r\n\t\t}\r\n\r\n\t\tfunction HttpDelete(path) {\r\n\t\t\treturn HttpPromise('delete', HttpPath(path));\r\n\t\t}\r\n\r\n\t\tfunction HttpStatic(path) {\r\n\t\t\treturn HttpPromise('get', path);\r\n\t\t}\r\n\r\n\t\tfunction HttpFake(data, msec) {\r\n\t\t\tmsec = msec || 1000;\r\n\t\t\treturn $promise(function(promise) {\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\tpromise.resolve({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t}, msec);\r\n\t\t\t});\r\n\t\t}\r\n\r\n    }]);\r\n\r\n}());\r\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.factory('Preload', ['$promise', function($promise) {\n\n\t\tfunction Preload(path) {\n\t\t\tvar preload = this;\n\t\t\tpreload.path = path;\n\t\t\tpreload.loaded = 0;\n\t\t\tpreload.total = 0;\n\t\t\tpreload.progress = 0;\n\t\t}\n\n\t\tvar statics = {\n\t\t\tall: PreloadAll,\n\t\t};\n\n\t\tvar publics = {\n\t\t\tstart: PreloadStart,\n\t\t\timage: PreloadImage,\n\t\t};\n\n\t\tangular.extend(Preload, statics);\n\t\tangular.extend(Preload.prototype, publics);\n\n\t\treturn Preload;\n\n\t\t// statics methods\n\n\t\tfunction PreloadAll(paths, callback) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tvar preloads = paths.map(function(path) {\n\t\t\t\t\treturn new Preload(path);\n\t\t\t\t});\n\t\t\t\tvar progress = {\n\t\t\t\t\tloaded: 0,\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tpreloads: preloads\n\t\t\t\t};\n\t\t\t\tvar i = setInterval(update, 1000 / 10);\n\t\t\t\t$promise.all(\n\t\t\t\t\tpreloads.map(function(preload) {\n\t\t\t\t\t\treturn preload.start();\n\t\t\t\t\t})\n\t\t\t\t).then(function() {\n\t\t\t\t\tclearInterval(i);\n\t\t\t\t\tupdate();\n\t\t\t\t\tpromise.resolve(preloads.slice());\n\t\t\t\t\t// destroy();\n\t\t\t\t}, function(error) {\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t\t// destroy();\n\t\t\t\t});\n\n\t\t\t\tfunction update() {\n\t\t\t\t\tprogress.loaded = 0;\n\t\t\t\t\tprogress.total = 0;\n\t\t\t\t\tangular.forEach(preloads, function(preload) {\n\t\t\t\t\t\tprogress.loaded += preload.loaded;\n\t\t\t\t\t\tprogress.total += preload.total;\n\t\t\t\t\t});\n\t\t\t\t\tvar percent = progress.total ? progress.loaded / progress.total : 0;\n\t\t\t\t\tif (percent > progress.progress) {\n\t\t\t\t\t\tprogress.progress = percent;\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction destroy() {\n\t\t\t\t\tangular.forEach(preloads, function(preload) {\n\t\t\t\t\t\tpreload.buffer = null;\n\t\t\t\t\t\tpreload.xhr = null;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// instance methods\n\n\t\tfunction PreloadStart() {\n\t\t\tvar preload = this;\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\txhr.open(\"GET\", preload.path, true);\n\t\t\t\txhr.responseType = \"arraybuffer\"; // should be after open for ie11\n\t\t\t\txhr.onloadstart = function(e) {\n\t\t\t\t\t/*\n\t\t\t\t\tpreload.loaded = 0;\n\t\t\t\t\tpreload.total = 1;\n\t\t\t\t\tpreload.progress = 0;\n\t\t\t\t\t*/\n\t\t\t\t};\n\t\t\t\txhr.onprogress = function(e) {\n\t\t\t\t\tpreload.loaded = e.loaded;\n\t\t\t\t\tpreload.total = e.total;\n\t\t\t\t\tpreload.progress = e.total ? e.loaded / e.total : 0;\n\t\t\t\t};\n\t\t\t\txhr.onloadend = function(e) {\n\t\t\t\t\tpreload.loaded = preload.total;\n\t\t\t\t\tpreload.progress = 1;\n\t\t\t\t};\n\t\t\t\txhr.onload = function() {\n\t\t\t\t\tpreload.buffer = xhr.response;\n\t\t\t\t\tpromise.resolve(preload);\n\t\t\t\t};\n\t\t\t\txhr.onerror = function(error) {\n\t\t\t\t\tconsole.log('Preload.xhr.onerror', error);\n\t\t\t\t\tpreload.loaded = preload.total;\n\t\t\t\t\tpreload.progress = 1;\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t};\n\t\t\t\txhr.send();\n\t\t\t\tpreload.xhr = xhr;\n\t\t\t});\n\t\t}\n\n\t\tfunction PreloadImage() {\n\t\t\tvar preload = this;\n\t\t\tvar blob = new Blob([preload.buffer]);\n\t\t\tvar image = new Image();\n\t\t\timage.src = window.URL.createObjectURL(blob);\n\t\t\treturn image;\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('$once', ['$promise', function($promise) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tload: OnceLoad,\n\t\t\tscript: OnceScript,\n\t\t\tlink: OnceLink,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\tvar paths = {},\n\t\t\tuid = 0;\n\n\t\tfunction OnceLoad(path, callback) {\n\t\t\tif (path.indexOf('.js')) {\n\t\t\t\treturn OnceScript(path, callback);\n\n\t\t\t} else if (path.indexOf('.css')) {\n\t\t\t\treturn OnceLink(path);\n\n\t\t\t}\n\t\t}\n\n\t\tfunction OnceScript(path, callback) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\ttry {\n\t\t\t\t\tvar id = (paths[path] = paths[path] || ++uid);\n\t\t\t\t\tid = 'OnceScript' + id;\n\t\t\t\t\tif (document.getElementById(id)) {\n\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\t\t\t\tvar script = scripts[scripts.length - 1];\n\t\t\t\t\t\tvar node = document.createElement('script');\n\t\t\t\t\t\tnode.id = id;\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tif (callback === true) {\n\t\t\t\t\t\t\t\tcallback = id;\n\t\t\t\t\t\t\t\tpath = path.split('{{callback}}').join(callback);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twindow[callback] = function(data) {\n\t\t\t\t\t\t\t\tpromise.resolve(data);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode.addEventListener('load', promise.resolve);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnode.addEventListener('error', promise.reject);\n\t\t\t\t\t\tnode.src = path;\n\t\t\t\t\t\tscript.parentNode.insertBefore(node, script.nextSibling);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction OnceLink(path) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\ttry {\n\t\t\t\t\tvar id = (paths[path] = paths[path] || ++uid);\n\t\t\t\t\tid = 'OnceStyle' + id;\n\t\t\t\t\tif (document.getElementById(id)) {\n\t\t\t\t\t\tpromise.resolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar links = document.getElementsByTagName('link');\n\t\t\t\t\t\tvar link = links[links.length - 1];\n\t\t\t\t\t\tvar node = document.createElement('link');\n\t\t\t\t\t\tnode.id = id;\n\t\t\t\t\t\tnode.rel = 'stylesheet';\n\t\t\t\t\t\tnode.href = path;\n\t\t\t\t\t\tnode.addEventListener('load', promise.resolve);\n\t\t\t\t\t\tnode.addEventListener('error', promise.reject);\n\t\t\t\t\t\tlink.parentNode.insertBefore(node, link.nextSibling);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tpromise.reject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Router', ['$rootScope', '$location', '$route', '$timeout', function($rootScope, $location, $route, $timeout) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tisController: RouterIsController,\n\t\t\tredirect: RouterRedirect,\n\t\t\tpath: RouterPath,\n\t\t\tapply: RouterApply,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t$rootScope.$on('$routeChangeStart', RouterOnChangeStart);\n\t\t$rootScope.$on('$routeChangeSuccess', RouterOnChangeSuccess);\n\t\t$rootScope.$on('$routeChangeError', RouterOnChangeError);\n\t\t$rootScope.$on('$routeUpdate', RouterOnUpdate);\n\t\t$rootScope.$on('$stateReady', RouterOnStateReady);\n\n\t\tvar $previous, $current, $next;\n\t\tvar $previousController, $currentController, $nextController;\n\n\t\tfunction RouterSetControllers() {\n\t\t\t$previousController = $previous ? $previous.controller : null;\n\t\t\t$currentController = $current ? $current.controller : null;\n\t\t\t$nextController = $next ? $next.controller : null;\n\t\t}\n\n\t\t/*\n\t\t$routeChangeStart\n\t\tBroadcasted before a route change. At this point the route services starts resolving all of the dependencies needed for the route change to occur. Typically this involves fetching the view template as well as any dependencies defined in resolve route property. Once all of the dependencies are resolved $routeChangeSuccess is fired.\n\t\tThe route change (and the $location change that triggered it) can be prevented by calling preventDefault method of the event. See $rootScope.Scope for more details about event object.\n\t\t*/\n\t\tfunction RouterOnChangeStart(event, next, current) {\n\t\t\t$previous = null;\n\t\t\t$current = current ? current.$$route : null;\n\t\t\t$next = next ? next.$$route : null;\n\t\t\tRouterSetControllers();\n\t\t\t// console.log('Router.RouterOnChangeStart', '$previous', $previous, '$current', $current, '$next', $next);\n\t\t\tservice.loading = true;\n\t\t}\n\n\t\t/*\n\t\t$routeChangeSuccess\n\t\tBroadcasted after a route change has happened successfully. The resolve dependencies are now available in the current.locals property.\n\t\t*/\n\t\tfunction RouterOnChangeSuccess(event, current, previous) {\n\t\t\t$previous = previous ? previous.$$route : null;\n\t\t\t$current = current ? current.$$route : null;\n\t\t\t$next = null;\n\t\t\tRouterSetControllers();\n\t\t\t// console.log('Router.RouterOnChangeSuccess', '$previous', $previous, '$current', $current, '$next', $next);\n\t\t}\n\n\t\t/*\n\t\t$routeChangeError\n\t\tBroadcasted if a redirection function fails or any redirection or resolve promises are rejected.\n\t\t*/\n\t\tfunction RouterOnChangeError(event, current, previous, rejection) {\n\t\t\t$previous = null;\n\t\t\t$current = previous.$$route || null;\n\t\t\t$next = null;\n\t\t\tRouterSetControllers();\n\t\t\t// console.log('Router.RouterOnChangeError', '$previous', $previous, '$current', $current, '$next', $next);\n\t\t}\n\n\t\t/*\n\t\t$routeUpdate\n\t\tThe reloadOnSearch property has been set to false, and we are reusing the same instance of the Controller.\n\t\t*/\n\t\tfunction RouterOnUpdate(event, current) {\n\t\t\t$previous = current ? current.$$route : null;\n\t\t\t$current = current ? current.$$route : null;\n\t\t\t$next = null;\n\t\t\tRouterSetControllers();\n\t\t\t// console.log('Router.RouterOnUpdate', '$previous', $previous, '$current', $current, '$next', $next);\n\t\t}\n\n\t\tfunction RouterOnStateReady(scope, state) {\n\t\t\t$timeout(function() {\n\t\t\t\tservice.loading = false;\n\t\t\t}, 1000);\n\t\t}\n\n\t\tfunction RouterIsController(controller) {\n\t\t\treturn $currentController === controller;\n\t\t}\n\n\t\t// navigation\n\n\t\tfunction RouterRedirectTo(path) {\n\t\t\t$location.$$lastRequestedPath = $location.path();\n\t\t\t$location.path(path);\n\t\t}\n\n\t\tfunction RouterRetryLastRequestedPath(path) {\n\t\t\tpath = $location.$$lastRequestedPath || path;\n\t\t\t$location.$$lastRequestedPath = null;\n\t\t\t$location.path(path);\n\t\t}\n\n\t\tfunction RouterRedirect(path, msecs) {\n\t\t\tif (msecs) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tRouterRedirectTo(path);\n\t\t\t\t}, msecs);\n\t\t\t} else {\n\t\t\t\tRouterRedirectTo(path);\n\t\t\t}\n\t\t}\n\n\t\tfunction RouterPath(path, msecs) {\n\t\t\tif (msecs) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tRouterRetryLastRequestedPath(path);\n\t\t\t\t}, msecs);\n\t\t\t} else {\n\t\t\t\tRouterRetryLastRequestedPath(path);\n\t\t\t}\n\t\t}\n\n\t\tfunction RouterApply(path, msecs) {\n\t\t\tif (msecs) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$location.path(path);\n\t\t\t\t}, msecs);\n\t\t\t} else {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$location.path(path);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Silent', ['$rootScope', '$location', function($rootScope, $location) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\tsilent: SilentSilent,\n\t\t\tpath: SilentPath,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t$rootScope.$$listeners.$locationChangeSuccess.unshift(SilentListener);\n\t\t// console.log('$rootScope.$$listeners.$locationChangeSuccess', $rootScope.$$listeners.$locationChangeSuccess);\n\n\t\t// private vars\n\n\t\tvar $path;\n\n\t\t// static methods\n\n\t\tfunction SilentGetDomain() {\n\t\t\tvar currentDomain = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\t\t\treturn currentDomain;\n\t\t}\n\n\t\tfunction SilentUnlink() {\n\t\t\tvar listeners = $rootScope.$$listeners.$locationChangeSuccess;\n\t\t\tangular.forEach(listeners, function(value, name) {\n\t\t\t\tif (value === listener) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction relink() {\n\t\t\t\t\tlisteners[name] = value;\n\t\t\t\t}\n\t\t\t\tlisteners[name] = relink; // temporary unlinking\n\t\t\t});\n\t\t}\n\n\t\tfunction SilentListener(e) {\n\t\t\t// console.log('onLocationChangeSuccess', e);\n\t\t\tif ($path === $location.path()) {\n\t\t\t\tSilentUnlink();\n\t\t\t}\n\t\t\t$path = null;\n\t\t}\n\n\t\tfunction SilentSilent(path, replace) {\n\t\t\t// this.prev = $location.path(); ???\n\t\t\tvar location = $location.url(path);\n\t\t\tif (replace) {\n\t\t\t\tlocation.replace();\n\t\t\t}\n\t\t\t$path = $location.path();\n\t\t}\n\n\t\tfunction SilentPath(path) {\n\t\t\treturn $location.path(path);\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tvar TIMEOUT = 5 * 60 * 1000; // five minutes\n\n\tapp.service('Cookie', ['$promise', function($promise) {\n\n\t\tvar service = {\n\t\t\tTIMEOUT: TIMEOUT,\n\t\t\t'delete': CookieDelete,\n\t\t\texist: CookieExists,\n\t\t\tget: CookieGet,\n\t\t\ton: CookieOn,\n\t\t\tset: CookieSet,\n\t\t};\n\n\t\tangular.extend(this, service);\n\n\t\tfunction CookieDelete(name) {\n\t\t\tCookieSetter(name, \"\", -1);\n\t\t}\n\n\t\tfunction CookieExists(name) {\n\t\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\n\t\t}\n\n\t\tfunction CookieGet(name) {\n\t\t\tvar cookieName = name + \"=\";\n\t\t\tvar ca = document.cookie.split(';');\n\t\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\t\tvar c = ca[i];\n\t\t\t\twhile (c.charAt(0) == ' ') {\n\t\t\t\t\tc = c.substring(1, c.length);\n\t\t\t\t}\n\t\t\t\tif (c.indexOf(cookieName) === 0) {\n\t\t\t\t\tvar value = c.substring(cookieName.length, c.length);\n\t\t\t\t\tvar model = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.log('Cookie.get.error parsing', key, e);\n\t\t\t\t\t}\n\t\t\t\t\treturn model;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction CookieOn(name) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tvar i, interval = 1000,\n\t\t\t\t\telapsed = 0,\n\t\t\t\t\ttimeout = Cookie.TIMEOUT;\n\n\t\t\t\tfunction checkCookie() {\n\t\t\t\t\tif (elapsed > timeout) {\n\t\t\t\t\t\tpromise.reject('timeout');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar c = CookieGet(name);\n\t\t\t\t\t\tif (c) {\n\t\t\t\t\t\t\tpromise.resolve(c);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telapsed += interval;\n\t\t\t\t\t\t\ti = setTimeout(checkCookie, interval);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcheckCookie();\n\t\t\t});\n\t\t}\n\n\t\tfunction CookieSet(name, value, days) {\n\t\t\ttry {\n\t\t\t\tvar cache = [];\n\t\t\t\tvar json = JSON.stringify(value, function(key, value) {\n\t\t\t\t\tif (key === 'pool') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t\t// Circular reference found, discard key\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t\tcache = null;\n\t\t\t\tCookieSetter(name, btoa(encodeURIComponent(json)), days);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\n\t\t\t}\n\t\t}\n\n\t\tfunction CookieSetter(name, value, days) {\n\t\t\tvar expires;\n\t\t\tif (days) {\n\t\t\t\tvar date = new Date();\n\t\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\t\texpires = '; expires=' + date.toGMTString();\n\t\t\t} else {\n\t\t\t\texpires = '';\n\t\t\t}\n\t\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t\t}\n\n    }]);\n\n\tapp.service('LocalStorage', ['$promise', 'Cookie', function($promise, Cookie) {\n\n\t\tvar service = {\n\t\t\tTIMEOUT: TIMEOUT,\n\t\t\t'delete': LocalDelete,\n\t\t\texist: LocalExists,\n\t\t\tget: LocalGet,\n\t\t\ton: LocalOn,\n\t\t\tset: LocalSet,\n\t\t};\n\n\t\tvar supported = LocalSupported();\n\n\t\tif (supported) {\n\t\t\tangular.extend(this, service);\n\t\t} else {\n\t\t\tangular.extend(this, Cookie);\n\t\t}\n\n\t\tthis.supported = supported;\n\n\t\tfunction LocalSupported() {\n\t\t\tvar supported = false;\n\t\t\ttry {\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t\treturn supported;\n\t\t}\n\n\t\tfunction LocalExists(name) {\n\t\t\treturn window.localStorage[name] !== undefined;\n\t\t}\n\n\t\tfunction LocalGet(name) {\n\t\t\tvar value = null;\n\t\t\tif (window.localStorage[name] !== undefined) {\n\t\t\t\ttry {\n\t\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tfunction LocalSet(name, value) {\n\t\t\ttry {\n\t\t\t\tvar cache = [];\n\t\t\t\tvar json = JSON.stringify(value, function(key, value) {\n\t\t\t\t\tif (key === 'pool') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t\t// Circular reference found, discard key\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t\tcache = null;\n\t\t\t\twindow.localStorage.setItem(name, json);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\n\t\t\t}\n\t\t}\n\n\t\tfunction LocalDelete(name) {\n\t\t\twindow.localStorage.removeItem(name);\n\t\t}\n\n\t\tfunction LocalOn(name) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tvar i, timeout = Cookie.TIMEOUT;\n\n\t\t\t\tfunction storageEvent(e) {\n\t\t\t\t\t// console.log('LocalStorage.on', name, e);\n\t\t\t\t\tif (i) {\n\t\t\t\t\t\tclearTimeout(i);\n\t\t\t\t\t}\n\t\t\t\t\tif (e.originalEvent.key == name) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar value = JSON.parse(e.originalEvent.newValue); // , e.originalEvent.oldValue\n\t\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\n\t\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\t\ti = setTimeout(function() {\n\t\t\t\t\tpromise.reject('timeout');\n\t\t\t\t}, timeout);\n\t\t\t});\n\t\t}\n\n    }]);\n\n\tapp.service('SessionStorage', ['$promise', 'Cookie', function($promise, Cookie) {\n\n\t\tvar service = {\n\t\t\tTIMEOUT: TIMEOUT,\n\t\t\t'delete': SessionDelete,\n\t\t\texist: SessionExists,\n\t\t\tget: SessionGet,\n\t\t\ton: SessionOn,\n\t\t\tset: SessionSet,\n\t\t};\n\n\t\tvar supported = SessionSupported();\n\n\t\tif (supported) {\n\t\t\tangular.extend(this, service);\n\t\t} else {\n\t\t\tangular.extend(this, Cookie);\n\t\t}\n\n\t\tthis.supported = supported;\n\n\t\tfunction SessionSupported() {\n\t\t\tvar supported = false;\n\t\t\ttry {\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== undefined;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t\treturn supported;\n\t\t}\n\n\t\tfunction SessionExists(name) {\n\t\t\treturn window.sessionStorage[name] !== undefined;\n\t\t}\n\n\t\tfunction SessionGet(name) {\n\t\t\tvar value = null;\n\t\t\tif (window.sessionStorage[name] !== undefined) {\n\t\t\t\ttry {\n\t\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tfunction SessionSet(name, value) {\n\t\t\ttry {\n\t\t\t\tvar cache = [];\n\t\t\t\tvar json = JSON.stringify(value, function(key, value) {\n\t\t\t\t\tif (key === 'pool') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t\t// Circular reference found, discard key\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcache.push(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t\tcache = null;\n\t\t\t\twindow.sessionStorage.setItem(name, json);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\n\t\t\t}\n\t\t}\n\n\t\tfunction SessionDelete(name) {\n\t\t\twindow.sessionStorage.removeItem(name);\n\t\t}\n\n\t\tfunction SessionOn(name) {\n\t\t\treturn $promise(function(promise) {\n\t\t\t\tvar i, timeout = Cookie.TIMEOUT;\n\n\t\t\t\tfunction storageEvent(e) {\n\t\t\t\t\t// console.log('SessionStorage.on', name, e);\n\t\t\t\t\tif (i) {\n\t\t\t\t\t\tclearTimeout(i);\n\t\t\t\t\t}\n\t\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar value = JSON.parse(e.originalEvent.newValue); // , e.originalEvent.oldValue\n\t\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\n\t\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\t\ti = setTimeout(function() {\n\t\t\t\t\tpromise.reject('timeout');\n\t\t\t\t}, timeout);\n\t\t\t});\n\t\t}\n\n    }]);\n\n}());\n\n/* global angular */\n\n(function() {\n\t\"use strict\";\n\n\tvar app = angular.module('artisan');\n\n\tapp.service('Trust', ['$sce', function($sce) {\n\n\t\tvar service = this;\n\n\t\tvar statics = {\n\t\t\thtml: TrustHtml,\n\t\t\tresource: TrustResource,\n\t\t\turl: TrustUrl,\n\t\t};\n\n\t\tangular.extend(service, statics);\n\n\t\t// private vars\n\n\t\tvar values = [],\n\t\t\ttrustedValues = [];\n\n\t\tfunction TrustGetValue(value) {\n\t\t\tvar index = values.indexOf(value);\n\t\t\tif (index !== -1) {\n\t\t\t\treturn trustedValues[index];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tfunction TrustSetValue(value, trustedValue) {\n\t\t\tvalues.push(value);\n\t\t\tvalues.push(trustedValue);\n\t\t}\n\n\t\tfunction TrustGetOrSet(value, callback) {\n\t\t\tvar trustedValue = TrustGetValue(value);\n\t\t\tif (!trustedValue) {\n\t\t\t\ttrustedValue = callback();\n\t\t\t\tTrustSetValue(value, trustedValue);\n\t\t\t}\n\t\t\treturn trustedValue;\n\t\t}\n\n\t\tfunction TrustHtml(value) {\n\t\t\treturn TrustGetOrSet(value, function() {\n\t\t\t\treturn $sce.trustAsHtml(value);\n\t\t\t});\n\t\t}\n\n\t\tfunction TrustResource(value) {\n\t\t\treturn TrustGetOrSet(value, function() {\n\t\t\t\treturn $sce.trustAsResourceUrl(value);\n\t\t\t});\n\t\t}\n\n\t\tfunction TrustUrl(value) {\n\t\t\treturn TrustGetOrSet(value, function() {\n\t\t\t\treturn 'url(\\'' + value + '\\')';\n\t\t\t});\n\t\t}\n\n    }]);\n\n}());\n"]}